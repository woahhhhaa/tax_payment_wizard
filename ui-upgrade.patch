# UI/UX patch (Tailwind + shadcn + route-group layouts)
# Generated: 2026-01-10T21:27:23Z

diff --git a/app/globals.css b/app/globals.css
index 98faf31..9ccf978 100644
--- a/app/globals.css
+++ b/app/globals.css
@@ -1,96 +1,84 @@
-* {
-  box-sizing: border-box;
-}
+@tailwind base;
+@tailwind components;
+@tailwind utilities;
 
-body {
-  margin: 0;
-  font-family: "Inter", "Segoe UI", system-ui, sans-serif;
-  color: #0f172a;
-  background: #f8fafc;
-}
+@layer base {
+  :root {
+    --background: 210 40% 98%;
+    --foreground: 222.2 84% 4.9%;
 
-a {
-  color: inherit;
-  text-decoration: none;
-}
+    --card: 0 0% 100%;
+    --card-foreground: 222.2 84% 4.9%;
 
-main {
-  max-width: 960px;
-  margin: 0 auto;
-  padding: 48px 20px;
-}
+    --popover: 0 0% 100%;
+    --popover-foreground: 222.2 84% 4.9%;
 
-.card {
-  background: #ffffff;
-  border: 1px solid #e2e8f0;
-  border-radius: 12px;
-  padding: 24px;
-  box-shadow: 0 10px 30px rgba(15, 23, 42, 0.08);
-}
+    --primary: 238 74% 56%;
+    --primary-foreground: 210 40% 98%;
 
-.btn {
-  display: inline-flex;
-  align-items: center;
-  justify-content: center;
-  border-radius: 999px;
-  border: 1px solid #0f172a;
-  background: #0f172a;
-  color: #ffffff;
-  padding: 10px 20px;
-  font-weight: 600;
-  cursor: pointer;
-  gap: 8px;
-}
+    --secondary: 210 40% 96.1%;
+    --secondary-foreground: 222.2 47.4% 11.2%;
 
-.btn.secondary {
-  background: #ffffff;
-  color: #0f172a;
-}
+    --muted: 210 40% 96.1%;
+    --muted-foreground: 215.4 16.3% 46.9%;
 
-.btn-row {
-  display: flex;
-  gap: 12px;
-  flex-wrap: wrap;
-}
+    --accent: 210 40% 96.1%;
+    --accent-foreground: 222.2 47.4% 11.2%;
 
-form {
-  display: grid;
-  gap: 16px;
-}
+    --destructive: 0 84.2% 60.2%;
+    --destructive-foreground: 210 40% 98%;
 
-label {
-  display: grid;
-  gap: 6px;
-  font-size: 14px;
-  color: #475569;
-}
+    --border: 214.3 31.8% 91.4%;
+    --input: 214.3 31.8% 91.4%;
+    --ring: 238 74% 56%;
 
-input {
-  padding: 10px 12px;
-  border-radius: 8px;
-  border: 1px solid #cbd5f5;
-  font-size: 15px;
-}
+    --radius: 1.25rem;
+    --shadow: 222.2 84% 4.9%;
+  }
 
-.table {
-  width: 100%;
-  border-collapse: collapse;
-}
+  @media (prefers-color-scheme: dark) {
+    :root {
+      --background: 222.2 84% 4.9%;
+      --foreground: 210 40% 98%;
 
-.table th,
-.table td {
-  text-align: left;
-  padding: 10px;
-  border-bottom: 1px solid #e2e8f0;
-  font-size: 14px;
-}
+      --card: 222.2 84% 4.9%;
+      --card-foreground: 210 40% 98%;
+
+      --popover: 222.2 84% 4.9%;
+      --popover-foreground: 210 40% 98%;
+
+      --primary: 238 74% 62%;
+      --primary-foreground: 222.2 47.4% 11.2%;
+
+      --secondary: 217.2 32.6% 17.5%;
+      --secondary-foreground: 210 40% 98%;
+
+      --muted: 217.2 32.6% 17.5%;
+      --muted-foreground: 215 20.2% 65.1%;
+
+      --accent: 217.2 32.6% 17.5%;
+      --accent-foreground: 210 40% 98%;
+
+      --destructive: 0 62.8% 30.6%;
+      --destructive-foreground: 210 40% 98%;
+
+      --border: 217.2 32.6% 17.5%;
+      --input: 217.2 32.6% 17.5%;
+      --ring: 238 74% 62%;
+
+      --shadow: 0 0% 0%;
+    }
+  }
+
+  * {
+    @apply border-border;
+  }
+
+  html {
+    color-scheme: light dark;
+  }
 
-.pill {
-  display: inline-flex;
-  align-items: center;
-  padding: 4px 10px;
-  border-radius: 999px;
-  font-size: 12px;
-  background: #e2e8f0;
-  color: #334155;
+  body {
+    @apply bg-background text-foreground;
+  }
 }
diff --git a/app/layout.tsx b/app/layout.tsx
index 067ca8c..69caa46 100644
--- a/app/layout.tsx
+++ b/app/layout.tsx
@@ -1,6 +1,13 @@
 import "./globals.css";
 import type { ReactNode } from "react";
 import { Providers } from "./providers";
+import { Inter } from "next/font/google";
+
+const inter = Inter({
+  subsets: ["latin"],
+  variable: "--font-sans",
+  display: "swap"
+});
 
 export const metadata = {
   title: "Tax Payment Wizard SaaS",
@@ -10,7 +17,7 @@ export const metadata = {
 export default function RootLayout({ children }: { children: ReactNode }) {
   return (
     <html lang="en">
-      <body>
+      <body className={`${inter.variable} min-h-screen bg-background font-sans text-foreground antialiased`}>
         <Providers>{children}</Providers>
       </body>
     </html>
diff --git a/package.json b/package.json
index 29faca0..b59e7fb 100644
--- a/package.json
+++ b/package.json
@@ -17,19 +17,26 @@
   },
   "dependencies": {
     "@prisma/client": "^5.22.0",
+    "@radix-ui/react-slot": "^1.2.4",
     "bcrypt": "^5.1.1",
+    "class-variance-authority": "^0.7.1",
+    "clsx": "^2.1.1",
     "next": "^14.2.5",
     "next-auth": "^4.24.7",
     "openai": "^4.0.0",
     "react": "^18.3.1",
-    "react-dom": "^18.3.1"
+    "react-dom": "^18.3.1",
+    "tailwind-merge": "^3.4.0"
   },
   "devDependencies": {
     "@types/bcrypt": "^5.0.2",
     "@types/node": "^20.14.15",
     "@types/react": "^18.3.4",
     "@types/react-dom": "^18.3.0",
+    "autoprefixer": "^10.4.23",
+    "postcss": "^8.5.6",
     "prisma": "^5.22.0",
+    "tailwindcss": "^3.4.19",
     "tsx": "^4.19.2",
     "typescript": "^5.5.4"
   }
diff --git a/public/tax_payment_wizard_new.html b/public/tax_payment_wizard_new.html
index 353ea50..945d3b0 100644
--- a/public/tax_payment_wizard_new.html
+++ b/public/tax_payment_wizard_new.html
@@ -4,12 +4,27 @@
   <meta charset="UTF-8" />
   <title>Tax Payment Wizard (Merged Version)</title>
   <style>
+    :root {
+      --bg: #f8fafc;
+      --card: #ffffff;
+      --fg: #0f172a;
+      --muted: #64748b;
+      --border: #e2e8f0;
+      --accent: #3b82f6;
+      --accent-hover: #2563eb;
+      --success: #10b981;
+      --success-hover: #059669;
+      --shadow: 0 1px 1px rgba(15, 23, 42, 0.04), 0 10px 30px rgba(15, 23, 42, 0.1);
+    }
+
     body {
-      font-family: Arial, sans-serif;
+      font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Inter, Roboto,
+        Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
       margin: 20px auto;
       max-width: 100%;
       padding: 0 10px;
-      background: #f5f5f5;
+      background: var(--bg);
+      color: var(--fg);
     }
     .container {
       display: grid;
@@ -41,18 +56,19 @@
       min-width: 0;
       padding: 24px;
       position: relative;
-      background: #fff;
-      border-radius: 8px;
-      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
+      background: var(--card);
+      border: 1px solid var(--border);
+      border-radius: 16px;
+      box-shadow: var(--shadow);
     }
     /* Sidebar preview */
     aside.preview-container {
       min-width: 0;
       padding: 32px;
-      background: #ffffff;
-      border-radius: 12px;
-      border: none;
-      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
+      background: var(--card);
+      border-radius: 16px;
+      border: 1px solid var(--border);
+      box-shadow: var(--shadow);
       position: sticky;
       top: 24px;
       height: fit-content;
@@ -66,10 +82,11 @@
       padding: 0;
       list-style: none;
       counter-reset: step;
-      background: #fff;
-      border-radius: 8px;
+      background: var(--card);
+      border-radius: 14px;
       padding: 16px;
-      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
+      border: 1px solid var(--border);
+      box-shadow: 0 1px 1px rgba(15, 23, 42, 0.03), 0 8px 24px rgba(15, 23, 42, 0.08);
     }
     .step-progress li {
       flex: 1;
@@ -178,20 +195,24 @@
     }
     button {
       padding: 12px 24px;
-      border: none;
-      border-radius: 6px;
+      border: 1px solid transparent;
+      border-radius: 10px;
       cursor: pointer;
       font-weight: 500;
       font-size: 14px;
       line-height: 1.5;
       transition: all 0.2s ease;
-      background: #3b82f6;
+      background: var(--accent);
       color: white;
     }
     button:hover {
-      background: #2563eb;
+      background: var(--accent-hover);
       transform: translateY(-1px);
     }
+    button:focus-visible {
+      outline: none;
+      box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.18);
+    }
     button[type="button"] {
       background: #64748b;
     }
@@ -199,29 +220,29 @@
       background: #475569;
     }
     .primary-button {
-      background: #10b981;
+      background: var(--success);
       font-size: 16px;
       padding: 14px 28px;
       font-weight: 600;
     }
     .primary-button:hover {
-      background: #059669;
+      background: var(--success-hover);
     }
     /* Fieldset styling */
     fieldset {
-      border: 1px solid #ddd;
+      border: 1px solid var(--border);
       padding: 24px;
       margin-bottom: 24px;
-      border-radius: 8px;
-      background: white;
+      border-radius: 14px;
+      background: var(--card);
     }
     legend {
       font-size: 1.2em;
       font-weight: 600;
-      background: #007bff;
+      background: var(--accent);
       color: white;
       padding: 8px 16px;
-      border-radius: 4px;
+      border-radius: 10px;
       display: inline-block;
       margin-bottom: 15px;
       box-shadow: 0 1px 3px rgba(0,0,0,0.1);
@@ -230,7 +251,7 @@
     }
     /* ... rest of your existing CSS ... */
     legend:hover {
-      background: #0056b3;
+      background: var(--accent-hover);
     }
     /* Form fields */
     .form-field {
@@ -241,7 +262,7 @@
       display: block;
       margin-bottom: 4px;
       font-weight: 600;
-      color: #333;
+      color: var(--fg);
     }
     .form-field input[type="text"],
     .form-field input[type="date"],
@@ -250,18 +271,20 @@
     .form-field textarea {
       width: 100%;
       padding: 12px;
-      border: 1px solid #ddd;
-      border-radius: 4px;
+      border: 1px solid var(--border);
+      border-radius: 10px;
       box-sizing: border-box;
       font-size: 14px;
       line-height: 1.5;
+      background: #ffffff;
+      transition: box-shadow 0.15s ease, border-color 0.15s ease;
     }
     .form-field input:focus,
     .form-field select:focus,
     .form-field textarea:focus {
-      border-color: #007bff;
+      border-color: var(--accent);
       outline: none;
-      box-shadow: 0 0 0 2px rgba(0,123,255,0.25);
+      box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.18);
     }
     .form-field.error input,
     .form-field.error select {
@@ -773,6 +796,7 @@
 	        <button type="button" onclick="exportSessionCsv()">Export CSV</button>
 	        <button type="button" onclick="triggerImportCsv()">Import CSV</button>
 	        <button type="button" onclick="generateSessionDrafts()">Download Draft Emails (.zip)</button>
+	        <button type="button" onclick="generateChecklistLink()">Generate Checklist Link</button>
 	        <button
 	          type="button"
 	          onclick="reportBug()"
@@ -2027,6 +2051,7 @@ let currentBatchId = null;
 let saveTimer = null;
 let saveInFlight = false;
 let pendingSave = false;
+let portalUrlsByClientId = {};
 
 /** Map two-letter abbreviations to full state names used in statesData */
 const STATE_ABBREVIATIONS = {
@@ -2280,6 +2305,7 @@ async function loadSessionFromServer() {
   const data = await resp.json().catch(() => ({}));
   currentBatchId = data?.batchId || null;
   session = normalizeSessionData(data?.snapshot);
+  portalUrlsByClientId = {};
 
   const nameInput = document.getElementById('sessionNameInput');
   if (nameInput) {
@@ -2340,6 +2366,28 @@ function saveSessionToStorage() {
   queueAutosave();
 }
 
+function waitForSaveCompletion() {
+  return new Promise(resolve => {
+    const timer = setInterval(() => {
+      if (!saveInFlight && !pendingSave) {
+        clearInterval(timer);
+        resolve();
+      }
+    }, 100);
+  });
+}
+
+async function ensureSavedNow() {
+  if (!session) return;
+  if (activeClientId) upsertActiveClientFromForm();
+  if (saveInFlight) {
+    await waitForSaveCompletion();
+    return;
+  }
+  await persistSessionToServer();
+  await waitForSaveCompletion();
+}
+
 async function newSession() {
   if (!confirm('Start a new session? This will replace the current session in the browser (you can Save JSON first).')) return;
   clearAssistantConversation();
@@ -2356,6 +2404,7 @@ async function newSession() {
     const data = await resp.json().catch(() => ({}));
     currentBatchId = data?.batchId || null;
     session = normalizeSessionData(data?.snapshot);
+    portalUrlsByClientId = {};
     session.clients = [];
     activeClientId = null;
     createNewClient();
@@ -2914,7 +2963,8 @@ function generateSessionDrafts() {
     const data = job.data || {};
     const html = buildEmailHTMLFromData(data, {
       includeDisclaimers: data.showDisclaimers ?? true,
-      includePreviewHeader: false
+      includePreviewHeader: false,
+      portalUrl: portalUrlsByClientId[job.clientId] || ''
     });
     const subjectDate = formatDueDateForSubject(data.paymentDueDate);
     const subject = `Tax Payment Instructions - Due ${subjectDate || ''}`;
@@ -2955,6 +3005,45 @@ function generateSessionDrafts() {
     });
 }
 
+async function generateChecklistLink() {
+  if (!session || !activeClientId) {
+    alert('Select a client first.');
+    return;
+  }
+
+  try {
+    await ensureSavedNow();
+    if (!currentBatchId) {
+      throw new Error('Missing batch');
+    }
+
+    const resp = await fetch('/api/plans/publish', {
+      method: 'POST',
+      headers: { 'Content-Type': 'application/json' },
+      body: JSON.stringify({
+        batchId: currentBatchId,
+        wizardClientId: activeClientId
+      })
+    });
+
+    if (!resp.ok) {
+      throw new Error(`Publish failed (${resp.status})`);
+    }
+
+    const data = await resp.json().catch(() => ({}));
+    if (!data?.portalUrl) {
+      throw new Error('Missing portal URL');
+    }
+
+    portalUrlsByClientId[activeClientId] = data.portalUrl;
+    regeneratePreviewHTML();
+    alert(`Checklist link generated:\n${data.portalUrl}`);
+  } catch (e) {
+    console.error(e);
+    alert('Unable to generate checklist link. Please try again.');
+  }
+}
+
 function syncSessionAfterChange(options = {}) {
   if (!session) return;
   upsertActiveClientFromForm();
@@ -4484,6 +4573,7 @@ function buildEmailHTMLFromData(data, options = {}) {
   const dateStr = escapeHTML(formatDueDateForSubject(data.paymentDueDate));
   const addressee = escapeHTML(data.addresseeName || '');
   const sender = escapeHTML(data.senderName || '');
+  const portalUrl = safeUrl(options.portalUrl || '');
 
   const greetingText = options.greeting != null
     ? String(options.greeting)
@@ -4528,6 +4618,10 @@ function buildEmailHTMLFromData(data, options = {}) {
     html += `<br>`;
   }
 
+  if (portalUrl) {
+    html += `View and confirm your payments here: <a href="${portalUrl}" target="_blank" rel="noopener noreferrer">Open checklist</a><br><br>`;
+  }
+
   if (Array.isArray(data.federalPayments) && data.federalPayments.length) {
     data.federalPayments.forEach(p => {
       html += buildFederalPaymentSectionForData(p, data);
@@ -4591,7 +4685,8 @@ function buildEmailHTML() {
     greeting,
     personalNote,
     includeDisclaimers: formData.showDisclaimers,
-    includePreviewHeader: true
+    includePreviewHeader: true,
+    portalUrl: portalUrlsByClientId[activeClientId] || ''
   });
 }
 
diff --git a/app/app/SignOutButton.tsx b/app/app/SignOutButton.tsx
deleted file mode 100644
index 33609d4..0000000
--- a/app/app/SignOutButton.tsx
+++ /dev/null
@@ -1,11 +0,0 @@
-"use client";
-
-import { signOut } from "next-auth/react";
-
-export function SignOutButton() {
-  return (
-    <button className="btn secondary" type="button" onClick={() => signOut()}>
-      Sign out
-    </button>
-  );
-}
diff --git a/app/app/actions.ts b/app/app/actions.ts
deleted file mode 100644
index acf9ef5..0000000
--- a/app/app/actions.ts
+++ /dev/null
@@ -1,25 +0,0 @@
-"use server";
-
-import { redirect } from "next/navigation";
-import { getServerAuthSession } from "@/lib/auth";
-import { prisma } from "@/lib/prisma";
-import { createEmptySession } from "@/lib/wizard-session";
-
-export async function createNewBatch() {
-  const session = await getServerAuthSession();
-  const userId = session?.user?.id;
-  if (!userId) {
-    redirect("/login");
-  }
-
-  const snapshot = createEmptySession();
-  await prisma.batch.create({
-    data: {
-      userId,
-      name: `New Batch ${new Date().toLocaleDateString()}`,
-      snapshotJson: snapshot
-    }
-  });
-
-  redirect("/wizard");
-}
diff --git a/app/app/page.tsx b/app/app/page.tsx
deleted file mode 100644
index 627b18f..0000000
--- a/app/app/page.tsx
+++ /dev/null
@@ -1,121 +0,0 @@
-import Link from "next/link";
-import { redirect } from "next/navigation";
-import { getServerAuthSession } from "@/lib/auth";
-import { prisma } from "@/lib/prisma";
-import { createNewBatch } from "./actions";
-import { SignOutButton } from "./SignOutButton";
-
-export const dynamic = "force-dynamic";
-
-export default async function AppPage() {
-  const session = await getServerAuthSession();
-  const userId = session?.user?.id;
-
-  if (!userId) {
-    redirect("/login?next=/app");
-  }
-
-  const [batches, clients] = await Promise.all([
-    prisma.batch.findMany({
-      where: { userId },
-      orderBy: { updatedAt: "desc" },
-      take: 5
-    }),
-    prisma.client.findMany({
-      where: { userId },
-      orderBy: { updatedAt: "desc" },
-      take: 8
-    })
-  ]);
-
-  return (
-    <main style={{ display: "grid", gap: 24 }}>
-      <div
-        className="card"
-        style={{ display: "flex", justifyContent: "space-between", gap: 16 }}
-      >
-        <div>
-          <h1 style={{ margin: 0 }}>Dashboard</h1>
-          <p style={{ margin: "6px 0 0", color: "#64748b" }}>
-            Signed in as {session?.user?.email}
-          </p>
-        </div>
-        <div className="btn-row">
-          <Link className="btn" href="/wizard">
-            Open Wizard
-          </Link>
-          <form action={createNewBatch}>
-            <button className="btn secondary" type="submit">
-              Create New Batch
-            </button>
-          </form>
-          <SignOutButton />
-        </div>
-      </div>
-
-      <div className="card" style={{ display: "grid", gap: 16 }}>
-        <div>
-          <h2 style={{ margin: 0 }}>Recent batches</h2>
-          <p style={{ marginTop: 6, color: "#64748b" }}>
-            Track the latest batch activity and jump back into the wizard.
-          </p>
-        </div>
-        {batches.length ? (
-          <table className="table">
-            <thead>
-              <tr>
-                <th>Batch name</th>
-                <th>Last updated</th>
-              </tr>
-            </thead>
-            <tbody>
-              {batches.map((batch) => (
-                <tr key={batch.id}>
-                  <td>{batch.name}</td>
-                  <td>{batch.updatedAt.toLocaleString()}</td>
-                </tr>
-              ))}
-            </tbody>
-          </table>
-        ) : (
-          <p style={{ color: "#64748b" }}>
-            No batches yet. Create one to start saving wizard sessions.
-          </p>
-        )}
-      </div>
-
-      <div className="card" style={{ display: "grid", gap: 16 }}>
-        <div>
-          <h2 style={{ margin: 0 }}>Clients</h2>
-          <p style={{ marginTop: 6, color: "#64748b" }}>
-            Recently edited clients synced from your wizard runs.
-          </p>
-        </div>
-        {clients.length ? (
-          <table className="table">
-            <thead>
-              <tr>
-                <th>Client</th>
-                <th>Entity type</th>
-              </tr>
-            </thead>
-            <tbody>
-              {clients.map((client) => (
-                <tr key={client.id}>
-                  <td>{client.name || client.addresseeName || "Unnamed"}</td>
-                  <td>
-                    <span className="pill">{client.entityType || "Unknown"}</span>
-                  </td>
-                </tr>
-              ))}
-            </tbody>
-          </table>
-        ) : (
-          <p style={{ color: "#64748b" }}>
-            Clients will appear here after you save runs in the wizard.
-          </p>
-        )}
-      </div>
-    </main>
-  );
-}
diff --git a/app/login/LoginForm.tsx b/app/login/LoginForm.tsx
deleted file mode 100644
index b1d206c..0000000
--- a/app/login/LoginForm.tsx
+++ /dev/null
@@ -1,65 +0,0 @@
-"use client";
-
-import { signIn } from "next-auth/react";
-import { useRouter, useSearchParams } from "next/navigation";
-import { useState } from "react";
-
-export function LoginForm() {
-  const router = useRouter();
-  const searchParams = useSearchParams();
-  const next = searchParams.get("next") || "/app";
-  const [email, setEmail] = useState("");
-  const [password, setPassword] = useState("");
-  const [error, setError] = useState<string | null>(null);
-  const [loading, setLoading] = useState(false);
-
-  async function handleSubmit(event: React.FormEvent) {
-    event.preventDefault();
-    setLoading(true);
-    setError(null);
-
-    const result = await signIn("credentials", {
-      redirect: false,
-      email,
-      password,
-      callbackUrl: next
-    });
-
-    setLoading(false);
-
-    if (result?.error) {
-      setError("Invalid email or password.");
-      return;
-    }
-
-    router.push(next);
-  }
-
-  return (
-    <form onSubmit={handleSubmit} className="card">
-      <h1 style={{ marginTop: 0 }}>Log in</h1>
-      <label>
-        Email
-        <input
-          type="email"
-          required
-          value={email}
-          onChange={(event) => setEmail(event.target.value)}
-        />
-      </label>
-      <label>
-        Password
-        <input
-          type="password"
-          required
-          value={password}
-          onChange={(event) => setPassword(event.target.value)}
-        />
-      </label>
-      {error ? <p style={{ color: "#dc2626" }}>{error}</p> : null}
-      <button className="btn" type="submit" disabled={loading}>
-        {loading ? "Signing in..." : "Sign in"}
-      </button>
-    </form>
-  );
-}
diff --git a/app/login/page.tsx b/app/login/page.tsx
deleted file mode 100644
index 6e9a187..0000000
--- a/app/login/page.tsx
+++ /dev/null
@@ -1,16 +0,0 @@
-import Link from "next/link";
-import { Suspense } from "react";
-import { LoginForm } from "./LoginForm";
-
-export default function LoginPage() {
-  return (
-    <main style={{ display: "grid", gap: 24 }}>
-      <Suspense fallback={null}>
-        <LoginForm />
-      </Suspense>
-      <p style={{ textAlign: "center", color: "#64748b" }}>
-        Need an account? <Link href="/register">Create one</Link>
-      </p>
-    </main>
-  );
-}
diff --git a/app/page.tsx b/app/page.tsx
deleted file mode 100644
index 23c4f43..0000000
--- a/app/page.tsx
+++ /dev/null
@@ -1,25 +0,0 @@
-import Link from "next/link";
-
-export default function HomePage() {
-  return (
-    <main>
-      <div className="card" style={{ display: "grid", gap: 24 }}>
-        <div>
-          <h1 style={{ margin: 0, fontSize: 32 }}>Tax Payment Wizard</h1>
-          <p style={{ color: "#475569", marginTop: 12 }}>
-            A secure workspace for accountants to build payment schedules, generate
-            client drafts, and collaborate across batches.
-          </p>
-        </div>
-        <div className="btn-row">
-          <Link className="btn" href="/login">
-            Log in
-          </Link>
-          <Link className="btn secondary" href="/register">
-            Create account
-          </Link>
-        </div>
-      </div>
-    </main>
-  );
-}
diff --git a/app/register/RegisterForm.tsx b/app/register/RegisterForm.tsx
deleted file mode 100644
index 911cd6b..0000000
--- a/app/register/RegisterForm.tsx
+++ /dev/null
@@ -1,71 +0,0 @@
-"use client";
-
-import { signIn } from "next-auth/react";
-import { useRouter } from "next/navigation";
-import { useState } from "react";
-
-export function RegisterForm() {
-  const router = useRouter();
-  const [email, setEmail] = useState("");
-  const [password, setPassword] = useState("");
-  const [error, setError] = useState<string | null>(null);
-  const [loading, setLoading] = useState(false);
-
-  async function handleSubmit(event: React.FormEvent) {
-    event.preventDefault();
-    setLoading(true);
-    setError(null);
-
-    const resp = await fetch("/api/register", {
-      method: "POST",
-      headers: { "Content-Type": "application/json" },
-      body: JSON.stringify({ email, password })
-    });
-
-    if (!resp.ok) {
-      const data = await resp.json().catch(() => ({}));
-      setError(data?.error || "Unable to create account.");
-      setLoading(false);
-      return;
-    }
-
-    await signIn("credentials", {
-      redirect: false,
-      email,
-      password,
-      callbackUrl: "/app"
-    });
-
-    setLoading(false);
-    router.push("/app");
-  }
-
-  return (
-    <form onSubmit={handleSubmit} className="card">
-      <h1 style={{ marginTop: 0 }}>Create account</h1>
-      <label>
-        Email
-        <input
-          type="email"
-          required
-          value={email}
-          onChange={(event) => setEmail(event.target.value)}
-        />
-      </label>
-      <label>
-        Password
-        <input
-          type="password"
-          required
-          minLength={8}
-          value={password}
-          onChange={(event) => setPassword(event.target.value)}
-        />
-      </label>
-      {error ? <p style={{ color: "#dc2626" }}>{error}</p> : null}
-      <button className="btn" type="submit" disabled={loading}>
-        {loading ? "Creating..." : "Create account"}
-      </button>
-    </form>
-  );
-}
diff --git a/app/register/page.tsx b/app/register/page.tsx
deleted file mode 100644
index 067737e..0000000
--- a/app/register/page.tsx
+++ /dev/null
@@ -1,13 +0,0 @@
-import Link from "next/link";
-import { RegisterForm } from "./RegisterForm";
-
-export default function RegisterPage() {
-  return (
-    <main style={{ display: "grid", gap: 24 }}>
-      <RegisterForm />
-      <p style={{ textAlign: "center", color: "#64748b" }}>
-        Already have an account? <Link href="/login">Log in</Link>
-      </p>
-    </main>
-  );
-}
diff --git a/app/wizard/page.tsx b/app/wizard/page.tsx
deleted file mode 100644
index 2073948..0000000
--- a/app/wizard/page.tsx
+++ /dev/null
@@ -1,14 +0,0 @@
-import { redirect } from "next/navigation";
-import { getServerAuthSession } from "@/lib/auth";
-
-export const dynamic = "force-dynamic";
-
-export default async function WizardPage() {
-  const session = await getServerAuthSession();
-
-  if (!session?.user?.id) {
-    redirect("/login?next=/wizard");
-  }
-
-  redirect("/tax_payment_wizard_new.html");
-}
diff --git a/app/(app)/AppNav.tsx b/app/(app)/AppNav.tsx
new file mode 100644
index 0000000..29cbc2c
--- /dev/null
+++ b/app/(app)/AppNav.tsx
@@ -0,0 +1,45 @@
+"use client";
+
+import Link from "next/link";
+import { usePathname } from "next/navigation";
+import { Button } from "@/components/ui/button";
+import { cn } from "@/lib/utils";
+
+const NAV_ITEMS = [
+  { href: "/app", label: "Dashboard" },
+  { href: "/app/payments", label: "Payments" },
+  { href: "/wizard", label: "Wizard" }
+];
+
+export function AppNav() {
+  const pathname = usePathname();
+
+  return (
+    <nav className="hidden items-center gap-1 sm:flex">
+      {NAV_ITEMS.map((item) => {
+        const isActive =
+          item.href === "/app"
+            ? pathname === "/app"
+            : item.href === "/wizard"
+              ? pathname === "/wizard"
+              : pathname.startsWith(item.href);
+
+        return (
+          <Button
+            key={item.href}
+            asChild
+            variant="ghost"
+            size="sm"
+            className={cn(
+              "text-muted-foreground hover:text-foreground",
+              isActive && "bg-muted text-foreground hover:bg-muted"
+            )}
+          >
+            <Link href={item.href}>{item.label}</Link>
+          </Button>
+        );
+      })}
+    </nav>
+  );
+}
+

diff --git a/app/(app)/app/SignOutButton.tsx b/app/(app)/app/SignOutButton.tsx
new file mode 100644
index 0000000..f081dd6
--- /dev/null
+++ b/app/(app)/app/SignOutButton.tsx
@@ -0,0 +1,12 @@
+"use client";
+
+import { signOut } from "next-auth/react";
+import { Button } from "@/components/ui/button";
+
+export function SignOutButton() {
+  return (
+    <Button variant="outline" type="button" onClick={() => signOut()}>
+      Sign out
+    </Button>
+  );
+}

diff --git a/app/(app)/app/actions.ts b/app/(app)/app/actions.ts
new file mode 100644
index 0000000..acf9ef5
--- /dev/null
+++ b/app/(app)/app/actions.ts
@@ -0,0 +1,25 @@
+"use server";
+
+import { redirect } from "next/navigation";
+import { getServerAuthSession } from "@/lib/auth";
+import { prisma } from "@/lib/prisma";
+import { createEmptySession } from "@/lib/wizard-session";
+
+export async function createNewBatch() {
+  const session = await getServerAuthSession();
+  const userId = session?.user?.id;
+  if (!userId) {
+    redirect("/login");
+  }
+
+  const snapshot = createEmptySession();
+  await prisma.batch.create({
+    data: {
+      userId,
+      name: `New Batch ${new Date().toLocaleDateString()}`,
+      snapshotJson: snapshot
+    }
+  });
+
+  redirect("/wizard");
+}

diff --git a/app/(app)/app/page.tsx b/app/(app)/app/page.tsx
new file mode 100644
index 0000000..4ce4c31
--- /dev/null
+++ b/app/(app)/app/page.tsx
@@ -0,0 +1,143 @@
+import Link from "next/link";
+import { redirect } from "next/navigation";
+import { getServerAuthSession } from "@/lib/auth";
+import { prisma } from "@/lib/prisma";
+import { createNewBatch } from "./actions";
+import { Badge } from "@/components/ui/badge";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
+import { Separator } from "@/components/ui/separator";
+import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from "@/components/ui/table";
+
+export const dynamic = "force-dynamic";
+
+export default async function AppPage() {
+  const session = await getServerAuthSession();
+  const userId = session?.user?.id;
+
+  if (!userId) {
+    redirect("/login?next=/app");
+  }
+
+  const [batches, clients] = await Promise.all([
+    prisma.batch.findMany({
+      where: { userId },
+      orderBy: { updatedAt: "desc" },
+      take: 5
+    }),
+    prisma.client.findMany({
+      where: { userId },
+      orderBy: { updatedAt: "desc" },
+      take: 8
+    })
+  ]);
+
+  return (
+    <div className="grid gap-8">
+      <Card className="relative overflow-hidden bg-card/70 backdrop-blur">
+        <div
+          aria-hidden
+          className="absolute inset-0 bg-[radial-gradient(70%_60%_at_10%_0%,hsl(var(--primary)_/_0.18),transparent_70%)]"
+        />
+        <CardHeader className="relative space-y-0">
+          <div className="flex flex-col gap-5 sm:flex-row sm:items-end sm:justify-between">
+            <div className="space-y-2">
+              <p className="text-xs font-medium uppercase tracking-[0.18em] text-muted-foreground">
+                Dashboard
+              </p>
+              <CardTitle className="text-2xl sm:text-3xl">Welcome back</CardTitle>
+              <CardDescription>Signed in as {session?.user?.email}</CardDescription>
+            </div>
+            <div className="flex flex-wrap gap-2">
+              <Button asChild>
+                <Link href="/wizard">Open wizard</Link>
+              </Button>
+              <Button asChild variant="outline">
+                <Link href="/app/payments">View payments</Link>
+              </Button>
+              <form action={createNewBatch}>
+                <Button variant="secondary" type="submit">
+                  New batch
+                </Button>
+              </form>
+            </div>
+          </div>
+        </CardHeader>
+      </Card>
+
+      <div className="grid gap-6 lg:grid-cols-2">
+        <Card className="overflow-hidden">
+          <CardHeader>
+            <CardTitle>Recent batches</CardTitle>
+            <CardDescription>Track the latest batch activity and jump back into the wizard.</CardDescription>
+          </CardHeader>
+          <Separator />
+          <CardContent className="p-0">
+            {batches.length ? (
+              <Table>
+                <TableHeader>
+                  <TableRow>
+                    <TableHead>Batch name</TableHead>
+                    <TableHead className="w-[200px]">Last updated</TableHead>
+                  </TableRow>
+                </TableHeader>
+                <TableBody>
+                  {batches.map((batch) => (
+                    <TableRow key={batch.id}>
+                      <TableCell className="font-medium">{batch.name}</TableCell>
+                      <TableCell className="text-muted-foreground">{batch.updatedAt.toLocaleString()}</TableCell>
+                    </TableRow>
+                  ))}
+                </TableBody>
+              </Table>
+            ) : (
+              <div className="p-10">
+                <div className="rounded-2xl border border-dashed bg-muted/20 p-10 text-center text-sm text-muted-foreground">
+                  No batches yet. Create one to start saving wizard sessions.
+                </div>
+              </div>
+            )}
+          </CardContent>
+        </Card>
+
+        <Card className="overflow-hidden">
+          <CardHeader>
+            <CardTitle>Clients</CardTitle>
+            <CardDescription>Recently edited clients synced from your wizard runs.</CardDescription>
+          </CardHeader>
+          <Separator />
+          <CardContent className="p-0">
+            {clients.length ? (
+              <Table>
+                <TableHeader>
+                  <TableRow>
+                    <TableHead>Client</TableHead>
+                    <TableHead className="w-[180px]">Entity type</TableHead>
+                  </TableRow>
+                </TableHeader>
+                <TableBody>
+                  {clients.map((client) => (
+                    <TableRow key={client.id}>
+                      <TableCell className="font-medium">
+                        {client.name || client.addresseeName || "Unnamed"}
+                      </TableCell>
+                      <TableCell>
+                        <Badge variant="secondary">{client.entityType || "Unknown"}</Badge>
+                      </TableCell>
+                    </TableRow>
+                  ))}
+                </TableBody>
+              </Table>
+            ) : (
+              <div className="p-10">
+                <div className="rounded-2xl border border-dashed bg-muted/20 p-10 text-center text-sm text-muted-foreground">
+                  Clients will appear here after you save runs in the wizard.
+                </div>
+              </div>
+            )}
+          </CardContent>
+        </Card>
+      </div>
+    </div>
+  );
+}

diff --git a/app/(app)/app/payments/BulkChecklistActions.tsx b/app/(app)/app/payments/BulkChecklistActions.tsx
new file mode 100644
index 0000000..f548354
--- /dev/null
+++ b/app/(app)/app/payments/BulkChecklistActions.tsx
@@ -0,0 +1,170 @@
+"use client";
+
+import { useMemo, useState } from "react";
+import { Badge } from "@/components/ui/badge";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
+import { Separator } from "@/components/ui/separator";
+import { Textarea } from "@/components/ui/textarea";
+
+type RunSummary = {
+  runId: string;
+  clientLabel: string;
+};
+
+type LinkResult = RunSummary & {
+  portalUrl?: string;
+  error?: string;
+};
+
+export function BulkChecklistActions({ runs }: { runs: RunSummary[] }) {
+  const [results, setResults] = useState<LinkResult[]>([]);
+  const [loading, setLoading] = useState(false);
+  const [completed, setCompleted] = useState(0);
+  const [copySuccess, setCopySuccess] = useState(false);
+  const [error, setError] = useState<string | null>(null);
+
+  const successLinks = useMemo(
+    () => results.filter((result) => result.portalUrl),
+    [results]
+  );
+  const progressPercent = runs.length ? Math.min((completed / runs.length) * 100, 100) : 0;
+
+  async function generateAll() {
+    if (!runs.length || loading) return;
+    setLoading(true);
+    setCompleted(0);
+    setResults([]);
+    setCopySuccess(false);
+    setError(null);
+
+    const generated = await Promise.all(
+      runs.map(async (run) => {
+        try {
+          const response = await fetch("/api/plans/publish-by-run", {
+            method: "POST",
+            headers: { "Content-Type": "application/json" },
+            body: JSON.stringify({ runId: run.runId })
+          });
+
+          if (!response.ok) {
+            const payload = await response.json().catch(() => ({}));
+            throw new Error(payload?.error || "Unable to generate link.");
+          }
+
+          const payload = await response.json().catch(() => ({}));
+          if (!payload?.portalUrl) {
+            throw new Error("Missing portal URL.");
+          }
+
+          return { ...run, portalUrl: payload.portalUrl };
+        } catch (err) {
+          return {
+            ...run,
+            error: err instanceof Error ? err.message : "Unable to generate link."
+          };
+        } finally {
+          setCompleted((prev) => prev + 1);
+        }
+      })
+    );
+
+    setResults(generated);
+    setLoading(false);
+  }
+
+  async function copyAll() {
+    if (!successLinks.length) {
+      setError("No links to copy yet.");
+      return;
+    }
+    const payload = successLinks.map((result) => result.portalUrl).join("\n");
+    try {
+      await navigator.clipboard.writeText(payload);
+      setCopySuccess(true);
+      setTimeout(() => setCopySuccess(false), 2000);
+    } catch {
+      setError("Copy failed. Please copy manually.");
+    }
+  }
+
+  return (
+    <Card className="bg-card/70 backdrop-blur">
+      <CardHeader>
+        <div className="flex flex-wrap items-start justify-between gap-3">
+          <div className="space-y-1">
+            <CardTitle>Checklist links</CardTitle>
+            <CardDescription>Generate portal links for the rows currently in view.</CardDescription>
+          </div>
+          <div className="flex flex-wrap gap-2">
+            <Badge variant="secondary" className="bg-secondary/70">
+              {runs.length} run{runs.length === 1 ? "" : "s"}
+            </Badge>
+            {results.length ? (
+              <Badge variant="secondary" className="bg-secondary/70">
+                {successLinks.length} success
+              </Badge>
+            ) : null}
+          </div>
+        </div>
+      </CardHeader>
+      <Separator />
+      <CardContent className="grid gap-4 pt-6">
+        <div className="flex flex-wrap items-center gap-3">
+          <Button type="button" onClick={generateAll} disabled={loading || !runs.length}>
+            {loading ? `Generating ${completed}/${runs.length}` : "Generate links"}
+          </Button>
+          <Button
+            variant="outline"
+            type="button"
+            onClick={copyAll}
+            disabled={!successLinks.length}
+          >
+            {copySuccess ? "Copied!" : "Copy all"}
+          </Button>
+          <span className="text-sm text-muted-foreground">
+            {runs.length
+              ? `${runs.length} client${runs.length === 1 ? "" : "s"} in view`
+              : "No rows to generate"}
+          </span>
+        </div>
+
+        {loading ? (
+          <div className="grid gap-2">
+            <div className="h-2 overflow-hidden rounded-full bg-muted">
+              <div className="h-full bg-primary transition-all" style={{ width: `${progressPercent}%` }} />
+            </div>
+            <p className="text-xs text-muted-foreground">
+              Generating links… {completed}/{runs.length}
+            </p>
+          </div>
+        ) : null}
+
+        {results.length > 0 ? (
+          <Textarea
+            rows={Math.min(10, Math.max(3, results.length))}
+            readOnly
+            value={results
+              .map((result) =>
+                result.portalUrl
+                  ? `${result.clientLabel}: ${result.portalUrl}`
+                  : `${result.clientLabel}: ${result.error || "Failed"}`
+              )
+              .join("\n")}
+            className="bg-background font-mono text-xs"
+          />
+        ) : (
+          <div className="rounded-2xl border border-dashed bg-muted/15 p-6 text-sm text-muted-foreground">
+            Generate links, then copy them into an email or your task system.
+          </div>
+        )}
+
+        {error ? (
+          <div className="rounded-md border border-destructive/20 bg-destructive/10 px-3 py-2 text-sm text-destructive">
+            {error}
+          </div>
+        ) : null}
+      </CardContent>
+    </Card>
+  );
+}

diff --git a/app/(app)/app/payments/PortalLinkActions.tsx b/app/(app)/app/payments/PortalLinkActions.tsx
new file mode 100644
index 0000000..1da5ffc
--- /dev/null
+++ b/app/(app)/app/payments/PortalLinkActions.tsx
@@ -0,0 +1,112 @@
+"use client";
+
+import { useRef, useState } from "react";
+import { Button } from "@/components/ui/button";
+import { Input } from "@/components/ui/input";
+import { Label } from "@/components/ui/label";
+
+type PortalLinkActionsProps = {
+  runId: string;
+  clientLabel: string;
+};
+
+export function PortalLinkActions({ runId, clientLabel }: PortalLinkActionsProps) {
+  const [portalUrl, setPortalUrl] = useState<string | null>(null);
+  const [loading, setLoading] = useState(false);
+  const [error, setError] = useState<string | null>(null);
+  const [copySuccess, setCopySuccess] = useState(false);
+  const [autoOpen, setAutoOpen] = useState(false);
+  const copyTimerRef = useRef<ReturnType<typeof setTimeout> | null>(null);
+
+  async function generateLink() {
+    setLoading(true);
+    setError(null);
+    try {
+      const response = await fetch("/api/plans/publish-by-run", {
+        method: "POST",
+        headers: { "Content-Type": "application/json" },
+        body: JSON.stringify({ runId })
+      });
+
+      if (!response.ok) {
+        const payload = await response.json().catch(() => ({}));
+        throw new Error(payload?.error || "Unable to generate link.");
+      }
+
+      const payload = await response.json().catch(() => ({}));
+      if (!payload?.portalUrl) {
+        throw new Error("Missing portal URL.");
+      }
+
+      setPortalUrl(payload.portalUrl);
+      if (autoOpen) {
+        window.open(payload.portalUrl, "_blank", "noopener,noreferrer");
+      }
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Unable to generate link.");
+    } finally {
+      setLoading(false);
+    }
+  }
+
+  async function copyLink() {
+    if (!portalUrl) return;
+    try {
+      await navigator.clipboard.writeText(portalUrl);
+      setCopySuccess(true);
+      if (copyTimerRef.current) {
+        clearTimeout(copyTimerRef.current);
+      }
+      copyTimerRef.current = setTimeout(() => {
+        setCopySuccess(false);
+      }, 2000);
+    } catch {
+      setError("Copy failed. Please copy the link manually.");
+    }
+  }
+
+  return (
+    <div className="grid gap-2">
+      <div className="flex flex-wrap items-center gap-2">
+        <Button variant="outline" size="sm" type="button" onClick={generateLink} disabled={loading}>
+          {loading ? "Generating..." : portalUrl ? "Regenerate" : "Generate"}
+        </Button>
+        <Button size="sm" type="button" onClick={copyLink} disabled={!portalUrl}>
+          {copySuccess ? "Copied" : "Copy"}
+        </Button>
+        {portalUrl ? (
+          <Button asChild size="sm" variant="secondary">
+            <a href={portalUrl} target="_blank" rel="noreferrer">
+              Open
+            </a>
+          </Button>
+        ) : null}
+      </div>
+
+      {portalUrl ? (
+        <Input type="text" readOnly value={portalUrl} className="h-9 text-xs" />
+      ) : (
+        <p className="text-xs text-muted-foreground">Generate a checklist link for {clientLabel}.</p>
+      )}
+
+      <div className="flex items-center gap-2">
+        <input
+          id={`auto-open-${runId}`}
+          type="checkbox"
+          checked={autoOpen}
+          onChange={(event) => setAutoOpen(event.target.checked)}
+          className="h-4 w-4 rounded border-input text-primary accent-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 ring-offset-background"
+        />
+        <Label htmlFor={`auto-open-${runId}`} className="text-xs font-normal text-muted-foreground">
+          Auto-open after generate
+        </Label>
+      </div>
+
+      {error ? (
+        <div className="rounded-md border border-destructive/20 bg-destructive/10 px-2.5 py-2 text-xs text-destructive">
+          {error}
+        </div>
+      ) : null}
+    </div>
+  );
+}

diff --git a/app/(app)/app/payments/page.tsx b/app/(app)/app/payments/page.tsx
new file mode 100644
index 0000000..bf33dd1
--- /dev/null
+++ b/app/(app)/app/payments/page.tsx
@@ -0,0 +1,281 @@
+import { redirect } from "next/navigation";
+import { getServerAuthSession } from "@/lib/auth";
+import { prisma } from "@/lib/prisma";
+import { PortalLinkActions } from "./PortalLinkActions";
+import { BulkChecklistActions } from "./BulkChecklistActions";
+import { Badge } from "@/components/ui/badge";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
+import { Label } from "@/components/ui/label";
+import { Select } from "@/components/ui/select";
+import { Separator } from "@/components/ui/separator";
+import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from "@/components/ui/table";
+import { PaymentTaskStatus } from "@prisma/client";
+
+export const dynamic = "force-dynamic";
+
+const STATUS_OPTIONS: PaymentTaskStatus[] = [
+  PaymentTaskStatus.DRAFT,
+  PaymentTaskStatus.SENT,
+  PaymentTaskStatus.VIEWED,
+  PaymentTaskStatus.CONFIRMED,
+  PaymentTaskStatus.VERIFIED,
+  PaymentTaskStatus.OVERDUE,
+  PaymentTaskStatus.CANCELLED
+];
+
+function isPaymentStatus(value: string): value is PaymentTaskStatus {
+  return STATUS_OPTIONS.includes(value as PaymentTaskStatus);
+}
+
+function formatCurrency(amount: number | null) {
+  if (!amount) return "—";
+  return new Intl.NumberFormat("en-US", { style: "currency", currency: "USD" }).format(amount);
+}
+
+function statusBadge(status: string) {
+  switch (status) {
+    case "CONFIRMED":
+    case "VERIFIED":
+      return <Badge variant="success">{status}</Badge>;
+    case "VIEWED":
+      return <Badge variant="info">{status}</Badge>;
+    case "OVERDUE":
+      return <Badge variant="destructive">{status}</Badge>;
+    case "CANCELLED":
+      return (
+        <Badge variant="outline" className="text-muted-foreground">
+          {status}
+        </Badge>
+      );
+    case "DRAFT":
+    case "SENT":
+    default:
+      return <Badge variant="secondary">{status}</Badge>;
+  }
+}
+
+export default async function PaymentsPage({
+  searchParams
+}: {
+  searchParams?: Record<string, string | string[] | undefined>;
+}) {
+  const session = await getServerAuthSession();
+  const userId = session?.user?.id;
+
+  if (!userId) {
+    redirect("/login?next=/app/payments");
+  }
+
+  const rangeParam = Array.isArray(searchParams?.range) ? searchParams?.range[0] : searchParams?.range;
+  const statusParam = Array.isArray(searchParams?.status) ? searchParams?.status[0] : searchParams?.status;
+  const rangeDays = Math.max(Number(rangeParam || 30), 1);
+  const statusFilter = statusParam && isPaymentStatus(statusParam) ? statusParam : undefined;
+
+  const endDate = new Date();
+  endDate.setDate(endDate.getDate() + rangeDays);
+
+  const payments = await prisma.payment.findMany({
+    where: {
+      userId,
+      dueDate: { lte: endDate },
+      ...(statusFilter ? { status: statusFilter } : {})
+    },
+    include: {
+      run: {
+        include: {
+          client: true
+        }
+      }
+    },
+    orderBy: [{ dueDate: "asc" }, { sortOrder: "asc" }]
+  });
+
+  const runSummaries = Array.from(
+    payments.reduce((map, payment) => {
+      if (!map.has(payment.runId)) {
+        map.set(payment.runId, {
+          runId: payment.runId,
+          clientLabel: payment.run.client?.name || payment.run.client?.addresseeName || "Client"
+        });
+      }
+      return map;
+    }, new Map<string, { runId: string; clientLabel: string }>())
+  ).map(([, value]) => value);
+
+  const totalPayments = payments.length;
+  const confirmedPayments = payments.filter((payment) =>
+    ["CONFIRMED", "VERIFIED"].includes(payment.status)
+  ).length;
+  const overduePayments = payments.filter((payment) => payment.status === "OVERDUE").length;
+  const dueSoonPayments = payments.filter((payment) => {
+    if (!payment.dueDate) return false;
+    if (["CONFIRMED", "VERIFIED", "CANCELLED"].includes(payment.status)) return false;
+    const daysUntil = (payment.dueDate.getTime() - Date.now()) / (1000 * 60 * 60 * 24);
+    return daysUntil >= 0 && daysUntil <= 7;
+  }).length;
+  const totalAmount = payments.reduce(
+    (sum, payment) => sum + (payment.amount ? Number(payment.amount) : 0),
+    0
+  );
+
+  return (
+    <div className="grid gap-8">
+      <div className="flex flex-col gap-4 sm:flex-row sm:items-end sm:justify-between">
+        <div className="space-y-2">
+          <p className="text-xs font-medium uppercase tracking-[0.18em] text-muted-foreground">
+            Payments board
+          </p>
+          <h1 className="text-2xl font-semibold tracking-tight sm:text-3xl">Payments</h1>
+          <p className="text-sm text-muted-foreground">
+            Filter upcoming estimated payments and publish client checklist links in bulk.
+          </p>
+        </div>
+        <div className="flex flex-wrap gap-2">
+          <Badge variant="secondary" className="bg-secondary/70">
+            Due ≤ {rangeDays} days
+          </Badge>
+          <Badge variant="secondary" className="bg-secondary/70">
+            {statusFilter ? `Status: ${statusFilter}` : "All statuses"}
+          </Badge>
+        </div>
+      </div>
+
+      <div className="grid gap-4 sm:grid-cols-2 lg:grid-cols-4">
+        <Card className="bg-card/70 backdrop-blur">
+          <CardHeader className="pb-3">
+            <CardDescription>Payments in view</CardDescription>
+            <CardTitle className="text-2xl tabular-nums">{totalPayments}</CardTitle>
+          </CardHeader>
+        </Card>
+        <Card className="bg-card/70 backdrop-blur">
+          <CardHeader className="pb-3">
+            <CardDescription>Due soon (7 days)</CardDescription>
+            <CardTitle className="text-2xl tabular-nums">{dueSoonPayments}</CardTitle>
+          </CardHeader>
+        </Card>
+        <Card className="bg-card/70 backdrop-blur">
+          <CardHeader className="pb-3">
+            <CardDescription>Overdue</CardDescription>
+            <CardTitle className="text-2xl tabular-nums">{overduePayments}</CardTitle>
+          </CardHeader>
+        </Card>
+        <Card className="bg-card/70 backdrop-blur">
+          <CardHeader className="pb-3">
+            <CardDescription>Total amount</CardDescription>
+            <CardTitle className="text-2xl tabular-nums">{formatCurrency(totalAmount)}</CardTitle>
+          </CardHeader>
+        </Card>
+      </div>
+
+      <div className="grid gap-6 lg:grid-cols-[1.05fr_0.95fr] lg:items-start">
+        <Card className="bg-card/70 backdrop-blur">
+          <CardHeader>
+            <CardTitle>Filters</CardTitle>
+            <CardDescription>Control the rows shown in the board.</CardDescription>
+          </CardHeader>
+          <Separator />
+          <CardContent className="pt-6">
+            <form method="get" className="grid gap-4 sm:grid-cols-[1fr_1fr_auto] sm:items-end">
+              <div className="grid gap-2">
+                <Label htmlFor="range">Due in (days)</Label>
+                <Select id="range" name="range" defaultValue={String(rangeDays)}>
+                  <option value="7">7</option>
+                  <option value="14">14</option>
+                  <option value="30">30</option>
+                  <option value="90">90</option>
+                </Select>
+              </div>
+              <div className="grid gap-2">
+                <Label htmlFor="status">Status</Label>
+                <Select id="status" name="status" defaultValue={statusFilter}>
+                  <option value="">All</option>
+                  {STATUS_OPTIONS.map((status) => (
+                    <option key={status} value={status}>
+                      {status}
+                    </option>
+                  ))}
+                </Select>
+              </div>
+              <Button type="submit">Apply filters</Button>
+            </form>
+          </CardContent>
+        </Card>
+
+        <BulkChecklistActions runs={runSummaries} />
+      </div>
+
+      <Card className="overflow-hidden">
+        <CardHeader className="flex flex-row flex-wrap items-center justify-between gap-3">
+          <div>
+            <CardTitle>Payments</CardTitle>
+            <CardDescription>
+              {confirmedPayments} confirmed • {Math.max(totalPayments - confirmedPayments, 0)} remaining
+            </CardDescription>
+          </div>
+          <Badge variant="secondary" className="bg-secondary/70">
+            {totalPayments} rows
+          </Badge>
+        </CardHeader>
+        <Separator />
+        <CardContent className="p-0">
+          {payments.length ? (
+            <Table>
+              <TableHeader className="bg-card/60 backdrop-blur supports-[backdrop-filter]:bg-card/40">
+                <TableRow>
+                  <TableHead className="sticky top-0 bg-background/90 backdrop-blur">Due date</TableHead>
+                  <TableHead className="sticky top-0 bg-background/90 backdrop-blur">Client</TableHead>
+                  <TableHead className="sticky top-0 bg-background/90 backdrop-blur">Scope</TableHead>
+                  <TableHead className="sticky top-0 bg-background/90 backdrop-blur text-right">Amount</TableHead>
+                  <TableHead className="sticky top-0 bg-background/90 backdrop-blur">Status</TableHead>
+                  <TableHead className="sticky top-0 bg-background/90 backdrop-blur">Confirmed</TableHead>
+                  <TableHead className="sticky top-0 bg-background/90 backdrop-blur">Checklist</TableHead>
+                </TableRow>
+              </TableHeader>
+              <TableBody>
+                {payments.map((payment) => (
+                  <TableRow key={payment.id} className="odd:bg-muted/20">
+                    <TableCell className="whitespace-nowrap font-medium">
+                      {payment.dueDate ? payment.dueDate.toLocaleDateString() : "—"}
+                    </TableCell>
+                    <TableCell>
+                      {payment.run.client?.name || payment.run.client?.addresseeName || "Client"}
+                    </TableCell>
+                    <TableCell className="whitespace-nowrap">
+                      {payment.scope}
+                      {payment.stateCode ? ` (${payment.stateCode})` : ""}
+                    </TableCell>
+                    <TableCell className="whitespace-nowrap text-right tabular-nums">
+                      {formatCurrency(payment.amount ? Number(payment.amount) : null)}
+                    </TableCell>
+                    <TableCell>{statusBadge(payment.status)}</TableCell>
+                    <TableCell className="whitespace-nowrap text-muted-foreground">
+                      {payment.confirmedAt ? payment.confirmedAt.toLocaleDateString() : "—"}
+                    </TableCell>
+                    <TableCell className="min-w-[280px]">
+                      <PortalLinkActions
+                        runId={payment.runId}
+                        clientLabel={
+                          payment.run.client?.name || payment.run.client?.addresseeName || "Client"
+                        }
+                      />
+                    </TableCell>
+                  </TableRow>
+                ))}
+              </TableBody>
+            </Table>
+          ) : (
+            <div className="p-10">
+              <div className="rounded-2xl border border-dashed bg-muted/20 p-10 text-center">
+                <p className="text-sm font-medium">No payments found</p>
+                <p className="mt-2 text-sm text-muted-foreground">
+                  No payments match the selected filters yet.
+                </p>
+              </div>
+            </div>
+          )}
+        </CardContent>
+      </Card>
+    </div>
+  );
+}

diff --git a/app/(app)/layout.tsx b/app/(app)/layout.tsx
new file mode 100644
index 0000000..dab5ce1
--- /dev/null
+++ b/app/(app)/layout.tsx
@@ -0,0 +1,37 @@
+import type { ReactNode } from "react";
+import Link from "next/link";
+import { getServerAuthSession } from "@/lib/auth";
+import { SignOutButton } from "./app/SignOutButton";
+import { AppNav } from "./AppNav";
+
+export default async function AppLayout({ children }: { children: ReactNode }) {
+  const session = await getServerAuthSession();
+
+  return (
+    <div className="min-h-screen bg-gradient-to-b from-background to-muted/30">
+      <header className="sticky top-0 z-50 border-b bg-background/80 backdrop-blur">
+        <div className="mx-auto flex max-w-6xl items-center justify-between px-4 py-3">
+          <div className="flex items-center gap-3">
+            <Link href="/app" className="flex items-center gap-2">
+              <div className="flex h-9 w-9 items-center justify-center rounded-2xl bg-primary text-primary-foreground shadow-soft">
+                <span className="text-xs font-semibold tracking-tight">TP</span>
+              </div>
+              <span className="hidden text-sm font-semibold sm:inline">Tax Payment Wizard</span>
+            </Link>
+
+            <AppNav />
+          </div>
+
+          <div className="flex items-center gap-3">
+            {session?.user?.email ? (
+              <span className="hidden text-sm text-muted-foreground md:inline">{session.user.email}</span>
+            ) : null}
+            <SignOutButton />
+          </div>
+        </div>
+      </header>
+
+      <main className="mx-auto w-full max-w-6xl px-4 py-8">{children}</main>
+    </div>
+  );
+}

diff --git a/app/(app)/wizard/page.tsx b/app/(app)/wizard/page.tsx
new file mode 100644
index 0000000..2073948
--- /dev/null
+++ b/app/(app)/wizard/page.tsx
@@ -0,0 +1,14 @@
+import { redirect } from "next/navigation";
+import { getServerAuthSession } from "@/lib/auth";
+
+export const dynamic = "force-dynamic";
+
+export default async function WizardPage() {
+  const session = await getServerAuthSession();
+
+  if (!session?.user?.id) {
+    redirect("/login?next=/wizard");
+  }
+
+  redirect("/tax_payment_wizard_new.html");
+}

diff --git a/app/(marketing)/layout.tsx b/app/(marketing)/layout.tsx
new file mode 100644
index 0000000..238b8ac
--- /dev/null
+++ b/app/(marketing)/layout.tsx
@@ -0,0 +1,69 @@
+import type { ReactNode } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+
+export default function MarketingLayout({ children }: { children: ReactNode }) {
+  return (
+    <div className="min-h-screen bg-background">
+      <div aria-hidden className="pointer-events-none fixed inset-0 -z-10">
+        <div className="absolute inset-x-0 top-[-220px] h-[520px] bg-[radial-gradient(60%_60%_at_50%_0%,hsl(var(--primary)_/_0.20),transparent_65%)]" />
+        <div className="absolute inset-0 opacity-30 [mask-image:radial-gradient(ellipse_at_top,black,transparent_70%)] bg-[linear-gradient(to_bottom,hsl(var(--foreground)_/_0.04)_1px,transparent_1px),linear-gradient(to_right,hsl(var(--foreground)_/_0.04)_1px,transparent_1px)] bg-[size:44px_44px]" />
+      </div>
+
+      <header className="sticky top-0 z-50 border-b bg-background/70 backdrop-blur">
+        <div className="mx-auto flex max-w-6xl items-center justify-between px-4 py-3">
+          <Link href="/" className="flex items-center gap-3">
+            <div className="flex h-10 w-10 items-center justify-center rounded-2xl bg-primary text-primary-foreground shadow-soft">
+              <span className="text-sm font-semibold tracking-tight">TP</span>
+            </div>
+            <div className="leading-tight">
+              <p className="text-sm font-semibold">Tax Payment Wizard</p>
+              <p className="text-xs text-muted-foreground">Schedules, drafts, confirmations</p>
+            </div>
+          </Link>
+
+          <nav className="hidden items-center gap-1 md:flex">
+            <Button asChild variant="ghost" size="sm">
+              <Link href="/#features">Features</Link>
+            </Button>
+            <Button asChild variant="ghost" size="sm">
+              <Link href="/#workflow">Workflow</Link>
+            </Button>
+            <Button asChild variant="ghost" size="sm">
+              <Link href="/#security">Security</Link>
+            </Button>
+          </nav>
+
+          <div className="flex items-center gap-2">
+            <Button asChild variant="ghost">
+              <Link href="/login">Log in</Link>
+            </Button>
+            <Button asChild>
+              <Link href="/register">Create account</Link>
+            </Button>
+          </div>
+        </div>
+      </header>
+
+      <main className="mx-auto w-full max-w-6xl px-4 py-10">{children}</main>
+
+      <footer className="border-t bg-background/60">
+        <div className="mx-auto flex max-w-6xl flex-col gap-3 px-4 py-8 text-sm text-muted-foreground sm:flex-row sm:items-center sm:justify-between">
+          <p>Built for calm, repeatable tax workflows.</p>
+          <div className="flex flex-wrap gap-x-4 gap-y-2">
+            <Link className="hover:text-foreground" href="/#security">
+              Security
+            </Link>
+            <Link className="hover:text-foreground" href="/#features">
+              Features
+            </Link>
+            <Link className="hover:text-foreground" href="/login">
+              Log in
+            </Link>
+          </div>
+        </div>
+      </footer>
+    </div>
+  );
+}
+

diff --git a/app/(marketing)/login/LoginForm.tsx b/app/(marketing)/login/LoginForm.tsx
new file mode 100644
index 0000000..5bdbd62
--- /dev/null
+++ b/app/(marketing)/login/LoginForm.tsx
@@ -0,0 +1,88 @@
+"use client";
+
+import { signIn } from "next-auth/react";
+import { useRouter, useSearchParams } from "next/navigation";
+import { useState } from "react";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
+import { Input } from "@/components/ui/input";
+import { Label } from "@/components/ui/label";
+
+export function LoginForm() {
+  const router = useRouter();
+  const searchParams = useSearchParams();
+  const next = searchParams.get("next") || "/app";
+  const [email, setEmail] = useState("");
+  const [password, setPassword] = useState("");
+  const [error, setError] = useState<string | null>(null);
+  const [loading, setLoading] = useState(false);
+
+  async function handleSubmit(event: React.FormEvent) {
+    event.preventDefault();
+    setLoading(true);
+    setError(null);
+
+    const result = await signIn("credentials", {
+      redirect: false,
+      email,
+      password,
+      callbackUrl: next
+    });
+
+    setLoading(false);
+
+    if (result?.error) {
+      setError("Invalid email or password.");
+      return;
+    }
+
+    router.push(next);
+  }
+
+  return (
+    <Card className="bg-card/80 shadow-soft backdrop-blur">
+      <CardHeader>
+        <CardTitle>Log in</CardTitle>
+        <CardDescription>Access your dashboard and payments board.</CardDescription>
+      </CardHeader>
+      <CardContent>
+        <form onSubmit={handleSubmit} className="grid gap-4">
+          <div className="grid gap-2">
+            <Label htmlFor="email">Email</Label>
+            <Input
+              id="email"
+              type="email"
+              autoComplete="email"
+              required
+              value={email}
+              onChange={(event) => setEmail(event.target.value)}
+              disabled={loading}
+            />
+          </div>
+          <div className="grid gap-2">
+            <Label htmlFor="password">Password</Label>
+            <Input
+              id="password"
+              type="password"
+              autoComplete="current-password"
+              required
+              value={password}
+              onChange={(event) => setPassword(event.target.value)}
+              disabled={loading}
+            />
+          </div>
+
+          {error ? (
+            <div className="rounded-md border border-destructive/20 bg-destructive/10 px-3 py-2 text-sm text-destructive">
+              {error}
+            </div>
+          ) : null}
+
+          <Button type="submit" disabled={loading} className="w-full">
+            {loading ? "Signing in..." : "Sign in"}
+          </Button>
+        </form>
+      </CardContent>
+    </Card>
+  );
+}

diff --git a/app/(marketing)/login/page.tsx b/app/(marketing)/login/page.tsx
new file mode 100644
index 0000000..98b0be8
--- /dev/null
+++ b/app/(marketing)/login/page.tsx
@@ -0,0 +1,56 @@
+import Link from "next/link";
+import { Suspense } from "react";
+import { LoginForm } from "./LoginForm";
+import { Badge } from "@/components/ui/badge";
+
+export default function LoginPage() {
+  return (
+    <div className="grid gap-10 lg:grid-cols-2 lg:items-center">
+      <div className="space-y-5">
+        <Badge variant="secondary" className="w-fit bg-secondary/70">
+          Welcome back
+        </Badge>
+        <div className="space-y-2">
+          <h1 className="text-3xl font-semibold tracking-tight sm:text-4xl">Sign in</h1>
+          <p className="text-muted-foreground">
+            Open your dashboard to manage batches, publish checklists, and track confirmations.
+          </p>
+        </div>
+
+        <div className="grid gap-3">
+          {[
+            {
+              title: "Payments board",
+              description: "Filter by due date and status with a clean, readable table."
+            },
+            {
+              title: "Client checklist portal",
+              description: "Generate a secure link clients can use to confirm payments."
+            },
+            {
+              title: "Consistent UI",
+              description: "Cards, forms, and tables that feel cohesive across the app."
+            }
+          ].map((item) => (
+            <div key={item.title} className="rounded-2xl border bg-card/60 p-4 backdrop-blur">
+              <p className="text-sm font-medium">{item.title}</p>
+              <p className="mt-1 text-sm text-muted-foreground">{item.description}</p>
+            </div>
+          ))}
+        </div>
+      </div>
+
+      <div className="w-full max-w-md space-y-6 lg:justify-self-end">
+        <Suspense fallback={null}>
+          <LoginForm />
+        </Suspense>
+        <p className="text-center text-sm text-muted-foreground">
+          Need an account?{" "}
+          <Link className="font-medium text-primary underline-offset-4 hover:underline" href="/register">
+            Create one
+          </Link>
+        </p>
+      </div>
+    </div>
+  );
+}

diff --git a/app/(marketing)/page.tsx b/app/(marketing)/page.tsx
new file mode 100644
index 0000000..941fc89
--- /dev/null
+++ b/app/(marketing)/page.tsx
@@ -0,0 +1,194 @@
+import Link from "next/link";
+import { Badge } from "@/components/ui/badge";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
+
+const FEATURES = [
+  {
+    title: "Batch-first workflow",
+    description: "Save wizard sessions into batches, then revisit and reuse them without starting from scratch."
+  },
+  {
+    title: "Client checklist portal",
+    description: "Publish a secure checklist link so clients can confirm payments after they submit."
+  },
+  {
+    title: "Payments board",
+    description: "Filter by due window and status, then generate portal links in bulk for the rows in view."
+  },
+  {
+    title: "Clean, minimal UI",
+    description: "Soft surfaces, consistent components, and accessible focus states—no UI noise."
+  },
+  {
+    title: "Secure by default",
+    description: "Credentials auth via NextAuth. Data stored in Postgres via Prisma."
+  },
+  {
+    title: "Built for speed",
+    description: "App Router + server components where it matters for crisp navigation and fast pages."
+  }
+];
+
+export default function HomePage() {
+  return (
+    <div className="grid gap-16">
+      <section className="grid items-center gap-10 lg:grid-cols-[1.15fr_0.85fr]">
+        <div>
+          <Badge variant="secondary" className="mb-4 w-fit bg-secondary/70">
+            Minimal, secure, fast
+          </Badge>
+          <h1 className="text-balance text-4xl font-semibold tracking-tight sm:text-5xl">
+            Tax payment schedules, without the chaos.
+          </h1>
+          <p className="mt-4 text-balance text-base text-muted-foreground sm:text-lg">
+            Build payment schedules, generate client drafts, and track confirmations—across batches—without
+            losing the thread.
+          </p>
+
+          <div className="mt-8 flex flex-wrap gap-3">
+            <Button asChild size="lg">
+              <Link href="/register">Create account</Link>
+            </Button>
+            <Button asChild size="lg" variant="outline">
+              <Link href="/login">Log in</Link>
+            </Button>
+          </div>
+          <p className="mt-3 text-sm text-muted-foreground">
+            Credentials auth via NextAuth. Data stored in Postgres via Prisma.
+          </p>
+        </div>
+
+        <Card className="relative overflow-hidden">
+          <div
+            aria-hidden
+            className="absolute inset-0 bg-[radial-gradient(70%_60%_at_50%_0%,hsl(var(--primary)_/_0.18),transparent_70%)]"
+          />
+          <CardHeader className="relative">
+            <CardTitle>Payments board</CardTitle>
+            <CardDescription>Filter by due window and status. Generate portal links in bulk.</CardDescription>
+          </CardHeader>
+          <CardContent className="relative">
+            <div className="grid gap-3">
+              {[
+                { label: "Jan 15", client: "Acme LLC", status: "DUE SOON" },
+                { label: "Jan 31", client: "Northwind Inc", status: "SENT" },
+                { label: "Feb 15", client: "Client", status: "CONFIRMED" },
+                { label: "Apr 15", client: "Client", status: "DRAFT" }
+              ].map((row) => (
+                <div
+                  key={`${row.label}-${row.client}`}
+                  className="flex items-center justify-between gap-3 rounded-xl border bg-card/70 px-4 py-3"
+                >
+                  <div className="min-w-0">
+                    <p className="text-sm font-medium">{row.client}</p>
+                    <p className="text-xs text-muted-foreground">Due {row.label}</p>
+                  </div>
+                  <span className="shrink-0 rounded-full bg-muted px-2.5 py-1 text-xs font-medium text-muted-foreground">
+                    {row.status}
+                  </span>
+                </div>
+              ))}
+            </div>
+          </CardContent>
+        </Card>
+      </section>
+
+      <section id="features" className="grid gap-6">
+        <div className="max-w-2xl">
+          <h2 className="text-2xl font-semibold tracking-tight sm:text-3xl">
+            A calmer workflow for accounting teams
+          </h2>
+          <p className="mt-2 text-muted-foreground">
+            Polished UI, consistent components, and thoughtful defaults—designed to reduce friction.
+          </p>
+        </div>
+
+        <div className="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
+          {FEATURES.map((feature) => (
+            <Card key={feature.title} className="bg-card/70 backdrop-blur">
+              <CardHeader className="space-y-1">
+                <CardTitle className="text-base">{feature.title}</CardTitle>
+                <CardDescription className="text-sm">{feature.description}</CardDescription>
+              </CardHeader>
+            </Card>
+          ))}
+        </div>
+      </section>
+
+      <section id="workflow" className="grid items-start gap-6 lg:grid-cols-2">
+        <Card className="bg-card/70 backdrop-blur">
+          <CardHeader>
+            <CardTitle>From wizard → to dashboard</CardTitle>
+            <CardDescription>
+              Build schedules in the legacy wizard, then track outcomes in a modern board.
+            </CardDescription>
+          </CardHeader>
+          <CardContent className="grid gap-3 text-sm text-muted-foreground">
+            <div className="rounded-xl border bg-background/60 px-4 py-3">
+              Save a wizard run into a batch.
+            </div>
+            <div className="rounded-xl border bg-background/60 px-4 py-3">
+              Publish a portal checklist link per client.
+            </div>
+            <div className="rounded-xl border bg-background/60 px-4 py-3">
+              Clients confirm payments; you see status updates.
+            </div>
+          </CardContent>
+        </Card>
+
+        <Card className="bg-card/70 backdrop-blur">
+          <CardHeader>
+            <CardTitle>Designed for focus</CardTitle>
+            <CardDescription>
+              Generous spacing, soft surfaces, and clear hierarchy for day-to-day use.
+            </CardDescription>
+          </CardHeader>
+          <CardContent className="grid gap-3 text-sm text-muted-foreground">
+            <div className="rounded-xl border bg-background/60 px-4 py-3">
+              Better empty states and table readability.
+            </div>
+            <div className="rounded-xl border bg-background/60 px-4 py-3">
+              Clear labels and helper text for forms.
+            </div>
+            <div className="rounded-xl border bg-background/60 px-4 py-3">
+              Subtle hover/focus states with accessible contrast.
+            </div>
+          </CardContent>
+        </Card>
+      </section>
+
+      <section id="security" className="rounded-3xl border bg-card/70 p-8 shadow-soft backdrop-blur">
+        <div className="grid gap-6 lg:grid-cols-[1.25fr_0.75fr] lg:items-center">
+          <div>
+            <h2 className="text-2xl font-semibold tracking-tight">Security that doesn’t get in the way</h2>
+            <p className="mt-2 text-muted-foreground">
+              Auth stays locked down, protected routes stay protected, and the client portal keeps sharing
+              simple.
+            </p>
+          </div>
+          <div className="flex flex-wrap gap-2">
+            <Badge variant="secondary" className="bg-secondary/70">
+              NextAuth Credentials
+            </Badge>
+            <Badge variant="secondary" className="bg-secondary/70">
+              Prisma + Postgres
+            </Badge>
+            <Badge variant="secondary" className="bg-secondary/70">
+              Protected middleware
+            </Badge>
+          </div>
+        </div>
+
+        <div className="mt-8 flex flex-wrap gap-3">
+          <Button asChild size="lg">
+            <Link href="/register">Get started</Link>
+          </Button>
+          <Button asChild size="lg" variant="outline">
+            <Link href="/login">Log in</Link>
+          </Button>
+        </div>
+      </section>
+    </div>
+  );
+}

diff --git a/app/(marketing)/register/RegisterForm.tsx b/app/(marketing)/register/RegisterForm.tsx
new file mode 100644
index 0000000..41ed2c9
--- /dev/null
+++ b/app/(marketing)/register/RegisterForm.tsx
@@ -0,0 +1,95 @@
+"use client";
+
+import { signIn } from "next-auth/react";
+import { useRouter } from "next/navigation";
+import { useState } from "react";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
+import { Input } from "@/components/ui/input";
+import { Label } from "@/components/ui/label";
+
+export function RegisterForm() {
+  const router = useRouter();
+  const [email, setEmail] = useState("");
+  const [password, setPassword] = useState("");
+  const [error, setError] = useState<string | null>(null);
+  const [loading, setLoading] = useState(false);
+
+  async function handleSubmit(event: React.FormEvent) {
+    event.preventDefault();
+    setLoading(true);
+    setError(null);
+
+    const resp = await fetch("/api/register", {
+      method: "POST",
+      headers: { "Content-Type": "application/json" },
+      body: JSON.stringify({ email, password })
+    });
+
+    if (!resp.ok) {
+      const data = await resp.json().catch(() => ({}));
+      setError(data?.error || "Unable to create account.");
+      setLoading(false);
+      return;
+    }
+
+    await signIn("credentials", {
+      redirect: false,
+      email,
+      password,
+      callbackUrl: "/app"
+    });
+
+    setLoading(false);
+    router.push("/app");
+  }
+
+  return (
+    <Card className="bg-card/80 shadow-soft backdrop-blur">
+      <CardHeader>
+        <CardTitle>Create account</CardTitle>
+        <CardDescription>Set up your secure workspace in under a minute.</CardDescription>
+      </CardHeader>
+      <CardContent>
+        <form onSubmit={handleSubmit} className="grid gap-4">
+          <div className="grid gap-2">
+            <Label htmlFor="email">Email</Label>
+            <Input
+              id="email"
+              type="email"
+              autoComplete="email"
+              required
+              value={email}
+              onChange={(event) => setEmail(event.target.value)}
+              disabled={loading}
+            />
+          </div>
+          <div className="grid gap-2">
+            <Label htmlFor="password">Password</Label>
+            <Input
+              id="password"
+              type="password"
+              autoComplete="new-password"
+              required
+              minLength={8}
+              value={password}
+              onChange={(event) => setPassword(event.target.value)}
+              disabled={loading}
+            />
+            <p className="text-xs text-muted-foreground">Minimum 8 characters.</p>
+          </div>
+
+          {error ? (
+            <div className="rounded-md border border-destructive/20 bg-destructive/10 px-3 py-2 text-sm text-destructive">
+              {error}
+            </div>
+          ) : null}
+
+          <Button type="submit" disabled={loading} className="w-full">
+            {loading ? "Creating..." : "Create account"}
+          </Button>
+        </form>
+      </CardContent>
+    </Card>
+  );
+}

diff --git a/app/(marketing)/register/page.tsx b/app/(marketing)/register/page.tsx
new file mode 100644
index 0000000..bab740b
--- /dev/null
+++ b/app/(marketing)/register/page.tsx
@@ -0,0 +1,53 @@
+import Link from "next/link";
+import { RegisterForm } from "./RegisterForm";
+import { Badge } from "@/components/ui/badge";
+
+export default function RegisterPage() {
+  return (
+    <div className="grid gap-10 lg:grid-cols-2 lg:items-center">
+      <div className="space-y-5">
+        <Badge variant="secondary" className="w-fit bg-secondary/70">
+          Get started
+        </Badge>
+        <div className="space-y-2">
+          <h1 className="text-3xl font-semibold tracking-tight sm:text-4xl">Create your workspace</h1>
+          <p className="text-muted-foreground">
+            Create an account to start building schedules, publishing checklists, and tracking payments.
+          </p>
+        </div>
+
+        <div className="grid gap-3">
+          {[
+            {
+              title: "Modern UI on top of your existing wizard",
+              description: "Keep the legacy wizard logic, but get a clean dashboard for the rest."
+            },
+            {
+              title: "Better visibility for due dates",
+              description: "Use the payments board to stay ahead of upcoming deadlines."
+            },
+            {
+              title: "Client-friendly confirmations",
+              description: "A simple portal so clients can mark payments as paid."
+            }
+          ].map((item) => (
+            <div key={item.title} className="rounded-2xl border bg-card/60 p-4 backdrop-blur">
+              <p className="text-sm font-medium">{item.title}</p>
+              <p className="mt-1 text-sm text-muted-foreground">{item.description}</p>
+            </div>
+          ))}
+        </div>
+      </div>
+
+      <div className="w-full max-w-md space-y-6 lg:justify-self-end">
+        <RegisterForm />
+        <p className="text-center text-sm text-muted-foreground">
+          Already have an account?{" "}
+          <Link className="font-medium text-primary underline-offset-4 hover:underline" href="/login">
+            Log in
+          </Link>
+        </p>
+      </div>
+    </div>
+  );
+}

diff --git a/app/(portal)/layout.tsx b/app/(portal)/layout.tsx
new file mode 100644
index 0000000..2b22908
--- /dev/null
+++ b/app/(portal)/layout.tsx
@@ -0,0 +1,27 @@
+import type { ReactNode } from "react";
+import Link from "next/link";
+
+export default function PortalLayout({ children }: { children: ReactNode }) {
+  return (
+    <div className="min-h-screen bg-background">
+      <div aria-hidden className="pointer-events-none fixed inset-0 -z-10">
+        <div className="absolute inset-x-0 top-[-220px] h-[520px] bg-[radial-gradient(60%_60%_at_50%_0%,hsl(var(--primary)_/_0.16),transparent_70%)]" />
+      </div>
+
+      <header className="border-b bg-background/75 backdrop-blur">
+        <div className="mx-auto flex max-w-4xl items-center justify-between px-4 py-3">
+          <Link href="/" className="flex items-center gap-2">
+            <div className="flex h-9 w-9 items-center justify-center rounded-2xl bg-primary text-primary-foreground shadow-soft">
+              <span className="text-xs font-semibold tracking-tight">TP</span>
+            </div>
+            <span className="text-sm font-semibold">Tax Payment Wizard</span>
+          </Link>
+          <p className="text-xs text-muted-foreground">Secure client portal</p>
+        </div>
+      </header>
+
+      <main className="mx-auto w-full max-w-4xl px-4 py-10">{children}</main>
+    </div>
+  );
+}
+

diff --git a/app/(portal)/p/[token]/ClientChecklist.tsx b/app/(portal)/p/[token]/ClientChecklist.tsx
new file mode 100644
index 0000000..84ab617
--- /dev/null
+++ b/app/(portal)/p/[token]/ClientChecklist.tsx
@@ -0,0 +1,272 @@
+"use client";
+
+import { useMemo, useState } from "react";
+import { useRouter } from "next/navigation";
+import { Badge } from "@/components/ui/badge";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent, CardHeader } from "@/components/ui/card";
+import { Input } from "@/components/ui/input";
+import { Label } from "@/components/ui/label";
+import { Textarea } from "@/components/ui/textarea";
+import { cn } from "@/lib/utils";
+
+type PaymentRow = {
+  id: string;
+  scope: string;
+  stateCode: string | null;
+  paymentType: string;
+  dueDate: string | null;
+  amount: string | null;
+  status: string;
+};
+
+type FormState = {
+  email: string;
+  paidDate: string;
+  paidAmount: string;
+  confirmationNumber: string;
+  note: string;
+};
+
+const EMPTY_FORM: FormState = {
+  email: "",
+  paidDate: "",
+  paidAmount: "",
+  confirmationNumber: "",
+  note: ""
+};
+
+function formatAmount(amount: string | null) {
+  if (!amount) return "—";
+  const numeric = Number(amount);
+  if (!Number.isFinite(numeric)) return amount;
+  return new Intl.NumberFormat("en-US", { style: "currency", currency: "USD" }).format(numeric);
+}
+
+function formatStatus(status: string) {
+  if (!status) return "Unknown";
+  const label = status.toLowerCase().replace(/_/g, " ");
+  return label.charAt(0).toUpperCase() + label.slice(1);
+}
+
+function statusBadge(status: string) {
+  const label = formatStatus(status);
+  switch (status) {
+    case "CONFIRMED":
+    case "VERIFIED":
+      return <Badge variant="success">{label}</Badge>;
+    case "VIEWED":
+      return <Badge variant="info">{label}</Badge>;
+    case "OVERDUE":
+      return <Badge variant="destructive">{label}</Badge>;
+    case "CANCELLED":
+      return (
+        <Badge variant="outline" className="text-muted-foreground">
+          {label}
+        </Badge>
+      );
+    case "DRAFT":
+    case "SENT":
+    default:
+      return <Badge variant="secondary">{label}</Badge>;
+  }
+}
+
+export function ClientChecklist({
+  token,
+  payments
+}: {
+  token: string;
+  payments: PaymentRow[];
+  clientName?: string;
+}) {
+  const router = useRouter();
+  const [activePaymentId, setActivePaymentId] = useState<string | null>(null);
+  const [formState, setFormState] = useState<FormState>(EMPTY_FORM);
+  const [submitting, setSubmitting] = useState(false);
+  const [error, setError] = useState<string | null>(null);
+
+  const activePayment = useMemo(
+    () => payments.find((payment) => payment.id === activePaymentId) || null,
+    [activePaymentId, payments]
+  );
+
+  function openForm(payment: PaymentRow) {
+    setActivePaymentId(payment.id);
+    setFormState({
+      ...EMPTY_FORM,
+      paidAmount: payment.amount || ""
+    });
+    setError(null);
+  }
+
+  function closeForm() {
+    setActivePaymentId(null);
+    setFormState(EMPTY_FORM);
+    setError(null);
+  }
+
+  async function submitConfirmation() {
+    if (!activePayment) return;
+    setSubmitting(true);
+    setError(null);
+
+    try {
+      const response = await fetch(`/api/p/${token}/confirm`, {
+        method: "POST",
+        headers: { "Content-Type": "application/json" },
+        body: JSON.stringify({
+          paymentId: activePayment.id,
+          email: formState.email,
+          paidDate: formState.paidDate || undefined,
+          paidAmount: formState.paidAmount || undefined,
+          confirmationNumber: formState.confirmationNumber || undefined,
+          note: formState.note || undefined
+        })
+      });
+
+      if (!response.ok) {
+        const payload = await response.json().catch(() => ({}));
+        throw new Error(payload?.error || "Unable to confirm payment.");
+      }
+
+      closeForm();
+      router.refresh();
+    } catch (submitError) {
+      setError(submitError instanceof Error ? submitError.message : "Unable to confirm payment.");
+    } finally {
+      setSubmitting(false);
+    }
+  }
+
+  return (
+    <section className="grid gap-4">
+      {payments.map((payment) => {
+        const isPaid = ["CONFIRMED", "VERIFIED"].includes(payment.status);
+        const isCancelled = payment.status === "CANCELLED";
+        const scopeLabel =
+          payment.scope === "state"
+            ? `State${payment.stateCode ? ` ${payment.stateCode}` : ""}`
+            : "Federal";
+
+        return (
+          <Card
+            key={payment.id}
+            className={cn(
+              "overflow-hidden bg-card/70 backdrop-blur transition-colors",
+              activePaymentId === payment.id ? "ring-1 ring-primary/20" : "hover:bg-card/80"
+            )}
+          >
+            <CardHeader className="space-y-0">
+              <div className="flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between">
+                <div className="space-y-1">
+                  <div className="flex flex-wrap items-center gap-2">
+                    <p className="text-base font-semibold leading-none tracking-tight">{scopeLabel}</p>
+                    <p className="text-sm text-muted-foreground">{payment.paymentType}</p>
+                  </div>
+                  <div className="flex flex-wrap gap-x-6 gap-y-1 text-sm text-muted-foreground">
+                    <span>
+                      Due: <span className="text-foreground">{payment.dueDate || "—"}</span>
+                    </span>
+                    <span>
+                      Amount:{" "}
+                      <span className="text-foreground tabular-nums">{formatAmount(payment.amount)}</span>
+                    </span>
+                  </div>
+                </div>
+
+                <div className="flex flex-wrap items-center gap-2">
+                  {statusBadge(payment.status)}
+                  {!isPaid && !isCancelled && (
+                    <Button type="button" size="sm" onClick={() => openForm(payment)}>
+                      Mark as paid
+                    </Button>
+                  )}
+                  {isPaid && <span className="text-sm text-muted-foreground">Confirmed</span>}
+                  {isCancelled && <span className="text-sm text-muted-foreground">Cancelled</span>}
+                </div>
+              </div>
+            </CardHeader>
+
+            {activePaymentId === payment.id && (
+              <CardContent className="pt-0">
+                <div className="grid gap-4 rounded-lg border bg-muted/10 p-4">
+                  <div className="grid gap-4 sm:grid-cols-2">
+                    <div className="grid gap-2">
+                      <Label htmlFor={`email-${payment.id}`}>Your email</Label>
+                      <Input
+                        id={`email-${payment.id}`}
+                        type="email"
+                        value={formState.email}
+                        onChange={(event) => setFormState({ ...formState, email: event.target.value })}
+                        required
+                        disabled={submitting}
+                      />
+                    </div>
+                    <div className="grid gap-2">
+                      <Label htmlFor={`paid-date-${payment.id}`}>Paid date (optional)</Label>
+                      <Input
+                        id={`paid-date-${payment.id}`}
+                        type="date"
+                        value={formState.paidDate}
+                        onChange={(event) => setFormState({ ...formState, paidDate: event.target.value })}
+                        disabled={submitting}
+                      />
+                    </div>
+                    <div className="grid gap-2">
+                      <Label htmlFor={`paid-amount-${payment.id}`}>Paid amount (optional)</Label>
+                      <Input
+                        id={`paid-amount-${payment.id}`}
+                        type="number"
+                        step="0.01"
+                        value={formState.paidAmount}
+                        onChange={(event) => setFormState({ ...formState, paidAmount: event.target.value })}
+                        disabled={submitting}
+                      />
+                    </div>
+                    <div className="grid gap-2">
+                      <Label htmlFor={`confirmation-${payment.id}`}>Confirmation number (optional)</Label>
+                      <Input
+                        id={`confirmation-${payment.id}`}
+                        type="text"
+                        value={formState.confirmationNumber}
+                        onChange={(event) =>
+                          setFormState({ ...formState, confirmationNumber: event.target.value })
+                        }
+                        disabled={submitting}
+                      />
+                    </div>
+                    <div className="grid gap-2 sm:col-span-2">
+                      <Label htmlFor={`note-${payment.id}`}>Note (optional)</Label>
+                      <Textarea
+                        id={`note-${payment.id}`}
+                        value={formState.note}
+                        onChange={(event) => setFormState({ ...formState, note: event.target.value })}
+                        disabled={submitting}
+                      />
+                    </div>
+                  </div>
+
+                  {error && (
+                    <div className="rounded-md border border-destructive/20 bg-destructive/10 px-3 py-2 text-sm text-destructive">
+                      {error}
+                    </div>
+                  )}
+
+                  <div className="flex flex-wrap gap-2">
+                    <Button type="button" onClick={submitConfirmation} disabled={submitting}>
+                      {submitting ? "Submitting..." : "Confirm payment"}
+                    </Button>
+                    <Button variant="outline" type="button" onClick={closeForm} disabled={submitting}>
+                      Cancel
+                    </Button>
+                  </div>
+                </div>
+              </CardContent>
+            )}
+          </Card>
+        );
+      })}
+    </section>
+  );
+}

diff --git a/app/(portal)/p/[token]/page.tsx b/app/(portal)/p/[token]/page.tsx
new file mode 100644
index 0000000..02003ca
--- /dev/null
+++ b/app/(portal)/p/[token]/page.tsx
@@ -0,0 +1,114 @@
+import { notFound } from "next/navigation";
+import { prisma } from "@/lib/prisma";
+import { hashPortalToken } from "@/lib/portal-token";
+import { ClientChecklist } from "./ClientChecklist";
+import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
+
+export const dynamic = "force-dynamic";
+
+type PortalPageProps = {
+  params: { token: string };
+};
+
+export default async function PortalPage({ params }: PortalPageProps) {
+  const token = params.token;
+  if (!token) {
+    notFound();
+  }
+
+  const tokenHash = hashPortalToken(token);
+  const now = new Date();
+
+  const portalLink = await prisma.portalLink.findFirst({
+    where: {
+      tokenHash,
+      scope: "PLAN",
+      OR: [{ expiresAt: null }, { expiresAt: { gt: now } }]
+    },
+    include: {
+      client: true,
+      run: {
+        include: {
+          client: true,
+          payments: {
+            orderBy: [{ dueDate: "asc" }, { sortOrder: "asc" }]
+          }
+        }
+      }
+    }
+  });
+
+  if (!portalLink?.run) {
+    notFound();
+  }
+
+  await prisma.$transaction([
+    prisma.portalLink.update({
+      where: { id: portalLink.id },
+      data: { lastUsedAt: now }
+    }),
+    prisma.payment.updateMany({
+      where: {
+        runId: portalLink.run.id,
+        status: "SENT"
+      },
+      data: { status: "VIEWED" }
+    })
+  ]);
+
+  const clientName =
+    portalLink.client?.name || portalLink.run.client?.name || portalLink.run.client?.addresseeName || "Client";
+
+  const payments = portalLink.run.payments.map((payment) => ({
+    id: payment.id,
+    scope: payment.scope,
+    stateCode: payment.stateCode,
+    paymentType: payment.paymentType,
+    dueDate: payment.dueDate ? payment.dueDate.toISOString().slice(0, 10) : null,
+    amount: payment.amount ? payment.amount.toString() : null,
+    status: payment.status
+  }));
+
+  const totalPayments = payments.length;
+  const confirmedPayments = payments.filter((payment) => ["CONFIRMED", "VERIFIED"].includes(payment.status)).length;
+  const remainingPayments = totalPayments - confirmedPayments;
+  const nextDue = payments.find((payment) => !["CONFIRMED", "VERIFIED", "CANCELLED"].includes(payment.status));
+
+  return (
+    <div className="grid gap-8">
+      <Card className="relative overflow-hidden bg-card/70 backdrop-blur">
+        <div
+          aria-hidden
+          className="absolute inset-0 bg-[radial-gradient(70%_60%_at_10%_0%,hsl(var(--primary)_/_0.16),transparent_70%)]"
+        />
+        <CardHeader className="space-y-2">
+          <p className="text-xs font-medium uppercase tracking-[0.18em] text-muted-foreground">
+            Tax Payment Checklist
+          </p>
+          <CardTitle className="relative text-2xl">{clientName}</CardTitle>
+          <CardDescription>
+            Confirm each payment after you submit it to the IRS or state portal.
+          </CardDescription>
+        </CardHeader>
+        <CardContent>
+          <div className="grid gap-3 sm:grid-cols-3">
+            <div className="rounded-2xl border bg-background/60 p-4">
+              <p className="text-xs font-medium uppercase tracking-wide text-muted-foreground">Remaining</p>
+              <p className="mt-2 text-2xl font-semibold tabular-nums">{remainingPayments}</p>
+            </div>
+            <div className="rounded-2xl border bg-background/60 p-4">
+              <p className="text-xs font-medium uppercase tracking-wide text-muted-foreground">Confirmed</p>
+              <p className="mt-2 text-2xl font-semibold tabular-nums">{confirmedPayments}</p>
+            </div>
+            <div className="rounded-2xl border bg-background/60 p-4">
+              <p className="text-xs font-medium uppercase tracking-wide text-muted-foreground">Next due</p>
+              <p className="mt-2 text-2xl font-semibold tabular-nums">{nextDue?.dueDate || "All set"}</p>
+            </div>
+          </div>
+        </CardContent>
+      </Card>
+
+      <ClientChecklist token={token} payments={payments} clientName={clientName} />
+    </div>
+  );
+}

diff --git a/components/ui/badge.tsx b/components/ui/badge.tsx
new file mode 100644
index 0000000..686d064
--- /dev/null
+++ b/components/ui/badge.tsx
@@ -0,0 +1,35 @@
+import * as React from "react";
+import { cva, type VariantProps } from "class-variance-authority";
+
+import { cn } from "@/lib/utils";
+
+const badgeVariants = cva(
+  "inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 ring-offset-background",
+  {
+    variants: {
+      variant: {
+        default: "border-transparent bg-primary text-primary-foreground",
+        secondary: "border-transparent bg-secondary text-secondary-foreground",
+        outline: "text-foreground",
+        success: "border-emerald-500/20 bg-emerald-500/15 text-emerald-700 dark:text-emerald-300",
+        info: "border-sky-500/20 bg-sky-500/15 text-sky-700 dark:text-sky-300",
+        warning: "border-amber-500/25 bg-amber-500/15 text-amber-800 dark:text-amber-300",
+        destructive: "border-transparent bg-destructive text-destructive-foreground"
+      }
+    },
+    defaultVariants: {
+      variant: "default"
+    }
+  }
+);
+
+export interface BadgeProps
+  extends React.HTMLAttributes<HTMLDivElement>,
+    VariantProps<typeof badgeVariants> {}
+
+function Badge({ className, variant, ...props }: BadgeProps) {
+  return <div className={cn(badgeVariants({ variant }), className)} {...props} />;
+}
+
+export { Badge, badgeVariants };
+

diff --git a/components/ui/button.tsx b/components/ui/button.tsx
new file mode 100644
index 0000000..fb0bbf3
--- /dev/null
+++ b/components/ui/button.tsx
@@ -0,0 +1,50 @@
+import * as React from "react";
+import { Slot } from "@radix-ui/react-slot";
+import { cva, type VariantProps } from "class-variance-authority";
+
+import { cn } from "@/lib/utils";
+
+const buttonVariants = cva(
+  "inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ring-offset-background",
+  {
+    variants: {
+      variant: {
+        default: "bg-primary text-primary-foreground shadow-soft hover:bg-primary/90",
+        secondary: "bg-secondary text-secondary-foreground hover:bg-secondary/80",
+        outline: "border border-input bg-background hover:bg-accent hover:text-accent-foreground",
+        ghost: "hover:bg-accent hover:text-accent-foreground",
+        link: "text-primary underline-offset-4 hover:underline",
+        destructive: "bg-destructive text-destructive-foreground hover:bg-destructive/90"
+      },
+      size: {
+        default: "h-10 px-4 py-2",
+        sm: "h-9 rounded-md px-3",
+        lg: "h-11 rounded-md px-8",
+        icon: "h-10 w-10"
+      }
+    },
+    defaultVariants: {
+      variant: "default",
+      size: "default"
+    }
+  }
+);
+
+export interface ButtonProps
+  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
+    VariantProps<typeof buttonVariants> {
+  asChild?: boolean;
+}
+
+const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
+  ({ className, variant, size, asChild = false, ...props }, ref) => {
+    const Comp = asChild ? Slot : "button";
+    return (
+      <Comp className={cn(buttonVariants({ variant, size, className }))} ref={ref} {...props} />
+    );
+  }
+);
+Button.displayName = "Button";
+
+export { Button, buttonVariants };
+

diff --git a/components/ui/card.tsx b/components/ui/card.tsx
new file mode 100644
index 0000000..9f2da7e
--- /dev/null
+++ b/components/ui/card.tsx
@@ -0,0 +1,56 @@
+import * as React from "react";
+
+import { cn } from "@/lib/utils";
+
+const Card = React.forwardRef<React.ElementRef<"div">, React.ComponentPropsWithoutRef<"div">>(
+  ({ className, ...props }, ref) => (
+    <div
+      ref={ref}
+      className={cn("rounded-lg border bg-card text-card-foreground shadow-soft", className)}
+      {...props}
+    />
+  )
+);
+Card.displayName = "Card";
+
+const CardHeader = React.forwardRef<React.ElementRef<"div">, React.ComponentPropsWithoutRef<"div">>(
+  ({ className, ...props }, ref) => (
+    <div ref={ref} className={cn("flex flex-col space-y-1.5 p-6", className)} {...props} />
+  )
+);
+CardHeader.displayName = "CardHeader";
+
+const CardTitle = React.forwardRef<React.ElementRef<"h3">, React.ComponentPropsWithoutRef<"h3">>(
+  ({ className, ...props }, ref) => (
+    <h3
+      ref={ref}
+      className={cn("text-lg font-semibold leading-none tracking-tight", className)}
+      {...props}
+    />
+  )
+);
+CardTitle.displayName = "CardTitle";
+
+const CardDescription = React.forwardRef<
+  React.ElementRef<"p">,
+  React.ComponentPropsWithoutRef<"p">
+>(({ className, ...props }, ref) => (
+  <p ref={ref} className={cn("text-sm text-muted-foreground", className)} {...props} />
+));
+CardDescription.displayName = "CardDescription";
+
+const CardContent = React.forwardRef<React.ElementRef<"div">, React.ComponentPropsWithoutRef<"div">>(
+  ({ className, ...props }, ref) => (
+    <div ref={ref} className={cn("p-6 pt-0", className)} {...props} />
+  )
+);
+CardContent.displayName = "CardContent";
+
+const CardFooter = React.forwardRef<React.ElementRef<"div">, React.ComponentPropsWithoutRef<"div">>(
+  ({ className, ...props }, ref) => (
+    <div ref={ref} className={cn("flex items-center p-6 pt-0", className)} {...props} />
+  )
+);
+CardFooter.displayName = "CardFooter";
+
+export { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };

diff --git a/components/ui/input.tsx b/components/ui/input.tsx
new file mode 100644
index 0000000..126e5cc
--- /dev/null
+++ b/components/ui/input.tsx
@@ -0,0 +1,23 @@
+import * as React from "react";
+
+import { cn } from "@/lib/utils";
+
+const Input = React.forwardRef<HTMLInputElement, React.InputHTMLAttributes<HTMLInputElement>>(
+  ({ className, type, ...props }, ref) => {
+    return (
+      <input
+        type={type}
+        className={cn(
+          "flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
+          className
+        )}
+        ref={ref}
+        {...props}
+      />
+    );
+  }
+);
+Input.displayName = "Input";
+
+export { Input };
+

diff --git a/components/ui/label.tsx b/components/ui/label.tsx
new file mode 100644
index 0000000..84e5874
--- /dev/null
+++ b/components/ui/label.tsx
@@ -0,0 +1,17 @@
+import * as React from "react";
+
+import { cn } from "@/lib/utils";
+
+const Label = React.forwardRef<HTMLLabelElement, React.LabelHTMLAttributes<HTMLLabelElement>>(
+  ({ className, ...props }, ref) => (
+    <label
+      ref={ref}
+      className={cn("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70", className)}
+      {...props}
+    />
+  )
+);
+Label.displayName = "Label";
+
+export { Label };
+

diff --git a/components/ui/select.tsx b/components/ui/select.tsx
new file mode 100644
index 0000000..6f11061
--- /dev/null
+++ b/components/ui/select.tsx
@@ -0,0 +1,20 @@
+import * as React from "react";
+
+import { cn } from "@/lib/utils";
+
+const Select = React.forwardRef<HTMLSelectElement, React.SelectHTMLAttributes<HTMLSelectElement>>(
+  ({ className, ...props }, ref) => (
+    <select
+      ref={ref}
+      className={cn(
+        "flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
+        className
+      )}
+      {...props}
+    />
+  )
+);
+Select.displayName = "Select";
+
+export { Select };
+

diff --git a/components/ui/separator.tsx b/components/ui/separator.tsx
new file mode 100644
index 0000000..1a6db59
--- /dev/null
+++ b/components/ui/separator.tsx
@@ -0,0 +1,27 @@
+import * as React from "react";
+
+import { cn } from "@/lib/utils";
+
+type SeparatorProps = React.HTMLAttributes<HTMLDivElement> & {
+  orientation?: "horizontal" | "vertical";
+};
+
+const Separator = React.forwardRef<HTMLDivElement, SeparatorProps>(
+  ({ className, orientation = "horizontal", ...props }, ref) => (
+    <div
+      ref={ref}
+      role="separator"
+      aria-orientation={orientation}
+      className={cn(
+        "shrink-0 bg-border",
+        orientation === "horizontal" ? "h-px w-full" : "h-full w-px",
+        className
+      )}
+      {...props}
+    />
+  )
+);
+Separator.displayName = "Separator";
+
+export { Separator };
+

diff --git a/components/ui/table.tsx b/components/ui/table.tsx
new file mode 100644
index 0000000..1142dbb
--- /dev/null
+++ b/components/ui/table.tsx
@@ -0,0 +1,72 @@
+import * as React from "react";
+
+import { cn } from "@/lib/utils";
+
+const Table = React.forwardRef<HTMLTableElement, React.HTMLAttributes<HTMLTableElement>>(
+  ({ className, ...props }, ref) => (
+    <div className="relative w-full overflow-auto">
+      <table ref={ref} className={cn("w-full caption-bottom text-sm", className)} {...props} />
+    </div>
+  )
+);
+Table.displayName = "Table";
+
+const TableHeader = React.forwardRef<HTMLTableSectionElement, React.HTMLAttributes<HTMLTableSectionElement>>(
+  ({ className, ...props }, ref) => (
+    <thead ref={ref} className={cn("[&_tr]:border-b", className)} {...props} />
+  )
+);
+TableHeader.displayName = "TableHeader";
+
+const TableBody = React.forwardRef<HTMLTableSectionElement, React.HTMLAttributes<HTMLTableSectionElement>>(
+  ({ className, ...props }, ref) => (
+    <tbody ref={ref} className={cn("[&_tr:last-child]:border-0", className)} {...props} />
+  )
+);
+TableBody.displayName = "TableBody";
+
+const TableFooter = React.forwardRef<HTMLTableSectionElement, React.HTMLAttributes<HTMLTableSectionElement>>(
+  ({ className, ...props }, ref) => (
+    <tfoot ref={ref} className={cn("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0", className)} {...props} />
+  )
+);
+TableFooter.displayName = "TableFooter";
+
+const TableRow = React.forwardRef<HTMLTableRowElement, React.HTMLAttributes<HTMLTableRowElement>>(
+  ({ className, ...props }, ref) => (
+    <tr
+      ref={ref}
+      className={cn("border-b transition-colors hover:bg-muted/40 data-[state=selected]:bg-muted", className)}
+      {...props}
+    />
+  )
+);
+TableRow.displayName = "TableRow";
+
+const TableHead = React.forwardRef<HTMLTableCellElement, React.ThHTMLAttributes<HTMLTableCellElement>>(
+  ({ className, ...props }, ref) => (
+    <th
+      ref={ref}
+      className={cn("h-11 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0", className)}
+      {...props}
+    />
+  )
+);
+TableHead.displayName = "TableHead";
+
+const TableCell = React.forwardRef<HTMLTableCellElement, React.TdHTMLAttributes<HTMLTableCellElement>>(
+  ({ className, ...props }, ref) => (
+    <td ref={ref} className={cn("p-4 align-middle [&:has([role=checkbox])]:pr-0", className)} {...props} />
+  )
+);
+TableCell.displayName = "TableCell";
+
+const TableCaption = React.forwardRef<HTMLTableCaptionElement, React.HTMLAttributes<HTMLTableCaptionElement>>(
+  ({ className, ...props }, ref) => (
+    <caption ref={ref} className={cn("mt-4 text-sm text-muted-foreground", className)} {...props} />
+  )
+);
+TableCaption.displayName = "TableCaption";
+
+export { Table, TableHeader, TableBody, TableFooter, TableHead, TableRow, TableCell, TableCaption };
+

diff --git a/components/ui/textarea.tsx b/components/ui/textarea.tsx
new file mode 100644
index 0000000..1f13aba
--- /dev/null
+++ b/components/ui/textarea.tsx
@@ -0,0 +1,20 @@
+import * as React from "react";
+
+import { cn } from "@/lib/utils";
+
+const Textarea = React.forwardRef<HTMLTextAreaElement, React.TextareaHTMLAttributes<HTMLTextAreaElement>>(
+  ({ className, ...props }, ref) => (
+    <textarea
+      ref={ref}
+      className={cn(
+        "flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
+        className
+      )}
+      {...props}
+    />
+  )
+);
+Textarea.displayName = "Textarea";
+
+export { Textarea };
+

diff --git a/lib/portal-token.ts b/lib/portal-token.ts
new file mode 100644
index 0000000..7ae346f
--- /dev/null
+++ b/lib/portal-token.ts
@@ -0,0 +1,22 @@
+import { createHash, randomBytes } from "crypto";
+
+export function generatePortalToken(): string {
+  return randomBytes(32).toString("base64url");
+}
+
+export function hashPortalToken(token: string): string {
+  return createHash("sha256").update(token).digest("hex");
+}
+
+export function getRequestOrigin(request: Request): string {
+  const forwardedHost = request.headers.get("x-forwarded-host");
+  if (forwardedHost) {
+    const host = forwardedHost.split(",")[0]?.trim();
+    const forwardedProto = request.headers.get("x-forwarded-proto");
+    const proto = forwardedProto ? forwardedProto.split(",")[0]?.trim() : "https";
+    if (host) {
+      return `${proto}://${host}`;
+    }
+  }
+  return new URL(request.url).origin;
+}

diff --git a/lib/utils.ts b/lib/utils.ts
new file mode 100644
index 0000000..6fcf374
--- /dev/null
+++ b/lib/utils.ts
@@ -0,0 +1,7 @@
+import { clsx, type ClassValue } from "clsx";
+import { twMerge } from "tailwind-merge";
+
+export function cn(...inputs: ClassValue[]) {
+  return twMerge(clsx(inputs));
+}
+

diff --git a/postcss.config.cjs b/postcss.config.cjs
new file mode 100644
index 0000000..5cbc2c7
--- /dev/null
+++ b/postcss.config.cjs
@@ -0,0 +1,6 @@
+module.exports = {
+  plugins: {
+    tailwindcss: {},
+    autoprefixer: {}
+  }
+};

diff --git a/tailwind.config.js b/tailwind.config.js
new file mode 100644
index 0000000..975ebd6
--- /dev/null
+++ b/tailwind.config.js
@@ -0,0 +1,60 @@
+import { fontFamily } from "tailwindcss/defaultTheme";
+
+/** @type {import('tailwindcss').Config} */
+const config = {
+  darkMode: "media",
+  content: ["./app/**/*.{ts,tsx}", "./components/**/*.{ts,tsx}", "./lib/**/*.{ts,tsx}"],
+  theme: {
+    extend: {
+      fontFamily: {
+        sans: ["var(--font-sans)", ...fontFamily.sans]
+      },
+      colors: {
+        border: "hsl(var(--border))",
+        input: "hsl(var(--input))",
+        ring: "hsl(var(--ring))",
+        background: "hsl(var(--background))",
+        foreground: "hsl(var(--foreground))",
+        primary: {
+          DEFAULT: "hsl(var(--primary))",
+          foreground: "hsl(var(--primary-foreground))"
+        },
+        secondary: {
+          DEFAULT: "hsl(var(--secondary))",
+          foreground: "hsl(var(--secondary-foreground))"
+        },
+        destructive: {
+          DEFAULT: "hsl(var(--destructive))",
+          foreground: "hsl(var(--destructive-foreground))"
+        },
+        muted: {
+          DEFAULT: "hsl(var(--muted))",
+          foreground: "hsl(var(--muted-foreground))"
+        },
+        accent: {
+          DEFAULT: "hsl(var(--accent))",
+          foreground: "hsl(var(--accent-foreground))"
+        },
+        popover: {
+          DEFAULT: "hsl(var(--popover))",
+          foreground: "hsl(var(--popover-foreground))"
+        },
+        card: {
+          DEFAULT: "hsl(var(--card))",
+          foreground: "hsl(var(--card-foreground))"
+        }
+      },
+      borderRadius: {
+        lg: "var(--radius)",
+        md: "calc(var(--radius) - 2px)",
+        sm: "calc(var(--radius) - 4px)"
+      },
+      boxShadow: {
+        soft: "0 1px 1px hsl(var(--shadow) / 0.04), 0 8px 28px hsl(var(--shadow) / 0.10)"
+      }
+    }
+  },
+  plugins: []
+};
+
+export default config;

diff --git a/ui-upgrade.patch b/ui-upgrade.patch
new file mode 100644
index 0000000..a46476d
--- /dev/null
+++ b/ui-upgrade.patch
@@ -0,0 +1,3418 @@
+# UI/UX patch (Tailwind + shadcn + route-group layouts)
+# Generated: 2026-01-10T21:27:23Z
+
+diff --git a/app/globals.css b/app/globals.css
+index 98faf31..9ccf978 100644
+--- a/app/globals.css
++++ b/app/globals.css
+@@ -1,96 +1,84 @@
+-* {
+-  box-sizing: border-box;
+-}
++@tailwind base;
++@tailwind components;
++@tailwind utilities;
+ 
+-body {
+-  margin: 0;
+-  font-family: "Inter", "Segoe UI", system-ui, sans-serif;
+-  color: #0f172a;
+-  background: #f8fafc;
+-}
++@layer base {
++  :root {
++    --background: 210 40% 98%;
++    --foreground: 222.2 84% 4.9%;
+ 
+-a {
+-  color: inherit;
+-  text-decoration: none;
+-}
++    --card: 0 0% 100%;
++    --card-foreground: 222.2 84% 4.9%;
+ 
+-main {
+-  max-width: 960px;
+-  margin: 0 auto;
+-  padding: 48px 20px;
+-}
++    --popover: 0 0% 100%;
++    --popover-foreground: 222.2 84% 4.9%;
+ 
+-.card {
+-  background: #ffffff;
+-  border: 1px solid #e2e8f0;
+-  border-radius: 12px;
+-  padding: 24px;
+-  box-shadow: 0 10px 30px rgba(15, 23, 42, 0.08);
+-}
++    --primary: 238 74% 56%;
++    --primary-foreground: 210 40% 98%;
+ 
+-.btn {
+-  display: inline-flex;
+-  align-items: center;
+-  justify-content: center;
+-  border-radius: 999px;
+-  border: 1px solid #0f172a;
+-  background: #0f172a;
+-  color: #ffffff;
+-  padding: 10px 20px;
+-  font-weight: 600;
+-  cursor: pointer;
+-  gap: 8px;
+-}
++    --secondary: 210 40% 96.1%;
++    --secondary-foreground: 222.2 47.4% 11.2%;
+ 
+-.btn.secondary {
+-  background: #ffffff;
+-  color: #0f172a;
+-}
++    --muted: 210 40% 96.1%;
++    --muted-foreground: 215.4 16.3% 46.9%;
+ 
+-.btn-row {
+-  display: flex;
+-  gap: 12px;
+-  flex-wrap: wrap;
+-}
++    --accent: 210 40% 96.1%;
++    --accent-foreground: 222.2 47.4% 11.2%;
+ 
+-form {
+-  display: grid;
+-  gap: 16px;
+-}
++    --destructive: 0 84.2% 60.2%;
++    --destructive-foreground: 210 40% 98%;
+ 
+-label {
+-  display: grid;
+-  gap: 6px;
+-  font-size: 14px;
+-  color: #475569;
+-}
++    --border: 214.3 31.8% 91.4%;
++    --input: 214.3 31.8% 91.4%;
++    --ring: 238 74% 56%;
+ 
+-input {
+-  padding: 10px 12px;
+-  border-radius: 8px;
+-  border: 1px solid #cbd5f5;
+-  font-size: 15px;
+-}
++    --radius: 1.25rem;
++    --shadow: 222.2 84% 4.9%;
++  }
+ 
+-.table {
+-  width: 100%;
+-  border-collapse: collapse;
+-}
++  @media (prefers-color-scheme: dark) {
++    :root {
++      --background: 222.2 84% 4.9%;
++      --foreground: 210 40% 98%;
+ 
+-.table th,
+-.table td {
+-  text-align: left;
+-  padding: 10px;
+-  border-bottom: 1px solid #e2e8f0;
+-  font-size: 14px;
+-}
++      --card: 222.2 84% 4.9%;
++      --card-foreground: 210 40% 98%;
++
++      --popover: 222.2 84% 4.9%;
++      --popover-foreground: 210 40% 98%;
++
++      --primary: 238 74% 62%;
++      --primary-foreground: 222.2 47.4% 11.2%;
++
++      --secondary: 217.2 32.6% 17.5%;
++      --secondary-foreground: 210 40% 98%;
++
++      --muted: 217.2 32.6% 17.5%;
++      --muted-foreground: 215 20.2% 65.1%;
++
++      --accent: 217.2 32.6% 17.5%;
++      --accent-foreground: 210 40% 98%;
++
++      --destructive: 0 62.8% 30.6%;
++      --destructive-foreground: 210 40% 98%;
++
++      --border: 217.2 32.6% 17.5%;
++      --input: 217.2 32.6% 17.5%;
++      --ring: 238 74% 62%;
++
++      --shadow: 0 0% 0%;
++    }
++  }
++
++  * {
++    @apply border-border;
++  }
++
++  html {
++    color-scheme: light dark;
++  }
+ 
+-.pill {
+-  display: inline-flex;
+-  align-items: center;
+-  padding: 4px 10px;
+-  border-radius: 999px;
+-  font-size: 12px;
+-  background: #e2e8f0;
+-  color: #334155;
++  body {
++    @apply bg-background text-foreground;
++  }
+ }
+diff --git a/app/layout.tsx b/app/layout.tsx
+index 067ca8c..69caa46 100644
+--- a/app/layout.tsx
++++ b/app/layout.tsx
+@@ -1,6 +1,13 @@
+ import "./globals.css";
+ import type { ReactNode } from "react";
+ import { Providers } from "./providers";
++import { Inter } from "next/font/google";
++
++const inter = Inter({
++  subsets: ["latin"],
++  variable: "--font-sans",
++  display: "swap"
++});
+ 
+ export const metadata = {
+   title: "Tax Payment Wizard SaaS",
+@@ -10,7 +17,7 @@ export const metadata = {
+ export default function RootLayout({ children }: { children: ReactNode }) {
+   return (
+     <html lang="en">
+-      <body>
++      <body className={`${inter.variable} min-h-screen bg-background font-sans text-foreground antialiased`}>
+         <Providers>{children}</Providers>
+       </body>
+     </html>
+diff --git a/package.json b/package.json
+index 29faca0..b59e7fb 100644
+--- a/package.json
++++ b/package.json
+@@ -17,19 +17,26 @@
+   },
+   "dependencies": {
+     "@prisma/client": "^5.22.0",
++    "@radix-ui/react-slot": "^1.2.4",
+     "bcrypt": "^5.1.1",
++    "class-variance-authority": "^0.7.1",
++    "clsx": "^2.1.1",
+     "next": "^14.2.5",
+     "next-auth": "^4.24.7",
+     "openai": "^4.0.0",
+     "react": "^18.3.1",
+-    "react-dom": "^18.3.1"
++    "react-dom": "^18.3.1",
++    "tailwind-merge": "^3.4.0"
+   },
+   "devDependencies": {
+     "@types/bcrypt": "^5.0.2",
+     "@types/node": "^20.14.15",
+     "@types/react": "^18.3.4",
+     "@types/react-dom": "^18.3.0",
++    "autoprefixer": "^10.4.23",
++    "postcss": "^8.5.6",
+     "prisma": "^5.22.0",
++    "tailwindcss": "^3.4.19",
+     "tsx": "^4.19.2",
+     "typescript": "^5.5.4"
+   }
+diff --git a/public/tax_payment_wizard_new.html b/public/tax_payment_wizard_new.html
+index 353ea50..945d3b0 100644
+--- a/public/tax_payment_wizard_new.html
++++ b/public/tax_payment_wizard_new.html
+@@ -4,12 +4,27 @@
+   <meta charset="UTF-8" />
+   <title>Tax Payment Wizard (Merged Version)</title>
+   <style>
++    :root {
++      --bg: #f8fafc;
++      --card: #ffffff;
++      --fg: #0f172a;
++      --muted: #64748b;
++      --border: #e2e8f0;
++      --accent: #3b82f6;
++      --accent-hover: #2563eb;
++      --success: #10b981;
++      --success-hover: #059669;
++      --shadow: 0 1px 1px rgba(15, 23, 42, 0.04), 0 10px 30px rgba(15, 23, 42, 0.1);
++    }
++
+     body {
+-      font-family: Arial, sans-serif;
++      font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Inter, Roboto,
++        Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
+       margin: 20px auto;
+       max-width: 100%;
+       padding: 0 10px;
+-      background: #f5f5f5;
++      background: var(--bg);
++      color: var(--fg);
+     }
+     .container {
+       display: grid;
+@@ -41,18 +56,19 @@
+       min-width: 0;
+       padding: 24px;
+       position: relative;
+-      background: #fff;
+-      border-radius: 8px;
+-      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
++      background: var(--card);
++      border: 1px solid var(--border);
++      border-radius: 16px;
++      box-shadow: var(--shadow);
+     }
+     /* Sidebar preview */
+     aside.preview-container {
+       min-width: 0;
+       padding: 32px;
+-      background: #ffffff;
+-      border-radius: 12px;
+-      border: none;
+-      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
++      background: var(--card);
++      border-radius: 16px;
++      border: 1px solid var(--border);
++      box-shadow: var(--shadow);
+       position: sticky;
+       top: 24px;
+       height: fit-content;
+@@ -66,10 +82,11 @@
+       padding: 0;
+       list-style: none;
+       counter-reset: step;
+-      background: #fff;
+-      border-radius: 8px;
++      background: var(--card);
++      border-radius: 14px;
+       padding: 16px;
+-      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
++      border: 1px solid var(--border);
++      box-shadow: 0 1px 1px rgba(15, 23, 42, 0.03), 0 8px 24px rgba(15, 23, 42, 0.08);
+     }
+     .step-progress li {
+       flex: 1;
+@@ -178,20 +195,24 @@
+     }
+     button {
+       padding: 12px 24px;
+-      border: none;
+-      border-radius: 6px;
++      border: 1px solid transparent;
++      border-radius: 10px;
+       cursor: pointer;
+       font-weight: 500;
+       font-size: 14px;
+       line-height: 1.5;
+       transition: all 0.2s ease;
+-      background: #3b82f6;
++      background: var(--accent);
+       color: white;
+     }
+     button:hover {
+-      background: #2563eb;
++      background: var(--accent-hover);
+       transform: translateY(-1px);
+     }
++    button:focus-visible {
++      outline: none;
++      box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.18);
++    }
+     button[type="button"] {
+       background: #64748b;
+     }
+@@ -199,29 +220,29 @@
+       background: #475569;
+     }
+     .primary-button {
+-      background: #10b981;
++      background: var(--success);
+       font-size: 16px;
+       padding: 14px 28px;
+       font-weight: 600;
+     }
+     .primary-button:hover {
+-      background: #059669;
++      background: var(--success-hover);
+     }
+     /* Fieldset styling */
+     fieldset {
+-      border: 1px solid #ddd;
++      border: 1px solid var(--border);
+       padding: 24px;
+       margin-bottom: 24px;
+-      border-radius: 8px;
+-      background: white;
++      border-radius: 14px;
++      background: var(--card);
+     }
+     legend {
+       font-size: 1.2em;
+       font-weight: 600;
+-      background: #007bff;
++      background: var(--accent);
+       color: white;
+       padding: 8px 16px;
+-      border-radius: 4px;
++      border-radius: 10px;
+       display: inline-block;
+       margin-bottom: 15px;
+       box-shadow: 0 1px 3px rgba(0,0,0,0.1);
+@@ -230,7 +251,7 @@
+     }
+     /* ... rest of your existing CSS ... */
+     legend:hover {
+-      background: #0056b3;
++      background: var(--accent-hover);
+     }
+     /* Form fields */
+     .form-field {
+@@ -241,7 +262,7 @@
+       display: block;
+       margin-bottom: 4px;
+       font-weight: 600;
+-      color: #333;
++      color: var(--fg);
+     }
+     .form-field input[type="text"],
+     .form-field input[type="date"],
+@@ -250,18 +271,20 @@
+     .form-field textarea {
+       width: 100%;
+       padding: 12px;
+-      border: 1px solid #ddd;
+-      border-radius: 4px;
++      border: 1px solid var(--border);
++      border-radius: 10px;
+       box-sizing: border-box;
+       font-size: 14px;
+       line-height: 1.5;
++      background: #ffffff;
++      transition: box-shadow 0.15s ease, border-color 0.15s ease;
+     }
+     .form-field input:focus,
+     .form-field select:focus,
+     .form-field textarea:focus {
+-      border-color: #007bff;
++      border-color: var(--accent);
+       outline: none;
+-      box-shadow: 0 0 0 2px rgba(0,123,255,0.25);
++      box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.18);
+     }
+     .form-field.error input,
+     .form-field.error select {
+@@ -773,6 +796,7 @@
+ 	        <button type="button" onclick="exportSessionCsv()">Export CSV</button>
+ 	        <button type="button" onclick="triggerImportCsv()">Import CSV</button>
+ 	        <button type="button" onclick="generateSessionDrafts()">Download Draft Emails (.zip)</button>
++	        <button type="button" onclick="generateChecklistLink()">Generate Checklist Link</button>
+ 	        <button
+ 	          type="button"
+ 	          onclick="reportBug()"
+@@ -2027,6 +2051,7 @@ let currentBatchId = null;
+ let saveTimer = null;
+ let saveInFlight = false;
+ let pendingSave = false;
++let portalUrlsByClientId = {};
+ 
+ /** Map two-letter abbreviations to full state names used in statesData */
+ const STATE_ABBREVIATIONS = {
+@@ -2280,6 +2305,7 @@ async function loadSessionFromServer() {
+   const data = await resp.json().catch(() => ({}));
+   currentBatchId = data?.batchId || null;
+   session = normalizeSessionData(data?.snapshot);
++  portalUrlsByClientId = {};
+ 
+   const nameInput = document.getElementById('sessionNameInput');
+   if (nameInput) {
+@@ -2340,6 +2366,28 @@ function saveSessionToStorage() {
+   queueAutosave();
+ }
+ 
++function waitForSaveCompletion() {
++  return new Promise(resolve => {
++    const timer = setInterval(() => {
++      if (!saveInFlight && !pendingSave) {
++        clearInterval(timer);
++        resolve();
++      }
++    }, 100);
++  });
++}
++
++async function ensureSavedNow() {
++  if (!session) return;
++  if (activeClientId) upsertActiveClientFromForm();
++  if (saveInFlight) {
++    await waitForSaveCompletion();
++    return;
++  }
++  await persistSessionToServer();
++  await waitForSaveCompletion();
++}
++
+ async function newSession() {
+   if (!confirm('Start a new session? This will replace the current session in the browser (you can Save JSON first).')) return;
+   clearAssistantConversation();
+@@ -2356,6 +2404,7 @@ async function newSession() {
+     const data = await resp.json().catch(() => ({}));
+     currentBatchId = data?.batchId || null;
+     session = normalizeSessionData(data?.snapshot);
++    portalUrlsByClientId = {};
+     session.clients = [];
+     activeClientId = null;
+     createNewClient();
+@@ -2914,7 +2963,8 @@ function generateSessionDrafts() {
+     const data = job.data || {};
+     const html = buildEmailHTMLFromData(data, {
+       includeDisclaimers: data.showDisclaimers ?? true,
+-      includePreviewHeader: false
++      includePreviewHeader: false,
++      portalUrl: portalUrlsByClientId[job.clientId] || ''
+     });
+     const subjectDate = formatDueDateForSubject(data.paymentDueDate);
+     const subject = `Tax Payment Instructions - Due ${subjectDate || ''}`;
+@@ -2955,6 +3005,45 @@ function generateSessionDrafts() {
+     });
+ }
+ 
++async function generateChecklistLink() {
++  if (!session || !activeClientId) {
++    alert('Select a client first.');
++    return;
++  }
++
++  try {
++    await ensureSavedNow();
++    if (!currentBatchId) {
++      throw new Error('Missing batch');
++    }
++
++    const resp = await fetch('/api/plans/publish', {
++      method: 'POST',
++      headers: { 'Content-Type': 'application/json' },
++      body: JSON.stringify({
++        batchId: currentBatchId,
++        wizardClientId: activeClientId
++      })
++    });
++
++    if (!resp.ok) {
++      throw new Error(`Publish failed (${resp.status})`);
++    }
++
++    const data = await resp.json().catch(() => ({}));
++    if (!data?.portalUrl) {
++      throw new Error('Missing portal URL');
++    }
++
++    portalUrlsByClientId[activeClientId] = data.portalUrl;
++    regeneratePreviewHTML();
++    alert(`Checklist link generated:\n${data.portalUrl}`);
++  } catch (e) {
++    console.error(e);
++    alert('Unable to generate checklist link. Please try again.');
++  }
++}
++
+ function syncSessionAfterChange(options = {}) {
+   if (!session) return;
+   upsertActiveClientFromForm();
+@@ -4484,6 +4573,7 @@ function buildEmailHTMLFromData(data, options = {}) {
+   const dateStr = escapeHTML(formatDueDateForSubject(data.paymentDueDate));
+   const addressee = escapeHTML(data.addresseeName || '');
+   const sender = escapeHTML(data.senderName || '');
++  const portalUrl = safeUrl(options.portalUrl || '');
+ 
+   const greetingText = options.greeting != null
+     ? String(options.greeting)
+@@ -4528,6 +4618,10 @@ function buildEmailHTMLFromData(data, options = {}) {
+     html += `<br>`;
+   }
+ 
++  if (portalUrl) {
++    html += `View and confirm your payments here: <a href="${portalUrl}" target="_blank" rel="noopener noreferrer">Open checklist</a><br><br>`;
++  }
++
+   if (Array.isArray(data.federalPayments) && data.federalPayments.length) {
+     data.federalPayments.forEach(p => {
+       html += buildFederalPaymentSectionForData(p, data);
+@@ -4591,7 +4685,8 @@ function buildEmailHTML() {
+     greeting,
+     personalNote,
+     includeDisclaimers: formData.showDisclaimers,
+-    includePreviewHeader: true
++    includePreviewHeader: true,
++    portalUrl: portalUrlsByClientId[activeClientId] || ''
+   });
+ }
+ 
+diff --git a/app/app/SignOutButton.tsx b/app/app/SignOutButton.tsx
+deleted file mode 100644
+index 33609d4..0000000
+--- a/app/app/SignOutButton.tsx
++++ /dev/null
+@@ -1,11 +0,0 @@
+-"use client";
+-
+-import { signOut } from "next-auth/react";
+-
+-export function SignOutButton() {
+-  return (
+-    <button className="btn secondary" type="button" onClick={() => signOut()}>
+-      Sign out
+-    </button>
+-  );
+-}
+diff --git a/app/app/actions.ts b/app/app/actions.ts
+deleted file mode 100644
+index acf9ef5..0000000
+--- a/app/app/actions.ts
++++ /dev/null
+@@ -1,25 +0,0 @@
+-"use server";
+-
+-import { redirect } from "next/navigation";
+-import { getServerAuthSession } from "@/lib/auth";
+-import { prisma } from "@/lib/prisma";
+-import { createEmptySession } from "@/lib/wizard-session";
+-
+-export async function createNewBatch() {
+-  const session = await getServerAuthSession();
+-  const userId = session?.user?.id;
+-  if (!userId) {
+-    redirect("/login");
+-  }
+-
+-  const snapshot = createEmptySession();
+-  await prisma.batch.create({
+-    data: {
+-      userId,
+-      name: `New Batch ${new Date().toLocaleDateString()}`,
+-      snapshotJson: snapshot
+-    }
+-  });
+-
+-  redirect("/wizard");
+-}
+diff --git a/app/app/page.tsx b/app/app/page.tsx
+deleted file mode 100644
+index 627b18f..0000000
+--- a/app/app/page.tsx
++++ /dev/null
+@@ -1,121 +0,0 @@
+-import Link from "next/link";
+-import { redirect } from "next/navigation";
+-import { getServerAuthSession } from "@/lib/auth";
+-import { prisma } from "@/lib/prisma";
+-import { createNewBatch } from "./actions";
+-import { SignOutButton } from "./SignOutButton";
+-
+-export const dynamic = "force-dynamic";
+-
+-export default async function AppPage() {
+-  const session = await getServerAuthSession();
+-  const userId = session?.user?.id;
+-
+-  if (!userId) {
+-    redirect("/login?next=/app");
+-  }
+-
+-  const [batches, clients] = await Promise.all([
+-    prisma.batch.findMany({
+-      where: { userId },
+-      orderBy: { updatedAt: "desc" },
+-      take: 5
+-    }),
+-    prisma.client.findMany({
+-      where: { userId },
+-      orderBy: { updatedAt: "desc" },
+-      take: 8
+-    })
+-  ]);
+-
+-  return (
+-    <main style={{ display: "grid", gap: 24 }}>
+-      <div
+-        className="card"
+-        style={{ display: "flex", justifyContent: "space-between", gap: 16 }}
+-      >
+-        <div>
+-          <h1 style={{ margin: 0 }}>Dashboard</h1>
+-          <p style={{ margin: "6px 0 0", color: "#64748b" }}>
+-            Signed in as {session?.user?.email}
+-          </p>
+-        </div>
+-        <div className="btn-row">
+-          <Link className="btn" href="/wizard">
+-            Open Wizard
+-          </Link>
+-          <form action={createNewBatch}>
+-            <button className="btn secondary" type="submit">
+-              Create New Batch
+-            </button>
+-          </form>
+-          <SignOutButton />
+-        </div>
+-      </div>
+-
+-      <div className="card" style={{ display: "grid", gap: 16 }}>
+-        <div>
+-          <h2 style={{ margin: 0 }}>Recent batches</h2>
+-          <p style={{ marginTop: 6, color: "#64748b" }}>
+-            Track the latest batch activity and jump back into the wizard.
+-          </p>
+-        </div>
+-        {batches.length ? (
+-          <table className="table">
+-            <thead>
+-              <tr>
+-                <th>Batch name</th>
+-                <th>Last updated</th>
+-              </tr>
+-            </thead>
+-            <tbody>
+-              {batches.map((batch) => (
+-                <tr key={batch.id}>
+-                  <td>{batch.name}</td>
+-                  <td>{batch.updatedAt.toLocaleString()}</td>
+-                </tr>
+-              ))}
+-            </tbody>
+-          </table>
+-        ) : (
+-          <p style={{ color: "#64748b" }}>
+-            No batches yet. Create one to start saving wizard sessions.
+-          </p>
+-        )}
+-      </div>
+-
+-      <div className="card" style={{ display: "grid", gap: 16 }}>
+-        <div>
+-          <h2 style={{ margin: 0 }}>Clients</h2>
+-          <p style={{ marginTop: 6, color: "#64748b" }}>
+-            Recently edited clients synced from your wizard runs.
+-          </p>
+-        </div>
+-        {clients.length ? (
+-          <table className="table">
+-            <thead>
+-              <tr>
+-                <th>Client</th>
+-                <th>Entity type</th>
+-              </tr>
+-            </thead>
+-            <tbody>
+-              {clients.map((client) => (
+-                <tr key={client.id}>
+-                  <td>{client.name || client.addresseeName || "Unnamed"}</td>
+-                  <td>
+-                    <span className="pill">{client.entityType || "Unknown"}</span>
+-                  </td>
+-                </tr>
+-              ))}
+-            </tbody>
+-          </table>
+-        ) : (
+-          <p style={{ color: "#64748b" }}>
+-            Clients will appear here after you save runs in the wizard.
+-          </p>
+-        )}
+-      </div>
+-    </main>
+-  );
+-}
+diff --git a/app/login/LoginForm.tsx b/app/login/LoginForm.tsx
+deleted file mode 100644
+index b1d206c..0000000
+--- a/app/login/LoginForm.tsx
++++ /dev/null
+@@ -1,65 +0,0 @@
+-"use client";
+-
+-import { signIn } from "next-auth/react";
+-import { useRouter, useSearchParams } from "next/navigation";
+-import { useState } from "react";
+-
+-export function LoginForm() {
+-  const router = useRouter();
+-  const searchParams = useSearchParams();
+-  const next = searchParams.get("next") || "/app";
+-  const [email, setEmail] = useState("");
+-  const [password, setPassword] = useState("");
+-  const [error, setError] = useState<string | null>(null);
+-  const [loading, setLoading] = useState(false);
+-
+-  async function handleSubmit(event: React.FormEvent) {
+-    event.preventDefault();
+-    setLoading(true);
+-    setError(null);
+-
+-    const result = await signIn("credentials", {
+-      redirect: false,
+-      email,
+-      password,
+-      callbackUrl: next
+-    });
+-
+-    setLoading(false);
+-
+-    if (result?.error) {
+-      setError("Invalid email or password.");
+-      return;
+-    }
+-
+-    router.push(next);
+-  }
+-
+-  return (
+-    <form onSubmit={handleSubmit} className="card">
+-      <h1 style={{ marginTop: 0 }}>Log in</h1>
+-      <label>
+-        Email
+-        <input
+-          type="email"
+-          required
+-          value={email}
+-          onChange={(event) => setEmail(event.target.value)}
+-        />
+-      </label>
+-      <label>
+-        Password
+-        <input
+-          type="password"
+-          required
+-          value={password}
+-          onChange={(event) => setPassword(event.target.value)}
+-        />
+-      </label>
+-      {error ? <p style={{ color: "#dc2626" }}>{error}</p> : null}
+-      <button className="btn" type="submit" disabled={loading}>
+-        {loading ? "Signing in..." : "Sign in"}
+-      </button>
+-    </form>
+-  );
+-}
+diff --git a/app/login/page.tsx b/app/login/page.tsx
+deleted file mode 100644
+index 6e9a187..0000000
+--- a/app/login/page.tsx
++++ /dev/null
+@@ -1,16 +0,0 @@
+-import Link from "next/link";
+-import { Suspense } from "react";
+-import { LoginForm } from "./LoginForm";
+-
+-export default function LoginPage() {
+-  return (
+-    <main style={{ display: "grid", gap: 24 }}>
+-      <Suspense fallback={null}>
+-        <LoginForm />
+-      </Suspense>
+-      <p style={{ textAlign: "center", color: "#64748b" }}>
+-        Need an account? <Link href="/register">Create one</Link>
+-      </p>
+-    </main>
+-  );
+-}
+diff --git a/app/page.tsx b/app/page.tsx
+deleted file mode 100644
+index 23c4f43..0000000
+--- a/app/page.tsx
++++ /dev/null
+@@ -1,25 +0,0 @@
+-import Link from "next/link";
+-
+-export default function HomePage() {
+-  return (
+-    <main>
+-      <div className="card" style={{ display: "grid", gap: 24 }}>
+-        <div>
+-          <h1 style={{ margin: 0, fontSize: 32 }}>Tax Payment Wizard</h1>
+-          <p style={{ color: "#475569", marginTop: 12 }}>
+-            A secure workspace for accountants to build payment schedules, generate
+-            client drafts, and collaborate across batches.
+-          </p>
+-        </div>
+-        <div className="btn-row">
+-          <Link className="btn" href="/login">
+-            Log in
+-          </Link>
+-          <Link className="btn secondary" href="/register">
+-            Create account
+-          </Link>
+-        </div>
+-      </div>
+-    </main>
+-  );
+-}
+diff --git a/app/register/RegisterForm.tsx b/app/register/RegisterForm.tsx
+deleted file mode 100644
+index 911cd6b..0000000
+--- a/app/register/RegisterForm.tsx
++++ /dev/null
+@@ -1,71 +0,0 @@
+-"use client";
+-
+-import { signIn } from "next-auth/react";
+-import { useRouter } from "next/navigation";
+-import { useState } from "react";
+-
+-export function RegisterForm() {
+-  const router = useRouter();
+-  const [email, setEmail] = useState("");
+-  const [password, setPassword] = useState("");
+-  const [error, setError] = useState<string | null>(null);
+-  const [loading, setLoading] = useState(false);
+-
+-  async function handleSubmit(event: React.FormEvent) {
+-    event.preventDefault();
+-    setLoading(true);
+-    setError(null);
+-
+-    const resp = await fetch("/api/register", {
+-      method: "POST",
+-      headers: { "Content-Type": "application/json" },
+-      body: JSON.stringify({ email, password })
+-    });
+-
+-    if (!resp.ok) {
+-      const data = await resp.json().catch(() => ({}));
+-      setError(data?.error || "Unable to create account.");
+-      setLoading(false);
+-      return;
+-    }
+-
+-    await signIn("credentials", {
+-      redirect: false,
+-      email,
+-      password,
+-      callbackUrl: "/app"
+-    });
+-
+-    setLoading(false);
+-    router.push("/app");
+-  }
+-
+-  return (
+-    <form onSubmit={handleSubmit} className="card">
+-      <h1 style={{ marginTop: 0 }}>Create account</h1>
+-      <label>
+-        Email
+-        <input
+-          type="email"
+-          required
+-          value={email}
+-          onChange={(event) => setEmail(event.target.value)}
+-        />
+-      </label>
+-      <label>
+-        Password
+-        <input
+-          type="password"
+-          required
+-          minLength={8}
+-          value={password}
+-          onChange={(event) => setPassword(event.target.value)}
+-        />
+-      </label>
+-      {error ? <p style={{ color: "#dc2626" }}>{error}</p> : null}
+-      <button className="btn" type="submit" disabled={loading}>
+-        {loading ? "Creating..." : "Create account"}
+-      </button>
+-    </form>
+-  );
+-}
+diff --git a/app/register/page.tsx b/app/register/page.tsx
+deleted file mode 100644
+index 067737e..0000000
+--- a/app/register/page.tsx
++++ /dev/null
+@@ -1,13 +0,0 @@
+-import Link from "next/link";
+-import { RegisterForm } from "./RegisterForm";
+-
+-export default function RegisterPage() {
+-  return (
+-    <main style={{ display: "grid", gap: 24 }}>
+-      <RegisterForm />
+-      <p style={{ textAlign: "center", color: "#64748b" }}>
+-        Already have an account? <Link href="/login">Log in</Link>
+-      </p>
+-    </main>
+-  );
+-}
+diff --git a/app/wizard/page.tsx b/app/wizard/page.tsx
+deleted file mode 100644
+index 2073948..0000000
+--- a/app/wizard/page.tsx
++++ /dev/null
+@@ -1,14 +0,0 @@
+-import { redirect } from "next/navigation";
+-import { getServerAuthSession } from "@/lib/auth";
+-
+-export const dynamic = "force-dynamic";
+-
+-export default async function WizardPage() {
+-  const session = await getServerAuthSession();
+-
+-  if (!session?.user?.id) {
+-    redirect("/login?next=/wizard");
+-  }
+-
+-  redirect("/tax_payment_wizard_new.html");
+-}
+diff --git a/app/(app)/AppNav.tsx b/app/(app)/AppNav.tsx
+new file mode 100644
+index 0000000..29cbc2c
+--- /dev/null
++++ b/app/(app)/AppNav.tsx
+@@ -0,0 +1,45 @@
++"use client";
++
++import Link from "next/link";
++import { usePathname } from "next/navigation";
++import { Button } from "@/components/ui/button";
++import { cn } from "@/lib/utils";
++
++const NAV_ITEMS = [
++  { href: "/app", label: "Dashboard" },
++  { href: "/app/payments", label: "Payments" },
++  { href: "/wizard", label: "Wizard" }
++];
++
++export function AppNav() {
++  const pathname = usePathname();
++
++  return (
++    <nav className="hidden items-center gap-1 sm:flex">
++      {NAV_ITEMS.map((item) => {
++        const isActive =
++          item.href === "/app"
++            ? pathname === "/app"
++            : item.href === "/wizard"
++              ? pathname === "/wizard"
++              : pathname.startsWith(item.href);
++
++        return (
++          <Button
++            key={item.href}
++            asChild
++            variant="ghost"
++            size="sm"
++            className={cn(
++              "text-muted-foreground hover:text-foreground",
++              isActive && "bg-muted text-foreground hover:bg-muted"
++            )}
++          >
++            <Link href={item.href}>{item.label}</Link>
++          </Button>
++        );
++      })}
++    </nav>
++  );
++}
++
+
+diff --git a/app/(app)/app/SignOutButton.tsx b/app/(app)/app/SignOutButton.tsx
+new file mode 100644
+index 0000000..f081dd6
+--- /dev/null
++++ b/app/(app)/app/SignOutButton.tsx
+@@ -0,0 +1,12 @@
++"use client";
++
++import { signOut } from "next-auth/react";
++import { Button } from "@/components/ui/button";
++
++export function SignOutButton() {
++  return (
++    <Button variant="outline" type="button" onClick={() => signOut()}>
++      Sign out
++    </Button>
++  );
++}
+
+diff --git a/app/(app)/app/actions.ts b/app/(app)/app/actions.ts
+new file mode 100644
+index 0000000..acf9ef5
+--- /dev/null
++++ b/app/(app)/app/actions.ts
+@@ -0,0 +1,25 @@
++"use server";
++
++import { redirect } from "next/navigation";
++import { getServerAuthSession } from "@/lib/auth";
++import { prisma } from "@/lib/prisma";
++import { createEmptySession } from "@/lib/wizard-session";
++
++export async function createNewBatch() {
++  const session = await getServerAuthSession();
++  const userId = session?.user?.id;
++  if (!userId) {
++    redirect("/login");
++  }
++
++  const snapshot = createEmptySession();
++  await prisma.batch.create({
++    data: {
++      userId,
++      name: `New Batch ${new Date().toLocaleDateString()}`,
++      snapshotJson: snapshot
++    }
++  });
++
++  redirect("/wizard");
++}
+
+diff --git a/app/(app)/app/page.tsx b/app/(app)/app/page.tsx
+new file mode 100644
+index 0000000..4ce4c31
+--- /dev/null
++++ b/app/(app)/app/page.tsx
+@@ -0,0 +1,143 @@
++import Link from "next/link";
++import { redirect } from "next/navigation";
++import { getServerAuthSession } from "@/lib/auth";
++import { prisma } from "@/lib/prisma";
++import { createNewBatch } from "./actions";
++import { Badge } from "@/components/ui/badge";
++import { Button } from "@/components/ui/button";
++import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
++import { Separator } from "@/components/ui/separator";
++import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from "@/components/ui/table";
++
++export const dynamic = "force-dynamic";
++
++export default async function AppPage() {
++  const session = await getServerAuthSession();
++  const userId = session?.user?.id;
++
++  if (!userId) {
++    redirect("/login?next=/app");
++  }
++
++  const [batches, clients] = await Promise.all([
++    prisma.batch.findMany({
++      where: { userId },
++      orderBy: { updatedAt: "desc" },
++      take: 5
++    }),
++    prisma.client.findMany({
++      where: { userId },
++      orderBy: { updatedAt: "desc" },
++      take: 8
++    })
++  ]);
++
++  return (
++    <div className="grid gap-8">
++      <Card className="relative overflow-hidden bg-card/70 backdrop-blur">
++        <div
++          aria-hidden
++          className="absolute inset-0 bg-[radial-gradient(70%_60%_at_10%_0%,hsl(var(--primary)_/_0.18),transparent_70%)]"
++        />
++        <CardHeader className="relative space-y-0">
++          <div className="flex flex-col gap-5 sm:flex-row sm:items-end sm:justify-between">
++            <div className="space-y-2">
++              <p className="text-xs font-medium uppercase tracking-[0.18em] text-muted-foreground">
++                Dashboard
++              </p>
++              <CardTitle className="text-2xl sm:text-3xl">Welcome back</CardTitle>
++              <CardDescription>Signed in as {session?.user?.email}</CardDescription>
++            </div>
++            <div className="flex flex-wrap gap-2">
++              <Button asChild>
++                <Link href="/wizard">Open wizard</Link>
++              </Button>
++              <Button asChild variant="outline">
++                <Link href="/app/payments">View payments</Link>
++              </Button>
++              <form action={createNewBatch}>
++                <Button variant="secondary" type="submit">
++                  New batch
++                </Button>
++              </form>
++            </div>
++          </div>
++        </CardHeader>
++      </Card>
++
++      <div className="grid gap-6 lg:grid-cols-2">
++        <Card className="overflow-hidden">
++          <CardHeader>
++            <CardTitle>Recent batches</CardTitle>
++            <CardDescription>Track the latest batch activity and jump back into the wizard.</CardDescription>
++          </CardHeader>
++          <Separator />
++          <CardContent className="p-0">
++            {batches.length ? (
++              <Table>
++                <TableHeader>
++                  <TableRow>
++                    <TableHead>Batch name</TableHead>
++                    <TableHead className="w-[200px]">Last updated</TableHead>
++                  </TableRow>
++                </TableHeader>
++                <TableBody>
++                  {batches.map((batch) => (
++                    <TableRow key={batch.id}>
++                      <TableCell className="font-medium">{batch.name}</TableCell>
++                      <TableCell className="text-muted-foreground">{batch.updatedAt.toLocaleString()}</TableCell>
++                    </TableRow>
++                  ))}
++                </TableBody>
++              </Table>
++            ) : (
++              <div className="p-10">
++                <div className="rounded-2xl border border-dashed bg-muted/20 p-10 text-center text-sm text-muted-foreground">
++                  No batches yet. Create one to start saving wizard sessions.
++                </div>
++              </div>
++            )}
++          </CardContent>
++        </Card>
++
++        <Card className="overflow-hidden">
++          <CardHeader>
++            <CardTitle>Clients</CardTitle>
++            <CardDescription>Recently edited clients synced from your wizard runs.</CardDescription>
++          </CardHeader>
++          <Separator />
++          <CardContent className="p-0">
++            {clients.length ? (
++              <Table>
++                <TableHeader>
++                  <TableRow>
++                    <TableHead>Client</TableHead>
++                    <TableHead className="w-[180px]">Entity type</TableHead>
++                  </TableRow>
++                </TableHeader>
++                <TableBody>
++                  {clients.map((client) => (
++                    <TableRow key={client.id}>
++                      <TableCell className="font-medium">
++                        {client.name || client.addresseeName || "Unnamed"}
++                      </TableCell>
++                      <TableCell>
++                        <Badge variant="secondary">{client.entityType || "Unknown"}</Badge>
++                      </TableCell>
++                    </TableRow>
++                  ))}
++                </TableBody>
++              </Table>
++            ) : (
++              <div className="p-10">
++                <div className="rounded-2xl border border-dashed bg-muted/20 p-10 text-center text-sm text-muted-foreground">
++                  Clients will appear here after you save runs in the wizard.
++                </div>
++              </div>
++            )}
++          </CardContent>
++        </Card>
++      </div>
++    </div>
++  );
++}
+
+diff --git a/app/(app)/app/payments/BulkChecklistActions.tsx b/app/(app)/app/payments/BulkChecklistActions.tsx
+new file mode 100644
+index 0000000..f548354
+--- /dev/null
++++ b/app/(app)/app/payments/BulkChecklistActions.tsx
+@@ -0,0 +1,170 @@
++"use client";
++
++import { useMemo, useState } from "react";
++import { Badge } from "@/components/ui/badge";
++import { Button } from "@/components/ui/button";
++import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
++import { Separator } from "@/components/ui/separator";
++import { Textarea } from "@/components/ui/textarea";
++
++type RunSummary = {
++  runId: string;
++  clientLabel: string;
++};
++
++type LinkResult = RunSummary & {
++  portalUrl?: string;
++  error?: string;
++};
++
++export function BulkChecklistActions({ runs }: { runs: RunSummary[] }) {
++  const [results, setResults] = useState<LinkResult[]>([]);
++  const [loading, setLoading] = useState(false);
++  const [completed, setCompleted] = useState(0);
++  const [copySuccess, setCopySuccess] = useState(false);
++  const [error, setError] = useState<string | null>(null);
++
++  const successLinks = useMemo(
++    () => results.filter((result) => result.portalUrl),
++    [results]
++  );
++  const progressPercent = runs.length ? Math.min((completed / runs.length) * 100, 100) : 0;
++
++  async function generateAll() {
++    if (!runs.length || loading) return;
++    setLoading(true);
++    setCompleted(0);
++    setResults([]);
++    setCopySuccess(false);
++    setError(null);
++
++    const generated = await Promise.all(
++      runs.map(async (run) => {
++        try {
++          const response = await fetch("/api/plans/publish-by-run", {
++            method: "POST",
++            headers: { "Content-Type": "application/json" },
++            body: JSON.stringify({ runId: run.runId })
++          });
++
++          if (!response.ok) {
++            const payload = await response.json().catch(() => ({}));
++            throw new Error(payload?.error || "Unable to generate link.");
++          }
++
++          const payload = await response.json().catch(() => ({}));
++          if (!payload?.portalUrl) {
++            throw new Error("Missing portal URL.");
++          }
++
++          return { ...run, portalUrl: payload.portalUrl };
++        } catch (err) {
++          return {
++            ...run,
++            error: err instanceof Error ? err.message : "Unable to generate link."
++          };
++        } finally {
++          setCompleted((prev) => prev + 1);
++        }
++      })
++    );
++
++    setResults(generated);
++    setLoading(false);
++  }
++
++  async function copyAll() {
++    if (!successLinks.length) {
++      setError("No links to copy yet.");
++      return;
++    }
++    const payload = successLinks.map((result) => result.portalUrl).join("\n");
++    try {
++      await navigator.clipboard.writeText(payload);
++      setCopySuccess(true);
++      setTimeout(() => setCopySuccess(false), 2000);
++    } catch {
++      setError("Copy failed. Please copy manually.");
++    }
++  }
++
++  return (
++    <Card className="bg-card/70 backdrop-blur">
++      <CardHeader>
++        <div className="flex flex-wrap items-start justify-between gap-3">
++          <div className="space-y-1">
++            <CardTitle>Checklist links</CardTitle>
++            <CardDescription>Generate portal links for the rows currently in view.</CardDescription>
++          </div>
++          <div className="flex flex-wrap gap-2">
++            <Badge variant="secondary" className="bg-secondary/70">
++              {runs.length} run{runs.length === 1 ? "" : "s"}
++            </Badge>
++            {results.length ? (
++              <Badge variant="secondary" className="bg-secondary/70">
++                {successLinks.length} success
++              </Badge>
++            ) : null}
++          </div>
++        </div>
++      </CardHeader>
++      <Separator />
++      <CardContent className="grid gap-4 pt-6">
++        <div className="flex flex-wrap items-center gap-3">
++          <Button type="button" onClick={generateAll} disabled={loading || !runs.length}>
++            {loading ? `Generating ${completed}/${runs.length}` : "Generate links"}
++          </Button>
++          <Button
++            variant="outline"
++            type="button"
++            onClick={copyAll}
++            disabled={!successLinks.length}
++          >
++            {copySuccess ? "Copied!" : "Copy all"}
++          </Button>
++          <span className="text-sm text-muted-foreground">
++            {runs.length
++              ? `${runs.length} client${runs.length === 1 ? "" : "s"} in view`
++              : "No rows to generate"}
++          </span>
++        </div>
++
++        {loading ? (
++          <div className="grid gap-2">
++            <div className="h-2 overflow-hidden rounded-full bg-muted">
++              <div className="h-full bg-primary transition-all" style={{ width: `${progressPercent}%` }} />
++            </div>
++            <p className="text-xs text-muted-foreground">
++              Generating links… {completed}/{runs.length}
++            </p>
++          </div>
++        ) : null}
++
++        {results.length > 0 ? (
++          <Textarea
++            rows={Math.min(10, Math.max(3, results.length))}
++            readOnly
++            value={results
++              .map((result) =>
++                result.portalUrl
++                  ? `${result.clientLabel}: ${result.portalUrl}`
++                  : `${result.clientLabel}: ${result.error || "Failed"}`
++              )
++              .join("\n")}
++            className="bg-background font-mono text-xs"
++          />
++        ) : (
++          <div className="rounded-2xl border border-dashed bg-muted/15 p-6 text-sm text-muted-foreground">
++            Generate links, then copy them into an email or your task system.
++          </div>
++        )}
++
++        {error ? (
++          <div className="rounded-md border border-destructive/20 bg-destructive/10 px-3 py-2 text-sm text-destructive">
++            {error}
++          </div>
++        ) : null}
++      </CardContent>
++    </Card>
++  );
++}
+
+diff --git a/app/(app)/app/payments/PortalLinkActions.tsx b/app/(app)/app/payments/PortalLinkActions.tsx
+new file mode 100644
+index 0000000..1da5ffc
+--- /dev/null
++++ b/app/(app)/app/payments/PortalLinkActions.tsx
+@@ -0,0 +1,112 @@
++"use client";
++
++import { useRef, useState } from "react";
++import { Button } from "@/components/ui/button";
++import { Input } from "@/components/ui/input";
++import { Label } from "@/components/ui/label";
++
++type PortalLinkActionsProps = {
++  runId: string;
++  clientLabel: string;
++};
++
++export function PortalLinkActions({ runId, clientLabel }: PortalLinkActionsProps) {
++  const [portalUrl, setPortalUrl] = useState<string | null>(null);
++  const [loading, setLoading] = useState(false);
++  const [error, setError] = useState<string | null>(null);
++  const [copySuccess, setCopySuccess] = useState(false);
++  const [autoOpen, setAutoOpen] = useState(false);
++  const copyTimerRef = useRef<ReturnType<typeof setTimeout> | null>(null);
++
++  async function generateLink() {
++    setLoading(true);
++    setError(null);
++    try {
++      const response = await fetch("/api/plans/publish-by-run", {
++        method: "POST",
++        headers: { "Content-Type": "application/json" },
++        body: JSON.stringify({ runId })
++      });
++
++      if (!response.ok) {
++        const payload = await response.json().catch(() => ({}));
++        throw new Error(payload?.error || "Unable to generate link.");
++      }
++
++      const payload = await response.json().catch(() => ({}));
++      if (!payload?.portalUrl) {
++        throw new Error("Missing portal URL.");
++      }
++
++      setPortalUrl(payload.portalUrl);
++      if (autoOpen) {
++        window.open(payload.portalUrl, "_blank", "noopener,noreferrer");
++      }
++    } catch (err) {
++      setError(err instanceof Error ? err.message : "Unable to generate link.");
++    } finally {
++      setLoading(false);
++    }
++  }
++
++  async function copyLink() {
++    if (!portalUrl) return;
++    try {
++      await navigator.clipboard.writeText(portalUrl);
++      setCopySuccess(true);
++      if (copyTimerRef.current) {
++        clearTimeout(copyTimerRef.current);
++      }
++      copyTimerRef.current = setTimeout(() => {
++        setCopySuccess(false);
++      }, 2000);
++    } catch {
++      setError("Copy failed. Please copy the link manually.");
++    }
++  }
++
++  return (
++    <div className="grid gap-2">
++      <div className="flex flex-wrap items-center gap-2">
++        <Button variant="outline" size="sm" type="button" onClick={generateLink} disabled={loading}>
++          {loading ? "Generating..." : portalUrl ? "Regenerate" : "Generate"}
++        </Button>
++        <Button size="sm" type="button" onClick={copyLink} disabled={!portalUrl}>
++          {copySuccess ? "Copied" : "Copy"}
++        </Button>
++        {portalUrl ? (
++          <Button asChild size="sm" variant="secondary">
++            <a href={portalUrl} target="_blank" rel="noreferrer">
++              Open
++            </a>
++          </Button>
++        ) : null}
++      </div>
++
++      {portalUrl ? (
++        <Input type="text" readOnly value={portalUrl} className="h-9 text-xs" />
++      ) : (
++        <p className="text-xs text-muted-foreground">Generate a checklist link for {clientLabel}.</p>
++      )}
++
++      <div className="flex items-center gap-2">
++        <input
++          id={`auto-open-${runId}`}
++          type="checkbox"
++          checked={autoOpen}
++          onChange={(event) => setAutoOpen(event.target.checked)}
++          className="h-4 w-4 rounded border-input text-primary accent-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 ring-offset-background"
++        />
++        <Label htmlFor={`auto-open-${runId}`} className="text-xs font-normal text-muted-foreground">
++          Auto-open after generate
++        </Label>
++      </div>
++
++      {error ? (
++        <div className="rounded-md border border-destructive/20 bg-destructive/10 px-2.5 py-2 text-xs text-destructive">
++          {error}
++        </div>
++      ) : null}
++    </div>
++  );
++}
+
+diff --git a/app/(app)/app/payments/page.tsx b/app/(app)/app/payments/page.tsx
+new file mode 100644
+index 0000000..bf33dd1
+--- /dev/null
++++ b/app/(app)/app/payments/page.tsx
+@@ -0,0 +1,281 @@
++import { redirect } from "next/navigation";
++import { getServerAuthSession } from "@/lib/auth";
++import { prisma } from "@/lib/prisma";
++import { PortalLinkActions } from "./PortalLinkActions";
++import { BulkChecklistActions } from "./BulkChecklistActions";
++import { Badge } from "@/components/ui/badge";
++import { Button } from "@/components/ui/button";
++import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
++import { Label } from "@/components/ui/label";
++import { Select } from "@/components/ui/select";
++import { Separator } from "@/components/ui/separator";
++import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from "@/components/ui/table";
++import { PaymentTaskStatus } from "@prisma/client";
++
++export const dynamic = "force-dynamic";
++
++const STATUS_OPTIONS: PaymentTaskStatus[] = [
++  PaymentTaskStatus.DRAFT,
++  PaymentTaskStatus.SENT,
++  PaymentTaskStatus.VIEWED,
++  PaymentTaskStatus.CONFIRMED,
++  PaymentTaskStatus.VERIFIED,
++  PaymentTaskStatus.OVERDUE,
++  PaymentTaskStatus.CANCELLED
++];
++
++function isPaymentStatus(value: string): value is PaymentTaskStatus {
++  return STATUS_OPTIONS.includes(value as PaymentTaskStatus);
++}
++
++function formatCurrency(amount: number | null) {
++  if (!amount) return "—";
++  return new Intl.NumberFormat("en-US", { style: "currency", currency: "USD" }).format(amount);
++}
++
++function statusBadge(status: string) {
++  switch (status) {
++    case "CONFIRMED":
++    case "VERIFIED":
++      return <Badge variant="success">{status}</Badge>;
++    case "VIEWED":
++      return <Badge variant="info">{status}</Badge>;
++    case "OVERDUE":
++      return <Badge variant="destructive">{status}</Badge>;
++    case "CANCELLED":
++      return (
++        <Badge variant="outline" className="text-muted-foreground">
++          {status}
++        </Badge>
++      );
++    case "DRAFT":
++    case "SENT":
++    default:
++      return <Badge variant="secondary">{status}</Badge>;
++  }
++}
++
++export default async function PaymentsPage({
++  searchParams
++}: {
++  searchParams?: Record<string, string | string[] | undefined>;
++}) {
++  const session = await getServerAuthSession();
++  const userId = session?.user?.id;
++
++  if (!userId) {
++    redirect("/login?next=/app/payments");
++  }
++
++  const rangeParam = Array.isArray(searchParams?.range) ? searchParams?.range[0] : searchParams?.range;
++  const statusParam = Array.isArray(searchParams?.status) ? searchParams?.status[0] : searchParams?.status;
++  const rangeDays = Math.max(Number(rangeParam || 30), 1);
++  const statusFilter = statusParam && isPaymentStatus(statusParam) ? statusParam : undefined;
++
++  const endDate = new Date();
++  endDate.setDate(endDate.getDate() + rangeDays);
++
++  const payments = await prisma.payment.findMany({
++    where: {
++      userId,
++      dueDate: { lte: endDate },
++      ...(statusFilter ? { status: statusFilter } : {})
++    },
++    include: {
++      run: {
++        include: {
++          client: true
++        }
++      }
++    },
++    orderBy: [{ dueDate: "asc" }, { sortOrder: "asc" }]
++  });
++
++  const runSummaries = Array.from(
++    payments.reduce((map, payment) => {
++      if (!map.has(payment.runId)) {
++        map.set(payment.runId, {
++          runId: payment.runId,
++          clientLabel: payment.run.client?.name || payment.run.client?.addresseeName || "Client"
++        });
++      }
++      return map;
++    }, new Map<string, { runId: string; clientLabel: string }>())
++  ).map(([, value]) => value);
++
++  const totalPayments = payments.length;
++  const confirmedPayments = payments.filter((payment) =>
++    ["CONFIRMED", "VERIFIED"].includes(payment.status)
++  ).length;
++  const overduePayments = payments.filter((payment) => payment.status === "OVERDUE").length;
++  const dueSoonPayments = payments.filter((payment) => {
++    if (!payment.dueDate) return false;
++    if (["CONFIRMED", "VERIFIED", "CANCELLED"].includes(payment.status)) return false;
++    const daysUntil = (payment.dueDate.getTime() - Date.now()) / (1000 * 60 * 60 * 24);
++    return daysUntil >= 0 && daysUntil <= 7;
++  }).length;
++  const totalAmount = payments.reduce(
++    (sum, payment) => sum + (payment.amount ? Number(payment.amount) : 0),
++    0
++  );
++
++  return (
++    <div className="grid gap-8">
++      <div className="flex flex-col gap-4 sm:flex-row sm:items-end sm:justify-between">
++        <div className="space-y-2">
++          <p className="text-xs font-medium uppercase tracking-[0.18em] text-muted-foreground">
++            Payments board
++          </p>
++          <h1 className="text-2xl font-semibold tracking-tight sm:text-3xl">Payments</h1>
++          <p className="text-sm text-muted-foreground">
++            Filter upcoming estimated payments and publish client checklist links in bulk.
++          </p>
++        </div>
++        <div className="flex flex-wrap gap-2">
++          <Badge variant="secondary" className="bg-secondary/70">
++            Due ≤ {rangeDays} days
++          </Badge>
++          <Badge variant="secondary" className="bg-secondary/70">
++            {statusFilter ? `Status: ${statusFilter}` : "All statuses"}
++          </Badge>
++        </div>
++      </div>
++
++      <div className="grid gap-4 sm:grid-cols-2 lg:grid-cols-4">
++        <Card className="bg-card/70 backdrop-blur">
++          <CardHeader className="pb-3">
++            <CardDescription>Payments in view</CardDescription>
++            <CardTitle className="text-2xl tabular-nums">{totalPayments}</CardTitle>
++          </CardHeader>
++        </Card>
++        <Card className="bg-card/70 backdrop-blur">
++          <CardHeader className="pb-3">
++            <CardDescription>Due soon (7 days)</CardDescription>
++            <CardTitle className="text-2xl tabular-nums">{dueSoonPayments}</CardTitle>
++          </CardHeader>
++        </Card>
++        <Card className="bg-card/70 backdrop-blur">
++          <CardHeader className="pb-3">
++            <CardDescription>Overdue</CardDescription>
++            <CardTitle className="text-2xl tabular-nums">{overduePayments}</CardTitle>
++          </CardHeader>
++        </Card>
++        <Card className="bg-card/70 backdrop-blur">
++          <CardHeader className="pb-3">
++            <CardDescription>Total amount</CardDescription>
++            <CardTitle className="text-2xl tabular-nums">{formatCurrency(totalAmount)}</CardTitle>
++          </CardHeader>
++        </Card>
++      </div>
++
++      <div className="grid gap-6 lg:grid-cols-[1.05fr_0.95fr] lg:items-start">
++        <Card className="bg-card/70 backdrop-blur">
++          <CardHeader>
++            <CardTitle>Filters</CardTitle>
++            <CardDescription>Control the rows shown in the board.</CardDescription>
++          </CardHeader>
++          <Separator />
++          <CardContent className="pt-6">
++            <form method="get" className="grid gap-4 sm:grid-cols-[1fr_1fr_auto] sm:items-end">
++              <div className="grid gap-2">
++                <Label htmlFor="range">Due in (days)</Label>
++                <Select id="range" name="range" defaultValue={String(rangeDays)}>
++                  <option value="7">7</option>
++                  <option value="14">14</option>
++                  <option value="30">30</option>
++                  <option value="90">90</option>
++                </Select>
++              </div>
++              <div className="grid gap-2">
++                <Label htmlFor="status">Status</Label>
++                <Select id="status" name="status" defaultValue={statusFilter}>
++                  <option value="">All</option>
++                  {STATUS_OPTIONS.map((status) => (
++                    <option key={status} value={status}>
++                      {status}
++                    </option>
++                  ))}
++                </Select>
++              </div>
++              <Button type="submit">Apply filters</Button>
++            </form>
++          </CardContent>
++        </Card>
++
++        <BulkChecklistActions runs={runSummaries} />
++      </div>
++
++      <Card className="overflow-hidden">
++        <CardHeader className="flex flex-row flex-wrap items-center justify-between gap-3">
++          <div>
++            <CardTitle>Payments</CardTitle>
++            <CardDescription>
++              {confirmedPayments} confirmed • {Math.max(totalPayments - confirmedPayments, 0)} remaining
++            </CardDescription>
++          </div>
++          <Badge variant="secondary" className="bg-secondary/70">
++            {totalPayments} rows
++          </Badge>
++        </CardHeader>
++        <Separator />
++        <CardContent className="p-0">
++          {payments.length ? (
++            <Table>
++              <TableHeader className="bg-card/60 backdrop-blur supports-[backdrop-filter]:bg-card/40">
++                <TableRow>
++                  <TableHead className="sticky top-0 bg-background/90 backdrop-blur">Due date</TableHead>
++                  <TableHead className="sticky top-0 bg-background/90 backdrop-blur">Client</TableHead>
++                  <TableHead className="sticky top-0 bg-background/90 backdrop-blur">Scope</TableHead>
++                  <TableHead className="sticky top-0 bg-background/90 backdrop-blur text-right">Amount</TableHead>
++                  <TableHead className="sticky top-0 bg-background/90 backdrop-blur">Status</TableHead>
++                  <TableHead className="sticky top-0 bg-background/90 backdrop-blur">Confirmed</TableHead>
++                  <TableHead className="sticky top-0 bg-background/90 backdrop-blur">Checklist</TableHead>
++                </TableRow>
++              </TableHeader>
++              <TableBody>
++                {payments.map((payment) => (
++                  <TableRow key={payment.id} className="odd:bg-muted/20">
++                    <TableCell className="whitespace-nowrap font-medium">
++                      {payment.dueDate ? payment.dueDate.toLocaleDateString() : "—"}
++                    </TableCell>
++                    <TableCell>
++                      {payment.run.client?.name || payment.run.client?.addresseeName || "Client"}
++                    </TableCell>
++                    <TableCell className="whitespace-nowrap">
++                      {payment.scope}
++                      {payment.stateCode ? ` (${payment.stateCode})` : ""}
++                    </TableCell>
++                    <TableCell className="whitespace-nowrap text-right tabular-nums">
++                      {formatCurrency(payment.amount ? Number(payment.amount) : null)}
++                    </TableCell>
++                    <TableCell>{statusBadge(payment.status)}</TableCell>
++                    <TableCell className="whitespace-nowrap text-muted-foreground">
++                      {payment.confirmedAt ? payment.confirmedAt.toLocaleDateString() : "—"}
++                    </TableCell>
++                    <TableCell className="min-w-[280px]">
++                      <PortalLinkActions
++                        runId={payment.runId}
++                        clientLabel={
++                          payment.run.client?.name || payment.run.client?.addresseeName || "Client"
++                        }
++                      />
++                    </TableCell>
++                  </TableRow>
++                ))}
++              </TableBody>
++            </Table>
++          ) : (
++            <div className="p-10">
++              <div className="rounded-2xl border border-dashed bg-muted/20 p-10 text-center">
++                <p className="text-sm font-medium">No payments found</p>
++                <p className="mt-2 text-sm text-muted-foreground">
++                  No payments match the selected filters yet.
++                </p>
++              </div>
++            </div>
++          )}
++        </CardContent>
++      </Card>
++    </div>
++  );
++}
+
+diff --git a/app/(app)/layout.tsx b/app/(app)/layout.tsx
+new file mode 100644
+index 0000000..dab5ce1
+--- /dev/null
++++ b/app/(app)/layout.tsx
+@@ -0,0 +1,37 @@
++import type { ReactNode } from "react";
++import Link from "next/link";
++import { getServerAuthSession } from "@/lib/auth";
++import { SignOutButton } from "./app/SignOutButton";
++import { AppNav } from "./AppNav";
++
++export default async function AppLayout({ children }: { children: ReactNode }) {
++  const session = await getServerAuthSession();
++
++  return (
++    <div className="min-h-screen bg-gradient-to-b from-background to-muted/30">
++      <header className="sticky top-0 z-50 border-b bg-background/80 backdrop-blur">
++        <div className="mx-auto flex max-w-6xl items-center justify-between px-4 py-3">
++          <div className="flex items-center gap-3">
++            <Link href="/app" className="flex items-center gap-2">
++              <div className="flex h-9 w-9 items-center justify-center rounded-2xl bg-primary text-primary-foreground shadow-soft">
++                <span className="text-xs font-semibold tracking-tight">TP</span>
++              </div>
++              <span className="hidden text-sm font-semibold sm:inline">Tax Payment Wizard</span>
++            </Link>
++
++            <AppNav />
++          </div>
++
++          <div className="flex items-center gap-3">
++            {session?.user?.email ? (
++              <span className="hidden text-sm text-muted-foreground md:inline">{session.user.email}</span>
++            ) : null}
++            <SignOutButton />
++          </div>
++        </div>
++      </header>
++
++      <main className="mx-auto w-full max-w-6xl px-4 py-8">{children}</main>
++    </div>
++  );
++}
+
+diff --git a/app/(app)/wizard/page.tsx b/app/(app)/wizard/page.tsx
+new file mode 100644
+index 0000000..2073948
+--- /dev/null
++++ b/app/(app)/wizard/page.tsx
+@@ -0,0 +1,14 @@
++import { redirect } from "next/navigation";
++import { getServerAuthSession } from "@/lib/auth";
++
++export const dynamic = "force-dynamic";
++
++export default async function WizardPage() {
++  const session = await getServerAuthSession();
++
++  if (!session?.user?.id) {
++    redirect("/login?next=/wizard");
++  }
++
++  redirect("/tax_payment_wizard_new.html");
++}
+
+diff --git a/app/(marketing)/layout.tsx b/app/(marketing)/layout.tsx
+new file mode 100644
+index 0000000..238b8ac
+--- /dev/null
++++ b/app/(marketing)/layout.tsx
+@@ -0,0 +1,69 @@
++import type { ReactNode } from "react";
++import Link from "next/link";
++import { Button } from "@/components/ui/button";
++
++export default function MarketingLayout({ children }: { children: ReactNode }) {
++  return (
++    <div className="min-h-screen bg-background">
++      <div aria-hidden className="pointer-events-none fixed inset-0 -z-10">
++        <div className="absolute inset-x-0 top-[-220px] h-[520px] bg-[radial-gradient(60%_60%_at_50%_0%,hsl(var(--primary)_/_0.20),transparent_65%)]" />
++        <div className="absolute inset-0 opacity-30 [mask-image:radial-gradient(ellipse_at_top,black,transparent_70%)] bg-[linear-gradient(to_bottom,hsl(var(--foreground)_/_0.04)_1px,transparent_1px),linear-gradient(to_right,hsl(var(--foreground)_/_0.04)_1px,transparent_1px)] bg-[size:44px_44px]" />
++      </div>
++
++      <header className="sticky top-0 z-50 border-b bg-background/70 backdrop-blur">
++        <div className="mx-auto flex max-w-6xl items-center justify-between px-4 py-3">
++          <Link href="/" className="flex items-center gap-3">
++            <div className="flex h-10 w-10 items-center justify-center rounded-2xl bg-primary text-primary-foreground shadow-soft">
++              <span className="text-sm font-semibold tracking-tight">TP</span>
++            </div>
++            <div className="leading-tight">
++              <p className="text-sm font-semibold">Tax Payment Wizard</p>
++              <p className="text-xs text-muted-foreground">Schedules, drafts, confirmations</p>
++            </div>
++          </Link>
++
++          <nav className="hidden items-center gap-1 md:flex">
++            <Button asChild variant="ghost" size="sm">
++              <Link href="/#features">Features</Link>
++            </Button>
++            <Button asChild variant="ghost" size="sm">
++              <Link href="/#workflow">Workflow</Link>
++            </Button>
++            <Button asChild variant="ghost" size="sm">
++              <Link href="/#security">Security</Link>
++            </Button>
++          </nav>
++
++          <div className="flex items-center gap-2">
++            <Button asChild variant="ghost">
++              <Link href="/login">Log in</Link>
++            </Button>
++            <Button asChild>
++              <Link href="/register">Create account</Link>
++            </Button>
++          </div>
++        </div>
++      </header>
++
++      <main className="mx-auto w-full max-w-6xl px-4 py-10">{children}</main>
++
++      <footer className="border-t bg-background/60">
++        <div className="mx-auto flex max-w-6xl flex-col gap-3 px-4 py-8 text-sm text-muted-foreground sm:flex-row sm:items-center sm:justify-between">
++          <p>Built for calm, repeatable tax workflows.</p>
++          <div className="flex flex-wrap gap-x-4 gap-y-2">
++            <Link className="hover:text-foreground" href="/#security">
++              Security
++            </Link>
++            <Link className="hover:text-foreground" href="/#features">
++              Features
++            </Link>
++            <Link className="hover:text-foreground" href="/login">
++              Log in
++            </Link>
++          </div>
++        </div>
++      </footer>
++    </div>
++  );
++}
++
+
+diff --git a/app/(marketing)/login/LoginForm.tsx b/app/(marketing)/login/LoginForm.tsx
+new file mode 100644
+index 0000000..5bdbd62
+--- /dev/null
++++ b/app/(marketing)/login/LoginForm.tsx
+@@ -0,0 +1,88 @@
++"use client";
++
++import { signIn } from "next-auth/react";
++import { useRouter, useSearchParams } from "next/navigation";
++import { useState } from "react";
++import { Button } from "@/components/ui/button";
++import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
++import { Input } from "@/components/ui/input";
++import { Label } from "@/components/ui/label";
++
++export function LoginForm() {
++  const router = useRouter();
++  const searchParams = useSearchParams();
++  const next = searchParams.get("next") || "/app";
++  const [email, setEmail] = useState("");
++  const [password, setPassword] = useState("");
++  const [error, setError] = useState<string | null>(null);
++  const [loading, setLoading] = useState(false);
++
++  async function handleSubmit(event: React.FormEvent) {
++    event.preventDefault();
++    setLoading(true);
++    setError(null);
++
++    const result = await signIn("credentials", {
++      redirect: false,
++      email,
++      password,
++      callbackUrl: next
++    });
++
++    setLoading(false);
++
++    if (result?.error) {
++      setError("Invalid email or password.");
++      return;
++    }
++
++    router.push(next);
++  }
++
++  return (
++    <Card className="bg-card/80 shadow-soft backdrop-blur">
++      <CardHeader>
++        <CardTitle>Log in</CardTitle>
++        <CardDescription>Access your dashboard and payments board.</CardDescription>
++      </CardHeader>
++      <CardContent>
++        <form onSubmit={handleSubmit} className="grid gap-4">
++          <div className="grid gap-2">
++            <Label htmlFor="email">Email</Label>
++            <Input
++              id="email"
++              type="email"
++              autoComplete="email"
++              required
++              value={email}
++              onChange={(event) => setEmail(event.target.value)}
++              disabled={loading}
++            />
++          </div>
++          <div className="grid gap-2">
++            <Label htmlFor="password">Password</Label>
++            <Input
++              id="password"
++              type="password"
++              autoComplete="current-password"
++              required
++              value={password}
++              onChange={(event) => setPassword(event.target.value)}
++              disabled={loading}
++            />
++          </div>
++
++          {error ? (
++            <div className="rounded-md border border-destructive/20 bg-destructive/10 px-3 py-2 text-sm text-destructive">
++              {error}
++            </div>
++          ) : null}
++
++          <Button type="submit" disabled={loading} className="w-full">
++            {loading ? "Signing in..." : "Sign in"}
++          </Button>
++        </form>
++      </CardContent>
++    </Card>
++  );
++}
+
+diff --git a/app/(marketing)/login/page.tsx b/app/(marketing)/login/page.tsx
+new file mode 100644
+index 0000000..98b0be8
+--- /dev/null
++++ b/app/(marketing)/login/page.tsx
+@@ -0,0 +1,56 @@
++import Link from "next/link";
++import { Suspense } from "react";
++import { LoginForm } from "./LoginForm";
++import { Badge } from "@/components/ui/badge";
++
++export default function LoginPage() {
++  return (
++    <div className="grid gap-10 lg:grid-cols-2 lg:items-center">
++      <div className="space-y-5">
++        <Badge variant="secondary" className="w-fit bg-secondary/70">
++          Welcome back
++        </Badge>
++        <div className="space-y-2">
++          <h1 className="text-3xl font-semibold tracking-tight sm:text-4xl">Sign in</h1>
++          <p className="text-muted-foreground">
++            Open your dashboard to manage batches, publish checklists, and track confirmations.
++          </p>
++        </div>
++
++        <div className="grid gap-3">
++          {[
++            {
++              title: "Payments board",
++              description: "Filter by due date and status with a clean, readable table."
++            },
++            {
++              title: "Client checklist portal",
++              description: "Generate a secure link clients can use to confirm payments."
++            },
++            {
++              title: "Consistent UI",
++              description: "Cards, forms, and tables that feel cohesive across the app."
++            }
++          ].map((item) => (
++            <div key={item.title} className="rounded-2xl border bg-card/60 p-4 backdrop-blur">
++              <p className="text-sm font-medium">{item.title}</p>
++              <p className="mt-1 text-sm text-muted-foreground">{item.description}</p>
++            </div>
++          ))}
++        </div>
++      </div>
++
++      <div className="w-full max-w-md space-y-6 lg:justify-self-end">
++        <Suspense fallback={null}>
++          <LoginForm />
++        </Suspense>
++        <p className="text-center text-sm text-muted-foreground">
++          Need an account?{" "}
++          <Link className="font-medium text-primary underline-offset-4 hover:underline" href="/register">
++            Create one
++          </Link>
++        </p>
++      </div>
++    </div>
++  );
++}
+
+diff --git a/app/(marketing)/page.tsx b/app/(marketing)/page.tsx
+new file mode 100644
+index 0000000..941fc89
+--- /dev/null
++++ b/app/(marketing)/page.tsx
+@@ -0,0 +1,194 @@
++import Link from "next/link";
++import { Badge } from "@/components/ui/badge";
++import { Button } from "@/components/ui/button";
++import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
++
++const FEATURES = [
++  {
++    title: "Batch-first workflow",
++    description: "Save wizard sessions into batches, then revisit and reuse them without starting from scratch."
++  },
++  {
++    title: "Client checklist portal",
++    description: "Publish a secure checklist link so clients can confirm payments after they submit."
++  },
++  {
++    title: "Payments board",
++    description: "Filter by due window and status, then generate portal links in bulk for the rows in view."
++  },
++  {
++    title: "Clean, minimal UI",
++    description: "Soft surfaces, consistent components, and accessible focus states—no UI noise."
++  },
++  {
++    title: "Secure by default",
++    description: "Credentials auth via NextAuth. Data stored in Postgres via Prisma."
++  },
++  {
++    title: "Built for speed",
++    description: "App Router + server components where it matters for crisp navigation and fast pages."
++  }
++];
++
++export default function HomePage() {
++  return (
++    <div className="grid gap-16">
++      <section className="grid items-center gap-10 lg:grid-cols-[1.15fr_0.85fr]">
++        <div>
++          <Badge variant="secondary" className="mb-4 w-fit bg-secondary/70">
++            Minimal, secure, fast
++          </Badge>
++          <h1 className="text-balance text-4xl font-semibold tracking-tight sm:text-5xl">
++            Tax payment schedules, without the chaos.
++          </h1>
++          <p className="mt-4 text-balance text-base text-muted-foreground sm:text-lg">
++            Build payment schedules, generate client drafts, and track confirmations—across batches—without
++            losing the thread.
++          </p>
++
++          <div className="mt-8 flex flex-wrap gap-3">
++            <Button asChild size="lg">
++              <Link href="/register">Create account</Link>
++            </Button>
++            <Button asChild size="lg" variant="outline">
++              <Link href="/login">Log in</Link>
++            </Button>
++          </div>
++          <p className="mt-3 text-sm text-muted-foreground">
++            Credentials auth via NextAuth. Data stored in Postgres via Prisma.
++          </p>
++        </div>
++
++        <Card className="relative overflow-hidden">
++          <div
++            aria-hidden
++            className="absolute inset-0 bg-[radial-gradient(70%_60%_at_50%_0%,hsl(var(--primary)_/_0.18),transparent_70%)]"
++          />
++          <CardHeader className="relative">
++            <CardTitle>Payments board</CardTitle>
++            <CardDescription>Filter by due window and status. Generate portal links in bulk.</CardDescription>
++          </CardHeader>
++          <CardContent className="relative">
++            <div className="grid gap-3">
++              {[
++                { label: "Jan 15", client: "Acme LLC", status: "DUE SOON" },
++                { label: "Jan 31", client: "Northwind Inc", status: "SENT" },
++                { label: "Feb 15", client: "Client", status: "CONFIRMED" },
++                { label: "Apr 15", client: "Client", status: "DRAFT" }
++              ].map((row) => (
++                <div
++                  key={`${row.label}-${row.client}`}
++                  className="flex items-center justify-between gap-3 rounded-xl border bg-card/70 px-4 py-3"
++                >
++                  <div className="min-w-0">
++                    <p className="text-sm font-medium">{row.client}</p>
++                    <p className="text-xs text-muted-foreground">Due {row.label}</p>
++                  </div>
++                  <span className="shrink-0 rounded-full bg-muted px-2.5 py-1 text-xs font-medium text-muted-foreground">
++                    {row.status}
++                  </span>
++                </div>
++              ))}
++            </div>
++          </CardContent>
++        </Card>
++      </section>
++
++      <section id="features" className="grid gap-6">
++        <div className="max-w-2xl">
++          <h2 className="text-2xl font-semibold tracking-tight sm:text-3xl">
++            A calmer workflow for accounting teams
++          </h2>
++          <p className="mt-2 text-muted-foreground">
++            Polished UI, consistent components, and thoughtful defaults—designed to reduce friction.
++          </p>
++        </div>
++
++        <div className="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
++          {FEATURES.map((feature) => (
++            <Card key={feature.title} className="bg-card/70 backdrop-blur">
++              <CardHeader className="space-y-1">
++                <CardTitle className="text-base">{feature.title}</CardTitle>
++                <CardDescription className="text-sm">{feature.description}</CardDescription>
++              </CardHeader>
++            </Card>
++          ))}
++        </div>
++      </section>
++
++      <section id="workflow" className="grid items-start gap-6 lg:grid-cols-2">
++        <Card className="bg-card/70 backdrop-blur">
++          <CardHeader>
++            <CardTitle>From wizard → to dashboard</CardTitle>
++            <CardDescription>
++              Build schedules in the legacy wizard, then track outcomes in a modern board.
++            </CardDescription>
++          </CardHeader>
++          <CardContent className="grid gap-3 text-sm text-muted-foreground">
++            <div className="rounded-xl border bg-background/60 px-4 py-3">
++              Save a wizard run into a batch.
++            </div>
++            <div className="rounded-xl border bg-background/60 px-4 py-3">
++              Publish a portal checklist link per client.
++            </div>
++            <div className="rounded-xl border bg-background/60 px-4 py-3">
++              Clients confirm payments; you see status updates.
++            </div>
++          </CardContent>
++        </Card>
++
++        <Card className="bg-card/70 backdrop-blur">
++          <CardHeader>
++            <CardTitle>Designed for focus</CardTitle>
++            <CardDescription>
++              Generous spacing, soft surfaces, and clear hierarchy for day-to-day use.
++            </CardDescription>
++          </CardHeader>
++          <CardContent className="grid gap-3 text-sm text-muted-foreground">
++            <div className="rounded-xl border bg-background/60 px-4 py-3">
++              Better empty states and table readability.
++            </div>
++            <div className="rounded-xl border bg-background/60 px-4 py-3">
++              Clear labels and helper text for forms.
++            </div>
++            <div className="rounded-xl border bg-background/60 px-4 py-3">
++              Subtle hover/focus states with accessible contrast.
++            </div>
++          </CardContent>
++        </Card>
++      </section>
++
++      <section id="security" className="rounded-3xl border bg-card/70 p-8 shadow-soft backdrop-blur">
++        <div className="grid gap-6 lg:grid-cols-[1.25fr_0.75fr] lg:items-center">
++          <div>
++            <h2 className="text-2xl font-semibold tracking-tight">Security that doesn’t get in the way</h2>
++            <p className="mt-2 text-muted-foreground">
++              Auth stays locked down, protected routes stay protected, and the client portal keeps sharing
++              simple.
++            </p>
++          </div>
++          <div className="flex flex-wrap gap-2">
++            <Badge variant="secondary" className="bg-secondary/70">
++              NextAuth Credentials
++            </Badge>
++            <Badge variant="secondary" className="bg-secondary/70">
++              Prisma + Postgres
++            </Badge>
++            <Badge variant="secondary" className="bg-secondary/70">
++              Protected middleware
++            </Badge>
++          </div>
++        </div>
++
++        <div className="mt-8 flex flex-wrap gap-3">
++          <Button asChild size="lg">
++            <Link href="/register">Get started</Link>
++          </Button>
++          <Button asChild size="lg" variant="outline">
++            <Link href="/login">Log in</Link>
++          </Button>
++        </div>
++      </section>
++    </div>
++  );
++}
+
+diff --git a/app/(marketing)/register/RegisterForm.tsx b/app/(marketing)/register/RegisterForm.tsx
+new file mode 100644
+index 0000000..41ed2c9
+--- /dev/null
++++ b/app/(marketing)/register/RegisterForm.tsx
+@@ -0,0 +1,95 @@
++"use client";
++
++import { signIn } from "next-auth/react";
++import { useRouter } from "next/navigation";
++import { useState } from "react";
++import { Button } from "@/components/ui/button";
++import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
++import { Input } from "@/components/ui/input";
++import { Label } from "@/components/ui/label";
++
++export function RegisterForm() {
++  const router = useRouter();
++  const [email, setEmail] = useState("");
++  const [password, setPassword] = useState("");
++  const [error, setError] = useState<string | null>(null);
++  const [loading, setLoading] = useState(false);
++
++  async function handleSubmit(event: React.FormEvent) {
++    event.preventDefault();
++    setLoading(true);
++    setError(null);
++
++    const resp = await fetch("/api/register", {
++      method: "POST",
++      headers: { "Content-Type": "application/json" },
++      body: JSON.stringify({ email, password })
++    });
++
++    if (!resp.ok) {
++      const data = await resp.json().catch(() => ({}));
++      setError(data?.error || "Unable to create account.");
++      setLoading(false);
++      return;
++    }
++
++    await signIn("credentials", {
++      redirect: false,
++      email,
++      password,
++      callbackUrl: "/app"
++    });
++
++    setLoading(false);
++    router.push("/app");
++  }
++
++  return (
++    <Card className="bg-card/80 shadow-soft backdrop-blur">
++      <CardHeader>
++        <CardTitle>Create account</CardTitle>
++        <CardDescription>Set up your secure workspace in under a minute.</CardDescription>
++      </CardHeader>
++      <CardContent>
++        <form onSubmit={handleSubmit} className="grid gap-4">
++          <div className="grid gap-2">
++            <Label htmlFor="email">Email</Label>
++            <Input
++              id="email"
++              type="email"
++              autoComplete="email"
++              required
++              value={email}
++              onChange={(event) => setEmail(event.target.value)}
++              disabled={loading}
++            />
++          </div>
++          <div className="grid gap-2">
++            <Label htmlFor="password">Password</Label>
++            <Input
++              id="password"
++              type="password"
++              autoComplete="new-password"
++              required
++              minLength={8}
++              value={password}
++              onChange={(event) => setPassword(event.target.value)}
++              disabled={loading}
++            />
++            <p className="text-xs text-muted-foreground">Minimum 8 characters.</p>
++          </div>
++
++          {error ? (
++            <div className="rounded-md border border-destructive/20 bg-destructive/10 px-3 py-2 text-sm text-destructive">
++              {error}
++            </div>
++          ) : null}
++
++          <Button type="submit" disabled={loading} className="w-full">
++            {loading ? "Creating..." : "Create account"}
++          </Button>
++        </form>
++      </CardContent>
++    </Card>
++  );
++}
+
+diff --git a/app/(marketing)/register/page.tsx b/app/(marketing)/register/page.tsx
+new file mode 100644
+index 0000000..bab740b
+--- /dev/null
++++ b/app/(marketing)/register/page.tsx
+@@ -0,0 +1,53 @@
++import Link from "next/link";
++import { RegisterForm } from "./RegisterForm";
++import { Badge } from "@/components/ui/badge";
++
++export default function RegisterPage() {
++  return (
++    <div className="grid gap-10 lg:grid-cols-2 lg:items-center">
++      <div className="space-y-5">
++        <Badge variant="secondary" className="w-fit bg-secondary/70">
++          Get started
++        </Badge>
++        <div className="space-y-2">
++          <h1 className="text-3xl font-semibold tracking-tight sm:text-4xl">Create your workspace</h1>
++          <p className="text-muted-foreground">
++            Create an account to start building schedules, publishing checklists, and tracking payments.
++          </p>
++        </div>
++
++        <div className="grid gap-3">
++          {[
++            {
++              title: "Modern UI on top of your existing wizard",
++              description: "Keep the legacy wizard logic, but get a clean dashboard for the rest."
++            },
++            {
++              title: "Better visibility for due dates",
++              description: "Use the payments board to stay ahead of upcoming deadlines."
++            },
++            {
++              title: "Client-friendly confirmations",
++              description: "A simple portal so clients can mark payments as paid."
++            }
++          ].map((item) => (
++            <div key={item.title} className="rounded-2xl border bg-card/60 p-4 backdrop-blur">
++              <p className="text-sm font-medium">{item.title}</p>
++              <p className="mt-1 text-sm text-muted-foreground">{item.description}</p>
++            </div>
++          ))}
++        </div>
++      </div>
++
++      <div className="w-full max-w-md space-y-6 lg:justify-self-end">
++        <RegisterForm />
++        <p className="text-center text-sm text-muted-foreground">
++          Already have an account?{" "}
++          <Link className="font-medium text-primary underline-offset-4 hover:underline" href="/login">
++            Log in
++          </Link>
++        </p>
++      </div>
++    </div>
++  );
++}
+
+diff --git a/app/(portal)/layout.tsx b/app/(portal)/layout.tsx
+new file mode 100644
+index 0000000..2b22908
+--- /dev/null
++++ b/app/(portal)/layout.tsx
+@@ -0,0 +1,27 @@
++import type { ReactNode } from "react";
++import Link from "next/link";
++
++export default function PortalLayout({ children }: { children: ReactNode }) {
++  return (
++    <div className="min-h-screen bg-background">
++      <div aria-hidden className="pointer-events-none fixed inset-0 -z-10">
++        <div className="absolute inset-x-0 top-[-220px] h-[520px] bg-[radial-gradient(60%_60%_at_50%_0%,hsl(var(--primary)_/_0.16),transparent_70%)]" />
++      </div>
++
++      <header className="border-b bg-background/75 backdrop-blur">
++        <div className="mx-auto flex max-w-4xl items-center justify-between px-4 py-3">
++          <Link href="/" className="flex items-center gap-2">
++            <div className="flex h-9 w-9 items-center justify-center rounded-2xl bg-primary text-primary-foreground shadow-soft">
++              <span className="text-xs font-semibold tracking-tight">TP</span>
++            </div>
++            <span className="text-sm font-semibold">Tax Payment Wizard</span>
++          </Link>
++          <p className="text-xs text-muted-foreground">Secure client portal</p>
++        </div>
++      </header>
++
++      <main className="mx-auto w-full max-w-4xl px-4 py-10">{children}</main>
++    </div>
++  );
++}
++
+
+diff --git a/app/(portal)/p/[token]/ClientChecklist.tsx b/app/(portal)/p/[token]/ClientChecklist.tsx
+new file mode 100644
+index 0000000..84ab617
+--- /dev/null
++++ b/app/(portal)/p/[token]/ClientChecklist.tsx
+@@ -0,0 +1,272 @@
++"use client";
++
++import { useMemo, useState } from "react";
++import { useRouter } from "next/navigation";
++import { Badge } from "@/components/ui/badge";
++import { Button } from "@/components/ui/button";
++import { Card, CardContent, CardHeader } from "@/components/ui/card";
++import { Input } from "@/components/ui/input";
++import { Label } from "@/components/ui/label";
++import { Textarea } from "@/components/ui/textarea";
++import { cn } from "@/lib/utils";
++
++type PaymentRow = {
++  id: string;
++  scope: string;
++  stateCode: string | null;
++  paymentType: string;
++  dueDate: string | null;
++  amount: string | null;
++  status: string;
++};
++
++type FormState = {
++  email: string;
++  paidDate: string;
++  paidAmount: string;
++  confirmationNumber: string;
++  note: string;
++};
++
++const EMPTY_FORM: FormState = {
++  email: "",
++  paidDate: "",
++  paidAmount: "",
++  confirmationNumber: "",
++  note: ""
++};
++
++function formatAmount(amount: string | null) {
++  if (!amount) return "—";
++  const numeric = Number(amount);
++  if (!Number.isFinite(numeric)) return amount;
++  return new Intl.NumberFormat("en-US", { style: "currency", currency: "USD" }).format(numeric);
++}
++
++function formatStatus(status: string) {
++  if (!status) return "Unknown";
++  const label = status.toLowerCase().replace(/_/g, " ");
++  return label.charAt(0).toUpperCase() + label.slice(1);
++}
++
++function statusBadge(status: string) {
++  const label = formatStatus(status);
++  switch (status) {
++    case "CONFIRMED":
++    case "VERIFIED":
++      return <Badge variant="success">{label}</Badge>;
++    case "VIEWED":
++      return <Badge variant="info">{label}</Badge>;
++    case "OVERDUE":
++      return <Badge variant="destructive">{label}</Badge>;
++    case "CANCELLED":
++      return (
++        <Badge variant="outline" className="text-muted-foreground">
++          {label}
++        </Badge>
++      );
++    case "DRAFT":
++    case "SENT":
++    default:
++      return <Badge variant="secondary">{label}</Badge>;
++  }
++}
++
++export function ClientChecklist({
++  token,
++  payments
++}: {
++  token: string;
++  payments: PaymentRow[];
++  clientName?: string;
++}) {
++  const router = useRouter();
++  const [activePaymentId, setActivePaymentId] = useState<string | null>(null);
++  const [formState, setFormState] = useState<FormState>(EMPTY_FORM);
++  const [submitting, setSubmitting] = useState(false);
++  const [error, setError] = useState<string | null>(null);
++
++  const activePayment = useMemo(
++    () => payments.find((payment) => payment.id === activePaymentId) || null,
++    [activePaymentId, payments]
++  );
++
++  function openForm(payment: PaymentRow) {
++    setActivePaymentId(payment.id);
++    setFormState({
++      ...EMPTY_FORM,
++      paidAmount: payment.amount || ""
++    });
++    setError(null);
++  }
++
++  function closeForm() {
++    setActivePaymentId(null);
++    setFormState(EMPTY_FORM);
++    setError(null);
++  }
++
++  async function submitConfirmation() {
++    if (!activePayment) return;
++    setSubmitting(true);
++    setError(null);
++
++    try {
++      const response = await fetch(`/api/p/${token}/confirm`, {
++        method: "POST",
++        headers: { "Content-Type": "application/json" },
++        body: JSON.stringify({
++          paymentId: activePayment.id,
++          email: formState.email,
++          paidDate: formState.paidDate || undefined,
++          paidAmount: formState.paidAmount || undefined,
++          confirmationNumber: formState.confirmationNumber || undefined,
++          note: formState.note || undefined
++        })
++      });
++
++      if (!response.ok) {
++        const payload = await response.json().catch(() => ({}));
++        throw new Error(payload?.error || "Unable to confirm payment.");
++      }
++
++      closeForm();
++      router.refresh();
++    } catch (submitError) {
++      setError(submitError instanceof Error ? submitError.message : "Unable to confirm payment.");
++    } finally {
++      setSubmitting(false);
++    }
++  }
++
++  return (
++    <section className="grid gap-4">
++      {payments.map((payment) => {
++        const isPaid = ["CONFIRMED", "VERIFIED"].includes(payment.status);
++        const isCancelled = payment.status === "CANCELLED";
++        const scopeLabel =
++          payment.scope === "state"
++            ? `State${payment.stateCode ? ` ${payment.stateCode}` : ""}`
++            : "Federal";
++
++        return (
++          <Card
++            key={payment.id}
++            className={cn(
++              "overflow-hidden bg-card/70 backdrop-blur transition-colors",
++              activePaymentId === payment.id ? "ring-1 ring-primary/20" : "hover:bg-card/80"
++            )}
++          >
++            <CardHeader className="space-y-0">
++              <div className="flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between">
++                <div className="space-y-1">
++                  <div className="flex flex-wrap items-center gap-2">
++                    <p className="text-base font-semibold leading-none tracking-tight">{scopeLabel}</p>
++                    <p className="text-sm text-muted-foreground">{payment.paymentType}</p>
++                  </div>
++                  <div className="flex flex-wrap gap-x-6 gap-y-1 text-sm text-muted-foreground">
++                    <span>
++                      Due: <span className="text-foreground">{payment.dueDate || "—"}</span>
++                    </span>
++                    <span>
++                      Amount:{" "}
++                      <span className="text-foreground tabular-nums">{formatAmount(payment.amount)}</span>
++                    </span>
++                  </div>
++                </div>
++
++                <div className="flex flex-wrap items-center gap-2">
++                  {statusBadge(payment.status)}
++                  {!isPaid && !isCancelled && (
++                    <Button type="button" size="sm" onClick={() => openForm(payment)}>
++                      Mark as paid
++                    </Button>
++                  )}
++                  {isPaid && <span className="text-sm text-muted-foreground">Confirmed</span>}
++                  {isCancelled && <span className="text-sm text-muted-foreground">Cancelled</span>}
++                </div>
++              </div>
++            </CardHeader>
++
++            {activePaymentId === payment.id && (
++              <CardContent className="pt-0">
++                <div className="grid gap-4 rounded-lg border bg-muted/10 p-4">
++                  <div className="grid gap-4 sm:grid-cols-2">
++                    <div className="grid gap-2">
++                      <Label htmlFor={`email-${payment.id}`}>Your email</Label>
++                      <Input
++                        id={`email-${payment.id}`}
++                        type="email"
++                        value={formState.email}
++                        onChange={(event) => setFormState({ ...formState, email: event.target.value })}
++                        required
++                        disabled={submitting}
++                      />
++                    </div>
++                    <div className="grid gap-2">
++                      <Label htmlFor={`paid-date-${payment.id}`}>Paid date (optional)</Label>
++                      <Input
++                        id={`paid-date-${payment.id}`}
++                        type="date"
++                        value={formState.paidDate}
++                        onChange={(event) => setFormState({ ...formState, paidDate: event.target.value })}
++                        disabled={submitting}
++                      />
++                    </div>
++                    <div className="grid gap-2">
++                      <Label htmlFor={`paid-amount-${payment.id}`}>Paid amount (optional)</Label>
++                      <Input
++                        id={`paid-amount-${payment.id}`}
++                        type="number"
++                        step="0.01"
++                        value={formState.paidAmount}
++                        onChange={(event) => setFormState({ ...formState, paidAmount: event.target.value })}
++                        disabled={submitting}
++                      />
++                    </div>
++                    <div className="grid gap-2">
++                      <Label htmlFor={`confirmation-${payment.id}`}>Confirmation number (optional)</Label>
++                      <Input
++                        id={`confirmation-${payment.id}`}
++                        type="text"
++                        value={formState.confirmationNumber}
++                        onChange={(event) =>
++                          setFormState({ ...formState, confirmationNumber: event.target.value })
++                        }
++                        disabled={submitting}
++                      />
++                    </div>
++                    <div className="grid gap-2 sm:col-span-2">
++                      <Label htmlFor={`note-${payment.id}`}>Note (optional)</Label>
++                      <Textarea
++                        id={`note-${payment.id}`}
++                        value={formState.note}
++                        onChange={(event) => setFormState({ ...formState, note: event.target.value })}
++                        disabled={submitting}
++                      />
++                    </div>
++                  </div>
++
++                  {error && (
++                    <div className="rounded-md border border-destructive/20 bg-destructive/10 px-3 py-2 text-sm text-destructive">
++                      {error}
++                    </div>
++                  )}
++
++                  <div className="flex flex-wrap gap-2">
++                    <Button type="button" onClick={submitConfirmation} disabled={submitting}>
++                      {submitting ? "Submitting..." : "Confirm payment"}
++                    </Button>
++                    <Button variant="outline" type="button" onClick={closeForm} disabled={submitting}>
++                      Cancel
++                    </Button>
++                  </div>
++                </div>
++              </CardContent>
++            )}
++          </Card>
++        );
++      })}
++    </section>
++  );
++}
+
+diff --git a/app/(portal)/p/[token]/page.tsx b/app/(portal)/p/[token]/page.tsx
+new file mode 100644
+index 0000000..02003ca
+--- /dev/null
++++ b/app/(portal)/p/[token]/page.tsx
+@@ -0,0 +1,114 @@
++import { notFound } from "next/navigation";
++import { prisma } from "@/lib/prisma";
++import { hashPortalToken } from "@/lib/portal-token";
++import { ClientChecklist } from "./ClientChecklist";
++import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
++
++export const dynamic = "force-dynamic";
++
++type PortalPageProps = {
++  params: { token: string };
++};
++
++export default async function PortalPage({ params }: PortalPageProps) {
++  const token = params.token;
++  if (!token) {
++    notFound();
++  }
++
++  const tokenHash = hashPortalToken(token);
++  const now = new Date();
++
++  const portalLink = await prisma.portalLink.findFirst({
++    where: {
++      tokenHash,
++      scope: "PLAN",
++      OR: [{ expiresAt: null }, { expiresAt: { gt: now } }]
++    },
++    include: {
++      client: true,
++      run: {
++        include: {
++          client: true,
++          payments: {
++            orderBy: [{ dueDate: "asc" }, { sortOrder: "asc" }]
++          }
++        }
++      }
++    }
++  });
++
++  if (!portalLink?.run) {
++    notFound();
++  }
++
++  await prisma.$transaction([
++    prisma.portalLink.update({
++      where: { id: portalLink.id },
++      data: { lastUsedAt: now }
++    }),
++    prisma.payment.updateMany({
++      where: {
++        runId: portalLink.run.id,
++        status: "SENT"
++      },
++      data: { status: "VIEWED" }
++    })
++  ]);
++
++  const clientName =
++    portalLink.client?.name || portalLink.run.client?.name || portalLink.run.client?.addresseeName || "Client";
++
++  const payments = portalLink.run.payments.map((payment) => ({
++    id: payment.id,
++    scope: payment.scope,
++    stateCode: payment.stateCode,
++    paymentType: payment.paymentType,
++    dueDate: payment.dueDate ? payment.dueDate.toISOString().slice(0, 10) : null,
++    amount: payment.amount ? payment.amount.toString() : null,
++    status: payment.status
++  }));
++
++  const totalPayments = payments.length;
++  const confirmedPayments = payments.filter((payment) => ["CONFIRMED", "VERIFIED"].includes(payment.status)).length;
++  const remainingPayments = totalPayments - confirmedPayments;
++  const nextDue = payments.find((payment) => !["CONFIRMED", "VERIFIED", "CANCELLED"].includes(payment.status));
++
++  return (
++    <div className="grid gap-8">
++      <Card className="relative overflow-hidden bg-card/70 backdrop-blur">
++        <div
++          aria-hidden
++          className="absolute inset-0 bg-[radial-gradient(70%_60%_at_10%_0%,hsl(var(--primary)_/_0.16),transparent_70%)]"
++        />
++        <CardHeader className="space-y-2">
++          <p className="text-xs font-medium uppercase tracking-[0.18em] text-muted-foreground">
++            Tax Payment Checklist
++          </p>
++          <CardTitle className="relative text-2xl">{clientName}</CardTitle>
++          <CardDescription>
++            Confirm each payment after you submit it to the IRS or state portal.
++          </CardDescription>
++        </CardHeader>
++        <CardContent>
++          <div className="grid gap-3 sm:grid-cols-3">
++            <div className="rounded-2xl border bg-background/60 p-4">
++              <p className="text-xs font-medium uppercase tracking-wide text-muted-foreground">Remaining</p>
++              <p className="mt-2 text-2xl font-semibold tabular-nums">{remainingPayments}</p>
++            </div>
++            <div className="rounded-2xl border bg-background/60 p-4">
++              <p className="text-xs font-medium uppercase tracking-wide text-muted-foreground">Confirmed</p>
++              <p className="mt-2 text-2xl font-semibold tabular-nums">{confirmedPayments}</p>
++            </div>
++            <div className="rounded-2xl border bg-background/60 p-4">
++              <p className="text-xs font-medium uppercase tracking-wide text-muted-foreground">Next due</p>
++              <p className="mt-2 text-2xl font-semibold tabular-nums">{nextDue?.dueDate || "All set"}</p>
++            </div>
++          </div>
++        </CardContent>
++      </Card>
++
++      <ClientChecklist token={token} payments={payments} clientName={clientName} />
++    </div>
++  );
++}
+
+diff --git a/components/ui/badge.tsx b/components/ui/badge.tsx
+new file mode 100644
+index 0000000..686d064
+--- /dev/null
++++ b/components/ui/badge.tsx
+@@ -0,0 +1,35 @@
++import * as React from "react";
++import { cva, type VariantProps } from "class-variance-authority";
++
++import { cn } from "@/lib/utils";
++
++const badgeVariants = cva(
++  "inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 ring-offset-background",
++  {
++    variants: {
++      variant: {
++        default: "border-transparent bg-primary text-primary-foreground",
++        secondary: "border-transparent bg-secondary text-secondary-foreground",
++        outline: "text-foreground",
++        success: "border-emerald-500/20 bg-emerald-500/15 text-emerald-700 dark:text-emerald-300",
++        info: "border-sky-500/20 bg-sky-500/15 text-sky-700 dark:text-sky-300",
++        warning: "border-amber-500/25 bg-amber-500/15 text-amber-800 dark:text-amber-300",
++        destructive: "border-transparent bg-destructive text-destructive-foreground"
++      }
++    },
++    defaultVariants: {
++      variant: "default"
++    }
++  }
++);
++
++export interface BadgeProps
++  extends React.HTMLAttributes<HTMLDivElement>,
++    VariantProps<typeof badgeVariants> {}
++
++function Badge({ className, variant, ...props }: BadgeProps) {
++  return <div className={cn(badgeVariants({ variant }), className)} {...props} />;
++}
++
++export { Badge, badgeVariants };
++
+
+diff --git a/components/ui/button.tsx b/components/ui/button.tsx
+new file mode 100644
+index 0000000..fb0bbf3
+--- /dev/null
++++ b/components/ui/button.tsx
+@@ -0,0 +1,50 @@
++import * as React from "react";
++import { Slot } from "@radix-ui/react-slot";
++import { cva, type VariantProps } from "class-variance-authority";
++
++import { cn } from "@/lib/utils";
++
++const buttonVariants = cva(
++  "inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ring-offset-background",
++  {
++    variants: {
++      variant: {
++        default: "bg-primary text-primary-foreground shadow-soft hover:bg-primary/90",
++        secondary: "bg-secondary text-secondary-foreground hover:bg-secondary/80",
++        outline: "border border-input bg-background hover:bg-accent hover:text-accent-foreground",
++        ghost: "hover:bg-accent hover:text-accent-foreground",
++        link: "text-primary underline-offset-4 hover:underline",
++        destructive: "bg-destructive text-destructive-foreground hover:bg-destructive/90"
++      },
++      size: {
++        default: "h-10 px-4 py-2",
++        sm: "h-9 rounded-md px-3",
++        lg: "h-11 rounded-md px-8",
++        icon: "h-10 w-10"
++      }
++    },
++    defaultVariants: {
++      variant: "default",
++      size: "default"
++    }
++  }
++);
++
++export interface ButtonProps
++  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
++    VariantProps<typeof buttonVariants> {
++  asChild?: boolean;
++}
++
++const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
++  ({ className, variant, size, asChild = false, ...props }, ref) => {
++    const Comp = asChild ? Slot : "button";
++    return (
++      <Comp className={cn(buttonVariants({ variant, size, className }))} ref={ref} {...props} />
++    );
++  }
++);
++Button.displayName = "Button";
++
++export { Button, buttonVariants };
++
+
+diff --git a/components/ui/card.tsx b/components/ui/card.tsx
+new file mode 100644
+index 0000000..9f2da7e
+--- /dev/null
++++ b/components/ui/card.tsx
+@@ -0,0 +1,56 @@
++import * as React from "react";
++
++import { cn } from "@/lib/utils";
++
++const Card = React.forwardRef<React.ElementRef<"div">, React.ComponentPropsWithoutRef<"div">>(
++  ({ className, ...props }, ref) => (
++    <div
++      ref={ref}
++      className={cn("rounded-lg border bg-card text-card-foreground shadow-soft", className)}
++      {...props}
++    />
++  )
++);
++Card.displayName = "Card";
++
++const CardHeader = React.forwardRef<React.ElementRef<"div">, React.ComponentPropsWithoutRef<"div">>(
++  ({ className, ...props }, ref) => (
++    <div ref={ref} className={cn("flex flex-col space-y-1.5 p-6", className)} {...props} />
++  )
++);
++CardHeader.displayName = "CardHeader";
++
++const CardTitle = React.forwardRef<React.ElementRef<"h3">, React.ComponentPropsWithoutRef<"h3">>(
++  ({ className, ...props }, ref) => (
++    <h3
++      ref={ref}
++      className={cn("text-lg font-semibold leading-none tracking-tight", className)}
++      {...props}
++    />
++  )
++);
++CardTitle.displayName = "CardTitle";
++
++const CardDescription = React.forwardRef<
++  React.ElementRef<"p">,
++  React.ComponentPropsWithoutRef<"p">
++>(({ className, ...props }, ref) => (
++  <p ref={ref} className={cn("text-sm text-muted-foreground", className)} {...props} />
++));
++CardDescription.displayName = "CardDescription";
++
++const CardContent = React.forwardRef<React.ElementRef<"div">, React.ComponentPropsWithoutRef<"div">>(
++  ({ className, ...props }, ref) => (
++    <div ref={ref} className={cn("p-6 pt-0", className)} {...props} />
++  )
++);
++CardContent.displayName = "CardContent";
++
++const CardFooter = React.forwardRef<React.ElementRef<"div">, React.ComponentPropsWithoutRef<"div">>(
++  ({ className, ...props }, ref) => (
++    <div ref={ref} className={cn("flex items-center p-6 pt-0", className)} {...props} />
++  )
++);
++CardFooter.displayName = "CardFooter";
++
++export { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };
+
+diff --git a/components/ui/input.tsx b/components/ui/input.tsx
+new file mode 100644
+index 0000000..126e5cc
+--- /dev/null
++++ b/components/ui/input.tsx
+@@ -0,0 +1,23 @@
++import * as React from "react";
++
++import { cn } from "@/lib/utils";
++
++const Input = React.forwardRef<HTMLInputElement, React.InputHTMLAttributes<HTMLInputElement>>(
++  ({ className, type, ...props }, ref) => {
++    return (
++      <input
++        type={type}
++        className={cn(
++          "flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
++          className
++        )}
++        ref={ref}
++        {...props}
++      />
++    );
++  }
++);
++Input.displayName = "Input";
++
++export { Input };
++
+
+diff --git a/components/ui/label.tsx b/components/ui/label.tsx
+new file mode 100644
+index 0000000..84e5874
+--- /dev/null
++++ b/components/ui/label.tsx
+@@ -0,0 +1,17 @@
++import * as React from "react";
++
++import { cn } from "@/lib/utils";
++
++const Label = React.forwardRef<HTMLLabelElement, React.LabelHTMLAttributes<HTMLLabelElement>>(
++  ({ className, ...props }, ref) => (
++    <label
++      ref={ref}
++      className={cn("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70", className)}
++      {...props}
++    />
++  )
++);
++Label.displayName = "Label";
++
++export { Label };
++
+
+diff --git a/components/ui/select.tsx b/components/ui/select.tsx
+new file mode 100644
+index 0000000..6f11061
+--- /dev/null
++++ b/components/ui/select.tsx
+@@ -0,0 +1,20 @@
++import * as React from "react";
++
++import { cn } from "@/lib/utils";
++
++const Select = React.forwardRef<HTMLSelectElement, React.SelectHTMLAttributes<HTMLSelectElement>>(
++  ({ className, ...props }, ref) => (
++    <select
++      ref={ref}
++      className={cn(
++        "flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
++        className
++      )}
++      {...props}
++    />
++  )
++);
++Select.displayName = "Select";
++
++export { Select };
++
+
+diff --git a/components/ui/separator.tsx b/components/ui/separator.tsx
+new file mode 100644
+index 0000000..1a6db59
+--- /dev/null
++++ b/components/ui/separator.tsx
+@@ -0,0 +1,27 @@
++import * as React from "react";
++
++import { cn } from "@/lib/utils";
++
++type SeparatorProps = React.HTMLAttributes<HTMLDivElement> & {
++  orientation?: "horizontal" | "vertical";
++};
++
++const Separator = React.forwardRef<HTMLDivElement, SeparatorProps>(
++  ({ className, orientation = "horizontal", ...props }, ref) => (
++    <div
++      ref={ref}
++      role="separator"
++      aria-orientation={orientation}
++      className={cn(
++        "shrink-0 bg-border",
++        orientation === "horizontal" ? "h-px w-full" : "h-full w-px",
++        className
++      )}
++      {...props}
++    />
++  )
++);
++Separator.displayName = "Separator";
++
++export { Separator };
++
+
+diff --git a/components/ui/table.tsx b/components/ui/table.tsx
+new file mode 100644
+index 0000000..1142dbb
+--- /dev/null
++++ b/components/ui/table.tsx
+@@ -0,0 +1,72 @@
++import * as React from "react";
++
++import { cn } from "@/lib/utils";
++
++const Table = React.forwardRef<HTMLTableElement, React.HTMLAttributes<HTMLTableElement>>(
++  ({ className, ...props }, ref) => (
++    <div className="relative w-full overflow-auto">
++      <table ref={ref} className={cn("w-full caption-bottom text-sm", className)} {...props} />
++    </div>
++  )
++);
++Table.displayName = "Table";
++
++const TableHeader = React.forwardRef<HTMLTableSectionElement, React.HTMLAttributes<HTMLTableSectionElement>>(
++  ({ className, ...props }, ref) => (
++    <thead ref={ref} className={cn("[&_tr]:border-b", className)} {...props} />
++  )
++);
++TableHeader.displayName = "TableHeader";
++
++const TableBody = React.forwardRef<HTMLTableSectionElement, React.HTMLAttributes<HTMLTableSectionElement>>(
++  ({ className, ...props }, ref) => (
++    <tbody ref={ref} className={cn("[&_tr:last-child]:border-0", className)} {...props} />
++  )
++);
++TableBody.displayName = "TableBody";
++
++const TableFooter = React.forwardRef<HTMLTableSectionElement, React.HTMLAttributes<HTMLTableSectionElement>>(
++  ({ className, ...props }, ref) => (
++    <tfoot ref={ref} className={cn("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0", className)} {...props} />
++  )
++);
++TableFooter.displayName = "TableFooter";
++
++const TableRow = React.forwardRef<HTMLTableRowElement, React.HTMLAttributes<HTMLTableRowElement>>(
++  ({ className, ...props }, ref) => (
++    <tr
++      ref={ref}
++      className={cn("border-b transition-colors hover:bg-muted/40 data-[state=selected]:bg-muted", className)}
++      {...props}
++    />
++  )
++);
++TableRow.displayName = "TableRow";
++
++const TableHead = React.forwardRef<HTMLTableCellElement, React.ThHTMLAttributes<HTMLTableCellElement>>(
++  ({ className, ...props }, ref) => (
++    <th
++      ref={ref}
++      className={cn("h-11 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0", className)}
++      {...props}
++    />
++  )
++);
++TableHead.displayName = "TableHead";
++
++const TableCell = React.forwardRef<HTMLTableCellElement, React.TdHTMLAttributes<HTMLTableCellElement>>(
++  ({ className, ...props }, ref) => (
++    <td ref={ref} className={cn("p-4 align-middle [&:has([role=checkbox])]:pr-0", className)} {...props} />
++  )
++);
++TableCell.displayName = "TableCell";
++
++const TableCaption = React.forwardRef<HTMLTableCaptionElement, React.HTMLAttributes<HTMLTableCaptionElement>>(
++  ({ className, ...props }, ref) => (
++    <caption ref={ref} className={cn("mt-4 text-sm text-muted-foreground", className)} {...props} />
++  )
++);
++TableCaption.displayName = "TableCaption";
++
++export { Table, TableHeader, TableBody, TableFooter, TableHead, TableRow, TableCell, TableCaption };
++
+
+diff --git a/components/ui/textarea.tsx b/components/ui/textarea.tsx
+new file mode 100644
+index 0000000..1f13aba
+--- /dev/null
++++ b/components/ui/textarea.tsx
+@@ -0,0 +1,20 @@
++import * as React from "react";
++
++import { cn } from "@/lib/utils";
++
++const Textarea = React.forwardRef<HTMLTextAreaElement, React.TextareaHTMLAttributes<HTMLTextAreaElement>>(
++  ({ className, ...props }, ref) => (
++    <textarea
++      ref={ref}
++      className={cn(
++        "flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
++        className
++      )}
++      {...props}
++    />
++  )
++);
++Textarea.displayName = "Textarea";
++
++export { Textarea };
++
+
+diff --git a/lib/portal-token.ts b/lib/portal-token.ts
+new file mode 100644
+index 0000000..7ae346f
+--- /dev/null
++++ b/lib/portal-token.ts
+@@ -0,0 +1,22 @@
++import { createHash, randomBytes } from "crypto";
++
++export function generatePortalToken(): string {
++  return randomBytes(32).toString("base64url");
++}
++
++export function hashPortalToken(token: string): string {
++  return createHash("sha256").update(token).digest("hex");
++}
++
++export function getRequestOrigin(request: Request): string {
++  const forwardedHost = request.headers.get("x-forwarded-host");
++  if (forwardedHost) {
++    const host = forwardedHost.split(",")[0]?.trim();
++    const forwardedProto = request.headers.get("x-forwarded-proto");
++    const proto = forwardedProto ? forwardedProto.split(",")[0]?.trim() : "https";
++    if (host) {
++      return `${proto}://${host}`;
++    }
++  }
++  return new URL(request.url).origin;
++}
+
+diff --git a/lib/utils.ts b/lib/utils.ts
+new file mode 100644
+index 0000000..6fcf374
+--- /dev/null
++++ b/lib/utils.ts
+@@ -0,0 +1,7 @@
++import { clsx, type ClassValue } from "clsx";
++import { twMerge } from "tailwind-merge";
++
++export function cn(...inputs: ClassValue[]) {
++  return twMerge(clsx(inputs));
++}
++
+
+diff --git a/postcss.config.cjs b/postcss.config.cjs
+new file mode 100644
+index 0000000..5cbc2c7
+--- /dev/null
++++ b/postcss.config.cjs
+@@ -0,0 +1,6 @@
++module.exports = {
++  plugins: {
++    tailwindcss: {},
++    autoprefixer: {}
++  }
++};
+
+diff --git a/tailwind.config.js b/tailwind.config.js
+new file mode 100644
+index 0000000..975ebd6
+--- /dev/null
++++ b/tailwind.config.js
+@@ -0,0 +1,60 @@
++import { fontFamily } from "tailwindcss/defaultTheme";
++
++/** @type {import('tailwindcss').Config} */
++const config = {
++  darkMode: "media",
++  content: ["./app/**/*.{ts,tsx}", "./components/**/*.{ts,tsx}", "./lib/**/*.{ts,tsx}"],
++  theme: {
++    extend: {
++      fontFamily: {
++        sans: ["var(--font-sans)", ...fontFamily.sans]
++      },
++      colors: {
++        border: "hsl(var(--border))",
++        input: "hsl(var(--input))",
++        ring: "hsl(var(--ring))",
++        background: "hsl(var(--background))",
++        foreground: "hsl(var(--foreground))",
++        primary: {
++          DEFAULT: "hsl(var(--primary))",
++          foreground: "hsl(var(--primary-foreground))"
++        },
++        secondary: {
++          DEFAULT: "hsl(var(--secondary))",
++          foreground: "hsl(var(--secondary-foreground))"
++        },
++        destructive: {
++          DEFAULT: "hsl(var(--destructive))",
++          foreground: "hsl(var(--destructive-foreground))"
++        },
++        muted: {
++          DEFAULT: "hsl(var(--muted))",
++          foreground: "hsl(var(--muted-foreground))"
++        },
++        accent: {
++          DEFAULT: "hsl(var(--accent))",
++          foreground: "hsl(var(--accent-foreground))"
++        },
++        popover: {
++          DEFAULT: "hsl(var(--popover))",
++          foreground: "hsl(var(--popover-foreground))"
++        },
++        card: {
++          DEFAULT: "hsl(var(--card))",
++          foreground: "hsl(var(--card-foreground))"
++        }
++      },
++      borderRadius: {
++        lg: "var(--radius)",
++        md: "calc(var(--radius) - 2px)",
++        sm: "calc(var(--radius) - 4px)"
++      },
++      boxShadow: {
++        soft: "0 1px 1px hsl(var(--shadow) / 0.04), 0 8px 28px hsl(var(--shadow) / 0.10)"
++      }
++    }
++  },
++  plugins: []
++};
++
++export default config;
+

